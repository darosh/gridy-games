!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}([function(e,t,r){!function(e){"use strict";var t;(t=e.Shape||(e.Shape={}))[t.Even=0]="Even",t[t.Odd=1]="Odd",t[t.Hexagonal=2]="Hexagonal",t[t.Triangular=3]="Triangular",t[t.Rhombus=4]="Rhombus";var r,n,i,o=Math.sqrt(3),a=Math.sqrt(3)/2,s=Math.sqrt(3)/3,u=Math.sqrt(3)/6,c=Math.sqrt(2),l=Math.sqrt(2)/2,f=Math.sqrt(2)/4,h=Math.PI/180,d=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),y=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},v=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},b=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},g=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d(this,e),this.x=t,this.y=r}return p(e,[{key:"distance",value:function(e){return Math.floor((Math.abs(this.x-e.x)+Math.abs(this.y-e.y))/2)}},{key:"toString",value:function(){return this.value.toString()}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"scale",value:function(t){return new e(this.x*t,this.y*t)}},{key:"cubeLength",value:function(){return Math.floor((Math.abs(this.x)+Math.abs(this.y))/2)}},{key:"value",get:function(){return[this.x,this.y]}}]),e}(),w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d(this,e),this.x=t,this.y=r}return p(e,null,[{key:"round",value:function(e){var t=Math.round(e.x),r=Math.round(e.y);return new m(t,r)}},{key:"lerp",value:function(t,r,n){return new e(t.x+(r.x-t.x)*n,t.y+(r.y-t.y)*n)}},{key:"line",value:function(t,r){for(var n=t.distance(r),i=[],o=0;o<n+1;o++)i.push(e.round(e.lerp(t,r,1/Math.max(1,n)*o)));return i}}]),p(e,[{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"scale",value:function(t){return new e(this.x*t,this.y*t)}},{key:"toString",value:function(){return this.value.toString()}},{key:"value",get:function(){return[this.x,this.y]}}]),e}(),x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;d(this,e),this.minX=0,this.maxX=0,this.minY=0,this.maxY=0,this.minX=t,this.maxX=r,this.minY=n,this.maxY=i}return p(e,null,[{key:"add",value:function(t,r){return new e(t.minX+r.minX,t.maxX+r.maxX,t.minY+r.minY,t.maxY+r.maxY)}},{key:"points",value:function(e){return[new w(e.minX,e.minY),new w(e.maxX,e.minY),new w(e.minX,e.maxY),new w(e.maxX,e.maxY)]}}]),e}();function k(e){var t=new x(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY),r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;s.x<t.minX&&(t.minX=s.x),s.x>t.maxX&&(t.maxX=s.x),s.y<t.minY&&(t.minY=s.y),s.y>t.maxY&&(t.maxY=s.y)}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}return t}function O(e){if(2===e.tileTypes){for(var t=[],r=e.tiles.reduce(function(t,r){return t[e.getTileType(r)].push(e.center(r)),t},[[],[]]),n=0;n<2;n++){var i=k(e.vertices(e.orientation,void 0,n)),o=k(r[n]);t=t.concat(x.points(x.add(i,o)))}return k(t)}var a=e.tiles.map(function(t){return e.center(t)}),s=k(e.vertices(e.orientation)),u=k(a);return x.add(s,u)}(function(e){e[e.N=-1]="N",e[e.S=1]="S",e[e.W=-2]="W",e[e.E=2]="E"})(r||(r={})),function(e){e[e.N=1]="N",e[e.E=2]="E",e[e.NW=3]="NW",e[e.SW=4]="SW",e[e.S=-1]="S",e[e.W=-2]="W",e[e.SE=-3]="SE",e[e.NE=-4]="NE"}(n||(n={})),function(e){e[e.N=-1]="N",e[e.S=1]="S",e[e.NW=-2]="NW",e[e.SE=2]="SE",e[e.NE=-3]="NE",e[e.SW=3]="SW"}(i||(i={}));var _,T=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;d(this,e),this.x=t,this.y=r,this.z=n}return p(e,[{key:"distance",value:function(e){return Math.floor((Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z))/2)}},{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y,this.z+t.z)}},{key:"scale",value:function(t){return new e(this.x*t,this.y*t,this.z*t)}},{key:"toString",value:function(){return this.value.toString()}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z}},{key:"round",value:function(){return new e(Math.round(this.x),Math.round(this.y),Math.round(this.z))}},{key:"cubeLength",value:function(){return Math.floor((Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z))/2)}},{key:"value",get:function(){return[this.x,this.y,this.z]}}]),e}(),j=function(e){function t(){d(this,t);var e=b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.tiles=[],e}return v(t,e),p(t,[{key:"shift",value:function(){return t.directions[4][1]}},{key:"directions",value:function(){return t.directions}},{key:"add",value:function(e){var r=y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e);return new t(r.x,r.y,r.z)}},{key:"scale",value:function(e){var r=y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"scale",this).call(this,e);return new t(r.x,r.y,r.z)}},{key:"neighbors",value:function(){var e=[],r=!0,n=!1,i=void 0;try{for(var o,a=t.directions[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;e.push([s[0],this.add(s[1])])}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}return e}},{key:"right",value:function(){var e=this.x;return this.x=-this.z,this.z=-this.y,this.y=-e,this}},{key:"left",value:function(){var e=this.z;return this.z=-this.x,this.x=-this.y,this.y=-e,this}},{key:"key",get:function(){return this.toString()}}]),t}(T);j.directions=[[i.NW,new j(1,-1,0)],[i.NE,new j(1,0,-1)],[i.N,new j(0,1,-1)],[i.SE,new j(-1,1,0)],[i.SW,new j(-1,0,1)],[i.S,new j(0,-1,1)]],function(e){e[e.Simple=1]="Simple",e[e.Variable=2]="Variable"}(_||(_={}));var S=function(){function t(r){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.Shape.Hexagonal,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments[4];d(this,t),this.scaleY=-1,this.angle=-30,this.tileTypes=_.Simple,this.scale=r,this.radius=a*r/a/2,this.orientation=n,s=s||o,this.x=o,this.y=s,this.shape=i,i===e.Shape.Even&&!1===n?(this.toTile=t.evenQToCube,this.toPoint=t.cubeToEvenQ,this.tiles=t.trapezoidalShape(0,o,0,s,this.toTile)):i===e.Shape.Even&&!0===n?(this.toTile=t.evenRToCube,this.toPoint=t.cubeToEvenR,this.tiles=t.trapezoidalShape(0,o,0,s,this.toTile)):i===e.Shape.Odd&&!1===n?(this.toTile=t.oddQToCube,this.toPoint=t.cubeToOddQ,this.tiles=t.trapezoidalShape(0,o,0,s,this.toTile)):i===e.Shape.Odd&&!0===n?(this.toTile=t.oddRToCube,this.toPoint=t.cubeToOddR,this.tiles=t.trapezoidalShape(0,o,0,s,this.toTile)):i===e.Shape.Hexagonal?(this.toTile=t.twoAxisToCube,this.toPoint=t.cubeToTwoAxis,this.tiles=t.hexagonalShape(o)):i===e.Shape.Triangular?(this.toTile=t.evenQToCube,this.toPoint=t.cubeToEvenQ,this.tiles=t.triangularShape(o)):(this.toTile=t.twoAxisToCube,this.toPoint=t.cubeToTwoAxis,this.tiles=t.trapezoidalShape(0,o,0,s,this.toTile))}return p(t,[{key:"bounds",value:function(){return O(this)}},{key:"vertices",value:function(e,t){var r=[];t=void 0===t?this.scale:t,t/=a,e=void 0!==e&&this.orientation;for(var n=0;n<6;n++){var i=2*Math.PI*(2*n-(e?1:0))/12;r.push(new w(.5*t*Math.cos(i),.5*t*Math.sin(i)))}return r}},{key:"center",value:function(e){var t=this.scale/a/2;return(this.orientation?new w(o*e.x+a*e.z,1.5*e.z*this.scaleY):new w(1.5*e.x,(a*e.x+o*e.z)*this.scaleY)).scale(t)}},{key:"position",value:function(e){var t=this.scale/2;(e=e.scale(1/t)).y*=this.scaleY;var r=void 0,n=void 0;return this.orientation?(r=s*e.x+-1/3*e.y,n=2/3*e.y):(r=2/3*e.x,n=-1/3*e.x+s*e.y),new j(Math.round(r),Math.round(-r-n),Math.round(n))}},{key:"tile",value:function(e,t){return this.toTile?this.toTile(new m(e,t)):void 0}}],[{key:"twoAxisToCube",value:function(e){return new j(e.x,-e.y-e.x,e.y)}},{key:"cubeToTwoAxis",value:function(e){return new m(e.x,e.z)}},{key:"twoAxisToCubeXY",value:function(e){return new j(e.x,e.y,-e.x-e.y)}},{key:"cubeToTwoAxisXY",value:function(e){return new m(e.x,e.y)}},{key:"twoAxisToCubeYZ",value:function(e){return new j(-e.x-e.y,e.x,e.y)}},{key:"cubeToTwoAxisYZ",value:function(e){return new m(e.y,e.z)}},{key:"oddQToCube",value:function(e){var t=e.x,r=e.y-(e.x-(1&e.x)>>1);return new j(t,-t-r,r)}},{key:"cubeToOddQ",value:function(e){var t=e.x,r=e.z;return new m(t,r+(t-(1&t)>>1))}},{key:"evenQToCube",value:function(e){var t=e.x,r=e.y-(e.x+(1&e.x)>>1);return new j(t,-t-r,r)}},{key:"cubeToEvenQ",value:function(e){var t=e.x,r=e.z;return new m(t,r+(t+(1&t)>>1))}},{key:"oddRToCube",value:function(e){var t=e.y,r=e.x-(e.y-(1&e.y)>>1);return new j(r,-r-t,t)}},{key:"cubeToOddR",value:function(e){var t=e.x,r=e.z;return new m(t+(r-(1&r)>>1),r)}},{key:"evenRToCube",value:function(e){var t=e.y,r=e.x-(e.y+(1&e.y)>>1);return new j(r,-r-t,t)}},{key:"cubeToEvenR",value:function(e){var t=e.x,r=e.z;return new m(t+(r+(1&r)>>1),r)}},{key:"trapezoidalShape",value:function(e,t,r,n,i){for(var o=[],a=e;a<t;a++)for(var s=r;s<n;s++)o.push(i(new m(a,s)));return o}},{key:"triangularShape",value:function(e){for(var t=[],r=0;r<e;r++)for(var n=0;n<r+1;n++)t.push(new j(n,-r,r-n));return t}},{key:"hexagonalShape",value:function(e){for(var t=[],r=-e;r<e;r++)for(var n=-e;n<e;n++){var i=-r-n;Math.abs(r)<e&&Math.abs(n)<e&&Math.abs(i)<e&&t.push(new j(r,n,i))}return t}},{key:"region",value:function(e,t,r,n,i,o){for(var a=[],s=e;s<=t;s++)for(var u=Math.max(r,-s-o);u<=Math.min(n,-s-i);u++){var c=-s-u;a.push(new j(s,u,c))}return a}}]),t}();S.shapes=[e.Shape.Hexagonal,e.Shape.Rhombus,e.Shape.Even,e.Shape.Odd,e.Shape.Triangular];var P=function(e){function t(e,r,n,i,o){d(this,t);var a=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,n,i,o));return a.angle=0,a.radius=f*e,a}return v(t,e),p(t,[{key:"vertices",value:function(e,t){t=void 0===t?this.scale:t;for(var r=[],n=0;n<4;n++){var i=2*Math.PI*(2*n-1)/8;r.push(new w(.5*t*Math.cos(i),.5*t*Math.sin(i)))}return r}},{key:"center",value:function(e){var t=this.scale/2;return(this.orientation?new w(c*e.x+l*e.z,c*e.z*this.scaleY):new w(c*e.x,(l*e.x+c*e.z)*this.scaleY)).scale(t)}}]),t}(S),E=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];d(this,t);var i=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return i.s=n,i}return v(t,e),p(t,[{key:"toString",value:function(){return this.value.toString()}},{key:"equals",value:function(e){return this.s===e.s&&y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"equals",this).call(this,e)}},{key:"shift",value:function(){return t.directions1[0][1]}},{key:"directions",value:function(){return this.s?t.directions2:t.directions1}},{key:"opposite",value:function(e){return t.opposites[this.s.toString()][e]}},{key:"add",value:function(e){var r=y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e);return new t(r.x,r.y,e.s)}},{key:"scale",value:function(e){var r=y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"scale",this).call(this,e);return new t(r.x,r.y)}},{key:"multiNeighbors",value:function(){for(var e=[],r=1;r<4;r++){var n=t.multiDirections[this.s.toString()][r],i=this.s?t.directions2[n][1]:t.directions1[n][1];e.push([r,this.add(i)]),e.push([t.multiOpposites[this.s.toString()][r],this.add(i)])}return e}},{key:"neighbors",value:function(){for(var e=[],r=0;r<3;r++)e.push([t.directions1[r][0],this.add(this.s?t.directions2[r][1]:t.directions1[r][1])]);return e}},{key:"key",get:function(){return this.toString()}},{key:"value",get:function(){return[this.x,this.y,this.s]}}]),t}(m);E.directions1=[[1,new E(0,0,!0)],[2,new E(-1,0,!0)],[3,new E(0,-1,!0)]],E.directions2=[[1,new E(0,1,!1)],[2,new E(0,0,!1)],[3,new E(1,0,!1)]],E.opposites={false:{1:3,2:1,3:2},true:{1:2,2:3,3:1}},E.multiOpposites={false:{"-1":2,"-2":3,"-3":1,1:-3,2:-1,3:-2},true:{"-1":3,"-2":1,"-3":2,1:-2,2:-3,3:-1}},E.multiDirections={false:{1:0,2:2,3:1},true:{1:0,2:2,3:1}};var R=function(){function t(r){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.Shape.Triangular,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;d(this,t),this.scaleY=-1,this.angle=-60,this.tileTypes=_.Variable,this.scale=r,this.radius=u*r/a,this.orientation=n,this.x=o,this.y=s,i===e.Shape.Rhombus?(this.tiles=this.rhombus(),this.orientation=!1):i===e.Shape.Hexagonal?(this.tiles=this.hexagonalShape(o),this.orientation=!1):(this.tiles=this.triangle(),this.orientation=!1),this.toPoint=function(e){return new m(2*e.x+(e.s?1:0),e.y)},this.toTile=function(e){return new E(e.x/2-e.x%2,e.y)}}return p(t,[{key:"bounds",value:function(){return O(this)}},{key:"center",value:function(e){var t=this.scale/a;return new w((2*e.x+(e.s?1:0)+e.y)*t/2,t*(e.y*a+(e.s?0:-u))*this.scaleY)}},{key:"vertices",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t=void 0===t?this.scale:t,t/=a,(this.scaleY>0?0===r:0!==r)?[new w(0,-t*s),new w(-t/2,t*u),new w(t/2,t*u)]:[new w(0,t*(u+u)),new w(-t/2,-t*(s-u)),new w(t/2,-t*(s-u))]}},{key:"position",value:function(e){return new E(Math.round(e.x),Math.round(e.y),!1)}},{key:"getTileType",value:function(e){return e.s?0:1}},{key:"tile",value:function(e,t){return new E(Math.floor(e/2),t,!!(e%2))}},{key:"rhombus",value:function(){for(var e=[],t=0;t<this.x;t++)for(var r=0;r<this.y;r++)e.push(new E(t,r,!1)),e.push(new E(t,r,!0));return e}},{key:"triangle",value:function(){for(var e=[],t=0;t<this.x;t++)for(var r=0;r<this.x-t;r++)e.push(new E(r,t,!1)),r<this.x-t-1&&e.push(new E(r,t,!0));return e}},{key:"hexagonalShape",value:function(e){for(var t=[],r=-e;r<e;r++)for(var n=-e;n<e;n++)Math.abs(-r-n)<=e&&r+n<e&&t.push(new E(r,n,!1)),Math.abs(-r-n)-1<=e&&r+n+1<e&&t.push(new E(r,n,!0));return t}}]),t}();R.shapes=[e.Shape.Hexagonal,e.Shape.Rhombus,e.Shape.Triangular];var M=function(){function e(t,r,n){d(this,e),this.x=t,this.y=r,this.z=n}return p(e,null,[{key:"round",value:function(e){var t=Math.round(e.x),r=Math.round(e.y),n=Math.round(e.z),i=Math.abs(t-e.x),o=Math.abs(r-e.y),a=Math.abs(n-e.z);return i>o&&i>a?t=-r-n:o>a?r=-t-n:n=-t-r,new T(t,r,n)}},{key:"lerp",value:function(t,r,n){return new e(t.x+(r.x-t.x)*n,t.y+(r.y-t.y)*n,t.z+(r.z-t.z)*n)}},{key:"line",value:function(t,r){for(var n=t.distance(r),i=[],o=0;o<n+1;o++)i.push(e.round(e.lerp(t,r,1/Math.max(1,n)*o)));return i}}]),p(e,[{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z}},{key:"toString",value:function(){return this.value.toString()}},{key:"round",value:function(){return e.round(this)}},{key:"value",get:function(){return[this.x,this.y,this.z]}}]),e}(),G=function(e){function t(){d(this,t);var e=b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.tiles=[],e}return v(t,e),p(t,[{key:"shift",value:function(){return new t(-1,1,0)}},{key:"directions",value:function(){return t.directions}},{key:"add",value:function(e){var r=this.z||e.z,n=this.x+e.x;return new t(n=((n%=r)+r)%r,this.y+e.y,r)}},{key:"scale",value:function(e){return new t(this.x,this.y*e,this.z)}},{key:"cubeLength",value:function(){return Math.floor(Math.abs(this.y))}},{key:"neighbors",value:function(){var e=[],r=!0,n=!1,i=void 0;try{for(var o,a=t.directions[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;e.push([s[0],this.add(s[1])])}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}return e}},{key:"value",get:function(){return[this.x,this.y]}},{key:"key",get:function(){return this.toString()}}]),t}(T);G.directions=[[r.N,new G(0,-1,0)],[r.S,new G(0,1,0)],[r.E,new G(1,0,0)],[r.W,new G(-1,0,0)]];var C=function(){function t(r){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.Shape.Even,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1),o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=this,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:G,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;d(this,t),this.scaleY=-1,this.angle=-0,this.tileTypes=_.Simple,this.irregular=!0,this.scale=r,this.radius=r/2,this.orientation=n,this.x=i,this.y=o,this.startY=u,this.tileCtor=s;for(var c=[],l=0;l<i;l++)for(var f=u;f<o;f++)c.push(new s(l,f,i));this.tiles=c,this.toTile=function(e){return new a.tileCtor(e.x,e.y)},this.toPoint=function(e){return new m(e.x,e.y)}}return p(t,[{key:"bounds",value:function(){var e=this.scale*this.y;return new x(-e,e,-e,e)}},{key:"vertices",value:function(e,t,r,n){var i=n,o=[],a=this.center(i);return o.push(this.center(new M(i.x-.5,i.y-.5,i.z))),o.push(this.center(new M(i.x+.5,i.y-.5,i.z))),o.push(this.center(new M(i.x+.5,i.y+.5,i.z))),o.push(this.center(new M(i.x-.5,i.y+.5,i.z))),o.map(function(e){return new w(e.x-a.x,e.y-a.y)})}},{key:"path",value:function(e){var t=this.vertices(!1,0,0,e),r=(this.center(e),this.scale*e.y),n=this.scale*(e.y+1);return"M "+t[0].x+" "+t[0].y+" A "+r+" "+r+" 0 0 0 "+t[1].x+" "+t[1].y+" L "+t[2].x+" "+t[2].y+" A "+n+" "+n+" 0 0 1 "+t[3].x+" "+t[3].y+" Z"}},{key:"position",value:function(e){return new this.tileCtor(Math.round(e.x/this.scale),Math.round(e.y/this.scale*this.scaleY))}},{key:"tile",value:function(e,t){return this.toTile(new m(e,t))}},{key:"center",value:function(e){var t=void 0;return this.orientation?(t=e.x+.5,t=(t=((t%=e.z)+e.z)%e.z)*h*(360/e.z)):t=e.x*h*(360/e.z),new w((e.y+.5)*this.scale*Math.sin(t),(e.y+.5)*this.scale*Math.cos(t))}}]),t}(),Q=function(e){function t(){return d(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),p(t,[{key:"shift",value:function(){return new t(-1,1)}},{key:"directions",value:function(){return t.directions}},{key:"add",value:function(e){var r=y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e);return new t(r.x,r.y)}},{key:"scale",value:function(e){var r=y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"scale",this).call(this,e);return new t(r.x,r.y)}},{key:"neighbors",value:function(){var e=[],r=!0,n=!1,i=void 0;try{for(var o,a=t.directions[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;e.push([s[0],this.add(s[1])])}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}return e}},{key:"key",get:function(){return this.toString()}}]),t}(m);Q.directions=[[r.N,new Q(0,-1)],[r.E,new Q(1,0)],[r.S,new Q(0,1)],[r.W,new Q(-1,0)]];var I=function(){function t(r){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.Shape.Even,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1),o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=this,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Q,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;d(this,t),this.scaleY=-1,this.angle=-45,this.tileTypes=_.Simple,this.scale=r,this.radius=r/2,this.orientation=n,this.x=i,this.y=o,this.startY=o,this.tileCtor=s;for(var c=[],l=0;l<i;l++)for(var f=u;f<o;f++)c.push(new s(l,f));this.tiles=c,this.toTile=function(e){return new a.tileCtor(e.x,e.y)},this.toPoint=function(e){return new m(e.x,e.y)}}return p(t,[{key:"bounds",value:function(){return O(this)}},{key:"center",value:function(e){return this.orientation?new w(e.x*this.scale/c+e.y*this.scale*this.scaleY/c,e.y*this.scale*this.scaleY/c-e.x*this.scale/c):new w(e.x*this.scale,e.y*this.scale*this.scaleY)}},{key:"vertices",value:function(e,t){var r=[];return t=void 0===t?this.scale:t,(e=void 0!==e&&this.orientation)?(t*=c,r.push(new w(-t/2,0)),r.push(new w(0,-t/2)),r.push(new w(t/2,0)),r.push(new w(0,t/2))):(r.push(new w(-t/2,-t/2)),r.push(new w(-t/2,t/2)),r.push(new w(t/2,t/2)),r.push(new w(t/2,-t/2))),r}},{key:"position",value:function(e){return new this.tileCtor(Math.round(e.x/this.scale),Math.round(e.y/this.scale*this.scaleY))}},{key:"tile",value:function(e,t){return this.toTile(new m(e,t))}}]),t}(),A=function(e){function t(){d(this,t);var e=b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.tiles=[],e}return v(t,e),p(t,[{key:"shift",value:function(){return new t(-1,1,0)}},{key:"directions",value:function(){return t.directions}},{key:"add",value:function(e){var r=this.z||e.z,n=this.x+e.x;return new t(n=((n%=r)+r)%r,this.y+e.y,r)}},{key:"scale",value:function(e){return new t(this.x,this.y*e,this.z)}},{key:"cubeLength",value:function(){return Math.floor(Math.abs(this.y))}},{key:"neighbors",value:function(){var e=[],r=!0,n=!1,i=void 0;try{for(var o,a=t.directions[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;e.push([s[0],this.add(s[1])])}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}return e}},{key:"value",get:function(){return[this.x,this.y]}},{key:"key",get:function(){return this.toString()}}]),t}(T);A.directions=[[n.N,new A(0,-1,0)],[n.E,new A(1,0,0)],[n.NW,new A(-1,-1,0)],[n.SW,new A(1,-1,0)],[n.S,new A(0,1,0)],[n.W,new A(-1,0,0)],[n.SE,new A(1,1,0)],[n.NE,new A(-1,1,0)]];var H=function(e){function t(){return d(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),p(t,[{key:"shift",value:function(){return new t(-1,1)}},{key:"directions",value:function(){return t.directions}},{key:"sides",value:function(){return t.sides}},{key:"add",value:function(e){var r=y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e);return new t(r.x,r.y)}},{key:"scale",value:function(e){var r=y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"scale",this).call(this,e);return new t(r.x,r.y)}},{key:"neighbors",value:function(){var e=[],r=!0,n=!1,i=void 0;try{for(var o,a=t.directions[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;e.push([s[0],this.add(s[1])])}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}return e}},{key:"sideNeighbors",value:function(){var e=[],t=!0,r=!1,n=void 0;try{for(var i,o=Q.directions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;e.push([a[0],this.add(a[1])])}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}return e}},{key:"key",get:function(){return this.toString()}}]),t}(m);function L(e){return new e.constructor}function N(e,t){return t.filter(function(t){return e.has(t[1].key)}).map(function(t){return[t[0],e.get(t[1].key)]})}function z(e){return new Map(e.map(function(e){return[e.key,e]}))}H.directions=[[n.N,new H(0,-1)],[n.E,new H(1,0)],[n.NW,new H(-1,-1)],[n.SW,new H(1,-1)],[n.S,new H(0,1)],[n.W,new H(-1,0)],[n.SE,new H(1,1)],[n.NE,new H(-1,1)]],H.sides=[H.directions[0],H.directions[1],H.directions[4],H.directions[5]];var F=function(){function e(t,r,n,i,o){d(this,e),this.cost={},this.previous={},this.max=0;var a=t.value?[t]:t;this.start=a[0];var s=i?z(i):void 0,u=o?z(o):void 0,c=!0,l=!1,f=void 0;try{for(var h,p=a[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var y=h.value;this.cost[y.key]=0,this.previous[y.key]=null}}catch(e){l=!0,f=e}finally{try{!c&&p.return&&p.return()}finally{if(l)throw f}}for(var v=[a],b=0;b<r&&v[b].length>0;b++){v[b+1]=[];var g=!0,m=!1,w=void 0;try{for(var x,k=v[b][Symbol.iterator]();!(g=(x=k.next()).done);g=!0){var O=x.value,_=O.neighbors(),T=!0,j=!1,S=void 0;try{for(var P,E=_[Symbol.iterator]();!(T=(P=E.next()).done);T=!0){var R=P.value,M=R[1];u&&!u.has(M.key)||void 0===this.cost[M.key]&&(s&&!s.has(M.key)||!i)&&M.cubeLength()<=n&&(this.cost[M.key]=b+1,this.max=Math.max(this.max,b+1),this.previous[M.key]=O,v[b+1].push(M))}}catch(e){j=!0,S=e}finally{try{!T&&E.return&&E.return()}finally{if(j)throw S}}}}catch(e){m=!0,w=e}finally{try{!g&&k.return&&k.return()}finally{if(m)throw w}}}}return p(e,[{key:"path",value:function(e){for(var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.value?[e]:e,i=(r?Math.max:Math.min).apply(null,n.map(function(e){return t.cost[e.key]}).filter(function(e){return void 0!==e})),o=[],a=n.find(function(e){return t.cost[e.key]===i})||null;a;)o.push(a),a=a.equals(this.start)?null:this.previous[a.key];return o}}]),e}();function W(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=[];r&&n.push(e.add(L(e)));for(var i=e.sideNeighbors?e.sideNeighbors():e.neighbors(),o=6===i.length?1:2,a=r?1:t;a<=t;a++)for(var s=e.shift().scale(a),u=0;u<i.length;u++)for(var c=0;c<a*o;c++)n.push(s.add(e)),s=(s.sideNeighbors?s.sideNeighbors():s.neighbors())[u][1];return n}e.BrickGrid=P,e.HexagonalGrid=S,e.TriangularGrid=R,e.RadialGrid=C,e.RectangularGrid=I,e.Position=m,e.HexagonalTile=j,e.Radial8Tile=A,e.RadialTile=G,e.Rectangular8Tile=H,e.RectangularTile=Q,e.TriangularTile=E,e.Float2=w,e.Float3=M,e.Integer2=m,e.Integer3=T,e.Search=F,e.normalize=function(e){var t=function(e){var t=e.tiles.map(function(t){return e.toPoint(t)});return new m(Math.min.apply(null,t.map(function(e){return e.x})),Math.min.apply(null,t.map(function(e){return e.y})))}(e);t.x=-t.x,t.y=-t.y,e.tiles=e.tiles.map(function(r){return e.toTile?e.toTile(e.toPoint(r).add(t)):[]})},e.translate=function(e,t){e.tiles=e.tiles.map(function(r){return e.toTile?e.toTile(e.toPoint(r).add(t)):[]})},e.rotate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.tiles.forEach(function(e){for(var r=t;r>0;)e.right(),r--;for(;r<0;)e.left(),r++})},e.enumerate=function(e){var t={},r=Object.keys(e),n=!0,i=!1,o=void 0;try{for(var a,s=r[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value,c=parseInt(u,10);c>=0&&(t[e[u]]=c)}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return t},e.instance=L,e.toMap=z,e.toArray=function(e){return Array.from(e.values())},e.link=function(e){var t=!0,r=!1,n=void 0;try{for(var i,o=e.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;a.links=new Map;var s=!0,u=!1,c=void 0;try{for(var l,f=(a.multiNeighbors?a.multiNeighbors():a.neighbors())[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;e.has(h[1].key)&&a.links.set(h[0],e.get(h[1].key))}}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}},e.axes=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[],i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=c.value,f=Math.abs(l[t%l.length])%2==1;f===r&&n.push(c)}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}return n},e.intersect=function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value,c=!0,l=!1,f=void 0;try{for(var h,d=t[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value;u.equals(p)&&r.push(u)}}catch(e){l=!0,f=e}finally{try{!c&&d.return&&d.return()}finally{if(l)throw f}}}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r},e.circle=function(e,t){return W(e,t,!1)},e.spiral=W,e.border=function(e){var t=z(e);return e.filter(function(e){return N(t,e.neighbors()).length<e.directions().length})},e.outline=function(e,t){var r=new Map,n=z(e),i=t?z(t):void 0;return e.forEach(function(e){var t=new Map(N(n,e.neighbors())),o=new Map(e.directions());if(t.size<o.size){var a=!0,s=!1,u=void 0;try{for(var c,l=o[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value,h=g(f,2),d=h[0],p=h[1];if(!t.has(d)){var y=e.add(p);i?r.set(y.key,i.get(y.key)):r.set(y.key,y)}}}catch(e){s=!0,u=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw u}}}}),Array.from(r.values())},e.connections=function(e){var t=[],r=z(e),n=function(e){var n=new Map(N(r,e.neighbors())),i=Array.from(n.keys()).filter(function(t){return t>0&&!n.has(e.opposite?e.opposite(t):-t)}),o=!0,a=!1,s=void 0;try{for(var u,c=i[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){for(var l=u.value,f=[],h=e;h;)f.push(h),h=new Map(N(r,h.neighbors())).get(l);t.push(f)}}catch(e){a=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}},i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;n(c)}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}return t},Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,r){"use strict";r.r(t);var n={};r.d(n,"TicTacToeGame",function(){return ie}),r.d(n,"TicTacToeRoundGame",function(){return oe}),r.d(n,"TicTacToeTriGame",function(){return ae}),r.d(n,"TacTickleGame",function(){return le}),r.d(n,"TacTickle4Game",function(){return fe}),r.d(n,"TacTickleHexGame",function(){return he}),r.d(n,"TacTickleHex2Game",function(){return de}),r.d(n,"TacTickleRoundGame",function(){return pe}),r.d(n,"TacTickleTriGame",function(){return ye}),r.d(n,"ConnectFourGame",function(){return be}),r.d(n,"QirkatGame",function(){return Se}),r.d(n,"Qirkat3Game",function(){return Ee}),r.d(n,"Qirkat7Game",function(){return Me}),r.d(n,"QirkatHexGame",function(){return Ce}),r.d(n,"QirkatHex7Game",function(){return Ie}),r.d(n,"QirkatHex2Game",function(){return He}),r.d(n,"CatchTheHareGame",function(){return Fe}),r.d(n,"CatchTheHare10Game",function(){return We}),r.d(n,"FourInARow11Game",function(){return Be}),r.d(n,"FourInARowRoundGame",function(){return Ye}),r.d(n,"GomokuGame",function(){return qe}),r.d(n,"Gomoku9Game",function(){return $e}),r.d(n,"Gomoku11Game",function(){return Je}),r.d(n,"GomokuHexGame",function(){return Xe}),r.d(n,"OthelloGame",function(){return Ke}),r.d(n,"Othello4Game",function(){return et}),r.d(n,"ReversiGame",function(){return tt}),r.d(n,"Reversi4Game",function(){return rt}),r.d(n,"Reversi6Game",function(){return nt}),r.d(n,"Reversi10Game",function(){return it}),r.d(n,"ReversiHexGame",function(){return ot}),r.d(n,"ReversiHex4Game",function(){return at}),r.d(n,"ReversiHex6Game",function(){return st}),r.d(n,"ReversiHex10Game",function(){return ut}),r.d(n,"AntiReversiGame",function(){return ct}),r.d(n,"AntiReversiHexGame",function(){return lt}),r.d(n,"HexGame",function(){return pt}),r.d(n,"Hex5Game",function(){return yt}),r.d(n,"Hex7Game",function(){return vt}),r.d(n,"Hex9Game",function(){return bt}),r.d(n,"Hex13Game",function(){return gt});var i={};r.d(i,"AlphaBetaPlayer",function(){return wt}),r.d(i,"RandomPlayer",function(){return kt}),r.d(i,"UctPlayer",function(){return jt}),r.d(i,"UctCachedPlayer",function(){return Et}),r.d(i,"MinimaxPlayer",function(){return Ve});var o=r(4),a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=t}return a(e,[{key:"possible",value:function(){return this.game.possible()}},{key:"undo",value:function(){this.game.undo()}},{key:"move",value:function(e){this.game.move(e)}},{key:"evaluate",value:function(){return this.game.evaluate()}},{key:"moves",get:function(){return this.game.moves}},{key:"player",get:function(){return this.game.player}},{key:"winner",get:function(){return this.game.winner}}]),e}();function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.isArray(e)?Array.isArray(e[t])?e[t][0]:e[t]:t?void 0:e}function c(e){var t=!0,r=!1,n=void 0;try{for(var i,o=e.grid.tiles[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.highlighted=!1}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}}function l(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=[],i=!0,o=!1,a=void 0;try{for(var s,c=t[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var l=s.value,f=r,h=u(l,f);h||(h=u(l,--f)),h.actions=h.actions||[],h.actions.push({move:l,cursor:f+1}),h.highlighted||(h.highlighted=!0,n.push(h))}}catch(e){o=!0,a=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}e.actions=r?e.actions:[],e.actions.push({highlighted:n})}function f(e,t){return!!t.actions&&function(e,t){if(1===t.length){var r=t[0],n=u(r.move,r.cursor);if(!n)return r.move;h(e),l(e,[r.move],r.cursor)}else{var i=t.map(function(e){return e.move}),o=t[0];h(e),l(e,i,o.cursor)}}(e,t.actions)}function h(e){for(var t=void 0;t=e.actions&&e.actions.pop();)if(t.highlighted){var r=!0,n=!1,i=void 0;try{for(var o,a=t.highlighted[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;s.highlighted=!1,s.actions=void 0}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}}}var d=r(0),p="pass";function y(e){if(e===p)return null;var t=e.replace(/([a-z])([0-9])/g,"$1,$2").split(",");return t[0]=parseInt(t[0],36)-10,t[1]=parseInt(t[1],10)-1,t}function v(e){return e===p?null:e.split("-").map(y)}function b(e){return""+String.fromCharCode(e.x+97)+(e.y+1)}function g(e){return e.map(b).join("-")}function m(e){return e?e.moves.map(function(t){return e.moveToString(t)}):[]}function w(e){return e%2+1}function x(e){return Object(d.rotate)(e,-1),e.toPoint=d.HexagonalGrid.cubeToTwoAxisYZ,e.toTile=d.HexagonalGrid.twoAxisToCubeYZ,Object(d.normalize)(e),e}function k(e){for(;e.moves.length;)e.undo()}function O(e,t){if(t)for(var r=t.replace(/[^0-9a-z-,]+/g,"").split(",");r.length>e.moves.length;)e.move(e.stringToMove(r[e.moves.length]))}function _(e,t){for(e.player===t&&e.moves.length&&e.undo();e.player!==t&&e.moves.length;)e.undo()}var T=["title","type","items","linkText","authors","aliases","rules","created","location","tiles","original","grid"],j=new Map([[d.RectangularGrid,"Rectangular"],[d.HexagonalGrid,"Hexagonal"],[d.RadialGrid,"Radial"],[d.TriangularGrid,"Triangular"]]);function S(e){return Object.assign({},e)}function P(e){return e.replace("Game","")}var E=["wiki","source"];function R(e,t){var r=!0,n=!1,i=void 0;try{for(var o,a=Object.keys(e)[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;Array.isArray(e[s])&&(e[s+"Array"]=e[s],e[s]=e[s].join(", "))}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}return e.originals=function(e,t){var r={},n=!0,i=!1,o=void 0;try{for(var a,s=Object.keys(t)[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;if(!e[u]){if(Array.isArray(t[u])){var c=u+"Array";t[c]=t[u],t[u]=t[u].join(", "),e[c]=t[c]}e[u]=t[u],r[u]=!0}}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t),E.forEach(function(t){var r;e[t]&&(e[t+"Text"]=(r=e[t],/[^.]*\.[^.]{2,3}(?:\.[^.]{2,3})?$/.exec(new URL(r).hostname)[0]))}),e}function M(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[],n=!0,i=!1,o=void 0;try{for(var a,s=Object.keys(e)[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value,c=e[u];if(t||!c.wip){var l=G(c,e,u);Object.freeze(l),r.push(l)}}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}function G(e,t,r){var n=e.original,i=e.original?t[e.original]:{},o=R(S(e),S(i));o.id=P(r),o.originalId=n?P(n):void 0;var a=void 0;return Object.defineProperty(o,"instance",{get:function(){return a||(l(a=new t[r],a.possible()),Object.freeze(a))}}),Object.defineProperty(o,"tiles",{get:function(){return o.instance.grid.tiles.length}}),Object.defineProperty(o,"grid",{get:function(){return j.get(o.instance.grid.constructor)}}),o.original=i.title||e.title,o.originals.original=!i.title,o.link=o.wiki||o.source,o.linkText=o.wikiText||o.sourceText,o.wip=e.wip,o}var C=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var Q,I,A,H,L=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.limit=1e4,this.countdown=5,this.countdownSignal=3,this.signalDelay=100,this.counter=-1,this.counterSignal=-1,this.expired=!1,this.pending=!1,this.timer=null,this.timeoutWinner=null,this.game=t,this.constructor=t.constructor,Object.assign(this,r),this.bind("winning"),this.bind("links"),this.bind("rulers")}return C(e,[{key:"dispose",value:function(){this.stop()}},{key:"possible",value:function(){return this.game.possible()}},{key:"undo",value:function(){this.game.undo()}},{key:"move",value:function(e){this.game.move(e),!this.game.winner&&this.game.moves[this.game.moves.length-1]?this.start():(this.stop(),this.counter=-1,this.counterSignal=-1,this.expired=!1)}},{key:"evaluate",value:function(){return this.game.evaluate()}},{key:"moveToString",value:function(e){return this.game.moveToString?this.game.moveToString(e):""}},{key:"stringToMove",value:function(e){return this.game.stringToMove(e)}},{key:"start",value:function(){var e=this;if(this.stop(!!this.limit),this.counter=-1,this.counterSignal=-1,this.expired=!1,this.timeoutWinner=null,this.limit){var t=this.countdown;this.timer=setInterval(function(){e.stop(!0),e.counter=t,e.timer=setInterval(function(){--t<=e.countdownSignal&&(e.counterSignal=t),setTimeout(function(){e.counter=t,t||(e.stop(),e.expired=!0,e.timeoutWinner=w(e.game.player))},e.signalDelay)},1e3)},this.limit-1e3*t-this.signalDelay)}}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.pending=e,this.timer&&(clearInterval(this.timer),this.timer=null)}},{key:"bind",value:function(e){this.game[e]&&(this[e]=this.game[e].bind(this.game))}},{key:"grid",get:function(){return this.game.grid}},{key:"scale",get:function(){return this.game.scale}},{key:"moves",get:function(){return this.game.moves}},{key:"player",get:function(){return this.game.player}},{key:"winner",get:function(){return this.timeoutWinner||this.game.winner}},{key:"score",get:function(){return this.game.score}},{key:"landscape",get:function(){return this.game.landscape}},{key:"hull",get:function(){return this.game.hull}}]),e}(),N=r(3),z=r(2);function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e[e.Checkers=0]="Checkers",e[e.CheckersHex=1]="CheckersHex",e[e.Gomoku=2]="Gomoku",e[e.Hex=3]="Hex",e[e.Mills=4]="Mills",e[e.Plastic=5]="Plastic",e[e.Qirkat=6]="Qirkat",e[e.Reversi=7]="Reversi",e[e.TacTickle=8]="TacTickle"}(A||(A={})),function(e){e[e.BlackWhite=0]="BlackWhite",e[e.OrangeBlue=1]="OrangeBlue",e[e.RedYellow=2]="RedYellow"}(H||(H={}));var W=(F(Q={},A.Checkers,H.BlackWhite),F(Q,A.CheckersHex,H.BlackWhite),F(Q,A.Gomoku,H.BlackWhite),F(Q,A.Hex,H.OrangeBlue),F(Q,A.Mills,H.BlackWhite),F(Q,A.Plastic,H.RedYellow),F(Q,A.Qirkat,H.BlackWhite),F(Q,A.Reversi,H.BlackWhite),F(Q,A.TacTickle,H.OrangeBlue),Q),D=(F(I={},H.BlackWhite,["Black","White"]),F(I,H.OrangeBlue,["Orange","Blue"]),F(I,H.RedYellow,["Red","Yellow"]),I),V=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function B(e,t,r){var n={},i=!0,o=!1,a=void 0;try{for(var s,u=e.links[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=V(c,2),f=l[0],h=l[1],d=-f;if(!n[d]){n[d]=!0;for(var p=h,y=1;p&&p.data===t;)y++,p=(p=p.links.get(f))!==e&&p;for(p=e.links.get(d);p&&p.data===t;)y++,p=(p=p.links.get(d))!==e&&p;if(y>=r)return!0}}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}}function Y(e,t,r){var n=0,i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=[],f=!0,h=!1,d=void 0;try{for(var p,y=c.links[Symbol.iterator]();!(f=(p=y.next()).done);f=!0){var v=p.value;if(v[0]>0){var b=v[1],g=c.links.get(c.opposite?c.opposite(v[0]):-v[0]);g&&g.data===r||b.data!==r||l.push(v[0])}}}catch(e){h=!0,d=e}finally{try{!f&&y.return&&y.return()}finally{if(h)throw d}}if(l.length){var m=!0,w=!1,x=void 0;try{for(var k,O=l[Symbol.iterator]();!(m=(k=O.next()).done);m=!0){n+=q(c,k.value,t,r)}}catch(e){w=!0,x=e}finally{try{!m&&O.return&&O.return()}finally{if(w)throw x}}}else{var _=0,T=!0,j=!1,S=void 0;try{for(var P,E=c.links.values()[Symbol.iterator]();!(T=(P=E.next()).done);T=!0){P.value.data||_++}}catch(e){j=!0,S=e}finally{try{!T&&E.return&&E.return()}finally{if(j)throw S}}n+=_/8}}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}return n}function q(e,t,r,n){for(var i=[],o=e;o&&(i.push(o),(o=o.links.get(t))&&o.data===n););var a=0;return(o=i[0].links.get(-t))&&!o.data&&a++,(o=i[i.length-1].links.get(t))&&!o.data&&a++,!a&&i.length<r?0:Math.pow(r,i.length+1+(i.length>=r?1:0))-Math.pow(r,i.length)*(2-a)}function $(e,t,r){var n={},i=!0,o=!1,a=void 0;try{for(var s,u=e.links[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(!n[-c[0]]){var l=[e];if(n[-c[0]]=!0,J(c,t,l,e)>=r)return l}}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}}function J(e,t,r,n){for(var i=e[1],o=1;i&&i.data===t;)r.push(i),o++,i=(i=i.links.get(e[0]))!==n&&i;for(i=n.links.get(-e[0]);i&&i.data===t;)r.unshift(i),o++,i=(i=i.links.get(-e[0]))!==n&&i;return o}function X(e){return e?b(this.grid.toPoint(e)):"pass"}function U(e){var t=y(e);if(!t)return t;var r=this.grid.tile.apply(this.grid,t);return this.tileMap.get(r.key)}function Z(e){return e?g((Array.isArray(e)?e:[e]).reduce(function(e,t){var r=Array.isArray(t)?t.slice():[t];return r.reverse(),r.forEach(function(t){return e.push(t)}),e},[]).map(this.grid.toPoint)):"pass"}function K(e){var t=v(e);if(!t)return t;var r=[ee.call(this,t.shift())];if(1===t.length)r.push(ee.call(this,t.shift()));else for(;t.length;){var n=ee.call(this,t.shift()),i=ee.call(this,t.shift());r.push([i,n])}return r}function ee(e){return this.tileMap.get(this.grid.tile.apply(this.grid,e).key)}function te(){var e=this.moves.pop();e.data=null,this.freeTileMap.set(e.key,e),this.player=w(this.player),this.finished=!1,this.winner=0,this.playerTiles[this.player].pop()}var re=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var ne=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.moves=[],this.player=1,this.winner=0,this.finished=!1,this.playerTiles={},this.moveToString=X.bind(this),this.stringToMove=U.bind(this),this.undo=te.bind(this),this.grid=t,this.min=r,this.tileMap=Object(d.toMap)(this.grid.tiles),this.freeTileMap=Object(d.toMap)(this.grid.tiles),Object(d.link)(this.tileMap)}return re(e,[{key:"init",value:function(e){var t=function(e){var t=[],r=e.replace(/[^0-9a-z]+/,"").replace(/([0-9])([a-z])/g,"$1,$2").split(","),n=!0,i=!1,o=void 0;try{for(var a,s=r[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;t.push(y(u))}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return t}(e),r=!0,n=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;this.move(this.tileMap.get(this.grid.tile(s[0],s[1]).key))}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}}},{key:"possible",value:function(){return this.finished?[]:Object(d.toArray)(this.freeTileMap)}},{key:"move",value:function(e){e.data=this.player,(this.playerTiles[this.player]||(this.playerTiles[this.player]=[])).push(e),this.player=this.player%2+1,this.moves.push(e),this.freeTileMap.delete(e.key),this.winner=this.getWinner(),(this.moves.length===this.grid.tiles.length||this.winner)&&(this.finished=!0)}},{key:"evaluate",value:function(){return Y(this.playerTiles[this.player]||[],this.min,this.player)-Y(this.playerTiles[w(this.player)]||[],this.min,w(this.player))*this.min}},{key:"getWinner",value:function(){return B(this.moves[this.moves.length-1],w(this.player),this.min)?w(this.player):this.moves.length===this.grid.tiles.length?-1:0}},{key:"winning",value:function(){var e=this.moves[this.moves.length-1];return $(e,e.data,this.min)}}]),e}();ne.theme=A.Gomoku;var ie=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.RectangularGrid(1,!1,d.Shape.Even,3,3,d.Rectangular8Tile),3))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ne),t}();ie.title="Tic Tac Toe",ie.theme=A.Hex,ie.group="Connect",ie.aliases=["Noughts and Crosses","Xs and Os","Exy-ozys"],ie.created=-1300,ie.location="Egypt",ie.wiki="https://en.wikipedia.org/wiki/Tic-tac-toe",ie.rules=["Connect three pieces"],ie.sample="b2, b3, a3, c1, c3, a2, a1";var oe=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=new d.RadialGrid(1,!0,d.Shape.Even,3,4,d.Radial8Tile,1);return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,3))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ne),t}();oe.title="Tic Tac Toe Round",oe.theme=A.Hex,oe.group="Connect",oe.original="TicTacToeGame",oe.sample="c3, a4, b3, a3, a2, b4, c4";var ae=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.TriangularGrid(1,!1,d.Shape.Triangular,3,3),3));return e.landscape=!0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ne),t}();ae.title="Tic Tac Toe Tri",ae.theme=A.Hex,ae.group="Connect",ae.original="TicTacToeGame",ae.sample="a2, b2, b1, a1, c1";var se=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ue=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var ce=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments[2],i=arguments[3];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.moves=[],this.player=1,this.winner=0,this.playerTiles={1:[],2:[]},this.moveToString=function(e){return e?g((Array.isArray(e)?e:[e]).map(this.grid.toPoint)):"pass"}.bind(this),this.stringToMove=function(e){var t=this,r=v(e);return r?r.map(function(e){var r=t.grid.tile.apply(t.grid,e);return t.tileMap.get(r.key)}):r}.bind(this),this.finished=!1,this.grid=t,this.tileMap=Object(d.toMap)(t.tiles),Object(d.link)(this.tileMap),this.min=r,this.init(i),this.directions=n.map(function(e){return se(e,1)[0]})}return ue(e,[{key:"possible",value:function(){var e=this;return this.finished?[]:this.grid.tiles.reduce(function(t,r){if(r.data!==e.player)return t;var n=!0,i=!1,o=void 0;try{for(var a,s=r.links[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value,c=se(u,2),l=c[0],f=c[1];!f.data&&e.directions.indexOf(l)>-1&&t.push([r,f])}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return t},[])}},{key:"move",value:function(e){e[1].data=e[0].data,e[0].data=null,this.player=w(this.player),this.moves.push(e),B(e[1],e[1].data,this.min)?(this.finished=!0,this.winner=e[1].data):this.moves.length===2*this.grid.tiles.length&&(this.finished=!0,this.winner=-1)}},{key:"undo",value:function(){var e=this.moves.pop();e[0].data=e[1].data,e[1].data=null,this.player=w(this.player%2),this.finished=!1,this.winner=0}},{key:"evaluate",value:function(){throw new Error("Method not implemented.")}},{key:"winning",value:function(){var e=this.moves[this.moves.length-1];return $(e[1],e[1].data,this.min)}},{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[0,0,1],[0,this.grid.y-1,0]],t=!0,r=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)for(var a=i.value,s=se(a,3),u=s[0],c=s[1],l=s[2],f=u;f<u+4;f++){var h=this.tileMap.get(this.grid.tile(f,c).key),d=(f+l)%2+1;h&&(h.data=d)}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}}}]),e}();ce.theme=A.TacTickle,ce.move=!0;var le=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.RectangularGrid(1,void 0,d.Shape.Even,4,5,d.Rectangular8Tile),3,d.RectangularTile.directions))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ce),t}();le.title="Tac-tickle",le.group="Move to Connect",le.authors=["NRICH"],le.source="https://nrich.maths.org/1240",le.created="2000",le.rules=["Move to connect three pieces"],le.sample="c5-c4, b5-b4, d1-d2, a1-a2, a5-b5, b4-a4, d2-d3";var fe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.RectangularGrid(1,void 0,d.Shape.Even,4,4,d.Rectangular8Tile),3,d.RectangularTile.directions))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ce),t}();fe.title="Tac-tickle 4x4",fe.group="Move to Connect",fe.aliases="Tic-tackle",fe.original="TacTickleGame",fe.sample="c4-c3, a1-a2, d1-d2, d4-c4, c3-b3, c1-c2, d2-d1, c4-c3, b3-a3, c2-d2";var he=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.HexagonalGrid(1,!0,d.Shape.Even,4,5),3,d.HexagonalTile.directions))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ce),t}();he.title="Tac-tickle Hex",he.group="Move to Connect",he.original="TacTickleGame",he.sample="b1-c2, d5-d4, c5-c4, c1-d2, a5-b4, b5-a5, c4-b3";var de=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=new d.HexagonalGrid(1,!0,d.Shape.Hexagonal,4);return Object(d.normalize)(e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,3,d.HexagonalTile.directions,[[3,0,0],[0,6,0]]))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ce),t}();de.title="Tac-tickle Hex2",de.group="Move to Connect",de.original="TacTickleGame",de.sample="g1-f2, f1-e2, f2-f3, d7-d6, f3-e4, b7-b6, e4-d5, d6-c6, d5-c5, d1-d2, a7-b7, e2-d3, e1-f1, d3-c4, f1-e2, d2-d3, c5-b5, b6-c5";var pe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.RadialGrid(1,!1,d.Shape.Even,4,5,d.Radial8Tile,1),3,d.RadialTile.directions,[[0,1,1],[0,4,0]]))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ce),t}();pe.title="Tac-tickle Round",pe.group="Move to Connect",pe.original="TacTickleGame",pe.sample="c5-c4, c2-c3, b2-b3, b5-b4, b3-a3, d5-d4, c4-c5, a2-b2";var ye=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.TriangularGrid(1,!0,d.Shape.Rhombus,4,4),3,d.TriangularTile.directions1,[[2,0,1],[2,3,1]]))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ce),t}();ye.title="Tac-tickle Tri",ye.group="Move to Connect",ye.original="TacTickleGame",ye.sample="f1-e2, c4-d3, f4-g4, e4-f3, g4-h3, d3-e3, d4-c4, e1-f1, c4-d3, f3-g3, d3-c3, f1-g1, d1-c2, g3-h2, c2-d2";var ve=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var be=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.RectangularGrid(1,!1,d.Shape.Even,7,6,d.Rectangular8Tile),4));return e.landscape=!0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ne),ve(t,[{key:"possible",value:function(){if(this.finished)return[];for(var e=[],t=0;t<this.grid.x;t++)for(var r=0;r<this.grid.y;r++){var n=this.tileMap.get([t,r].toString());if(!n.data){e.push(n);break}}return e}}]),t}();be.title="Connect Four",be.theme=A.Plastic,be.group="Connect",be.authors=["Howard Wexler","Ned Strongin"],be.created=1974,be.wiki="https://en.wikipedia.org/wiki/Connect_Four",be.alias=["Captain's Mistress","Four Up","Plot Four","Find Four","Four in a Row","Four in a Line","Gravitrips"],be.rules=["Connect four pieces"],be.sample="c1, d1, c2, e1, b1, f1, g1, d2, d3, c3, e2, e3, e4";var ge=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function me(e){return e.x%2&&!(e.y%2)}var we=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),xe=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var ke=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.moves=[],this.player=1,this.scale=1,this.winner=0,this.grid=t,this.tileMap=Object(d.toMap)(this.grid.tiles),Object(d.link)(this.tileMap);var r,n,i=!0,o=!1,a=void 0;try{for(var s,u=this.grid.tiles[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=!0,f=!1,h=void 0;try{for(var p,y=c.links[Symbol.iterator]();!(l=(p=y.next()).done);l=!0){var v=p.value,b=we(v,2),g=b[0],m=b[1];(function(e,t){return e.x!==t.x&&e.y!==t.y})(r=m,n=c)&&(me(r)||me(n))&&(c.links.delete(g),m.links.delete(-g))}}catch(e){f=!0,h=e}finally{try{!l&&y.return&&y.return()}finally{if(f)throw h}}}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}}return xe(e,[{key:"rulers",value:function(){var e=new Map,t=!0,r=!1,n=void 0;try{for(var i,o=this.grid.tiles[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,s=!0,u=!1,c=void 0;try{for(var l,f=a.links[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=[a.key,h[1].key];d.sort(),e.set(d.toString(),[a,h[1]])}}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}return Array.from(e.values())}}]),e}();ke.theme=A.Qirkat,ke.move=!0;var Oe=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var Te=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.moveToString=Z.bind(n),n.stringToMove=K.bind(n),n.finished=!1,n.maxMoves=r,function(e){var t=0,r=(e.length-1)/2,n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;t<r?u.data=1:t>r&&(u.data=2),t++}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}}(e.tiles);var i=(e.tiles.length-1)/2;return n.score={1:i,2:i},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ke),_e(t,[{key:"move",value:function(e){var t=e[0],r=e[e.length-1];r=Array.isArray(r)?r[0]:r;for(var n=1;n<e.length;n++)Array.isArray(e[n])&&(this.score[e[n][1].data]--,e[n][1].data=null);r.data=t.data,t.data=null,this.player=w(this.player),this.moves.push(e),this.winner=this.getWinner(),this.winner&&(this.finished=!0)}},{key:"undo",value:function(){for(var e=this.moves.pop(),t=e[0],r=e[e.length-1],n=w((r=Array.isArray(r)?r[0]:r).data),i=e.length-1;i>0;i--){var o=e[i];Array.isArray(o)&&(o[1].data=n)}t.data=r.data,r.data=null,this.player=w(this.player)}},{key:"getWinner",value:function(){return this.score[1]?this.score[2]?this.moves.length===this.maxMoves?-1:0:1:2}},{key:"possible",value:function(){var e=this.jumpsPossible();return e=this.topJumps(e),(e=this.leavesToMoves(e)).length||(e=this.simplePossible()),e}},{key:"leavesToMoves",value:function(e){return e.map(this.leaveToMove)}},{key:"leaveToMove",value:function(e){for(var t=[],r=e;r;)r.parent?t.unshift([r.tile,r.removed]):t.unshift(r.tile),r=r.parent;return t}},{key:"topJumps",value:function(e){if(!e.length)return e;e.sort(function(e,t){return t.depth-e.depth});var t=e[0].depth;return e.filter(function(e){return e.depth===t})}},{key:"jumpsPossible",value:function(){var e=this,t=w(this.player);return this.grid.tiles.reduce(function(r,n){if(n.data!==e.player)return r;var i=e.multiJumps({tile:n},t);return r.concat(i)},[])}},{key:"multiJumps",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=e.tile;e.jumps=[];var a=!0,s=!1,u=void 0;try{for(var c,l=o.links[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value,h=Oe(f,2),d=h[0],p=h[1];if(p.data===t&&-1===i.indexOf(p)){var y=p.links.get(d);if(y&&!y.data){var v={tile:y,removed:p,depth:n,parent:e};e.jumps.push(v),this.multiJumps(v,t,r,n+1,i.concat([p]))}}}}catch(e){s=!0,u=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw u}}return!e.jumps.length&&n&&r.push(e),r}},{key:"jumpPossible",value:function(e,t,r){var n=[],i=!0,o=!1,a=void 0;try{for(var s,u=e.links[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=Oe(c,2),f=l[0],h=l[1];if(h.data===r){var d=h.links.get(f);d&&!d.data&&n.push([e,[d,h]])}}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}return n}},{key:"simplePossible",value:function(){var e=this;return this.grid.tiles.reduce(function(t,r){if(r.data!==e.player)return t;var n=!0,i=!1,o=void 0;try{for(var a,s=r.links[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value,c=Oe(u,2),l=(c[0],c[1]);l.data||t.push([r,l])}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return t},[])}}]),t}();var je=5,Se=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.RectangularGrid(1,!1,d.Shape.Even,je,je,d.Rectangular8Tile),je*je*3))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Te),t}();Se.title="Qirkat",Se.group="Qirkat",Se.created=950,Se.aliases=["Alquerque"],Se.location="Middle East",Se.wiki="https://en.wikipedia.org/wiki/Alquerque",Se.rules=["Capture all pieces"],Se.sample="c2-c3, c4-c3-c2, c1-c2-c3, d2-c1, c3-c4, c5-c4-c3, b4-c3-d2, e1-d2-c3, b2-c2, e2-e1, c2-c3-c4, d4-c4-b4-b3-b2, a2-b2-c2, c1-c2-c3, b5-b4, d3-d4, b4-c3-d2, d1-d2-d3, a5-b5, d5-c5, b5-c5-d5, e5-d5-c5, a3-b2, d4-e5, b2-a2, e3-e2, a1-b2, c5-d4, b2-c2, e4-e3, a4-a5, e1-d2, a2-b2, e5-e4, b2-a3, d2-c2-b2, a3-b2-c1, d3-d2, a5-a4, d4-e5, c1-b2, e2-e1, b2-c1, e3-e2, c1-d2-e3, e1-d1, e3-e2-e1-d1-c1, e4-e3, c1-b2, e3-e2, b1-a1, e2-e3, b2-a3, e5-e4, a3-b2, e3-e2, b2-c3, e4-e5, a1-a2, e2-d2, c3-d2-e1, e5-d5, a4-a5, d5-e5, a2-a3, e5-e4, a5-b5, e4-e5, b5-c5, e5-e4, c5-d4, e4-d4-c4, a3-b3, c4-b4, b3-b4-b5";var Pe=3,Ee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.RectangularGrid(1,!1,d.Shape.Even,Pe,Pe,d.Rectangular8Tile),Pe*Pe*3))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Te),t}();Ee.title="Qirkat 3x3",Ee.group="Qirkat",Ee.original="QirkatGame",Ee.sample="b1-b2, b3-b2-b1, a2-b2, b1-b2-b3, a3-a2, c1-b2, a2-a3, b2-b1, a1-b1-c1, b3-b2, c1-b1, b2-c1, b1-a1, c1-b1, a1-b1-c1, c2-b2, c1-b1, b2-a2, a3-a2-a1, c3-b3, b1-c1, b3-c3, a1-a2, c3-b3, a2-b2, b3-b2-b1, c1-b1-a1";var Re=7,Me=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.RectangularGrid(1,!1,d.Shape.Even,Re,Re,d.Rectangular8Tile),Re*Re*3))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Te),t}();Me.title="Qirkat 7x7",Me.group="Qirkat",Me.original="QirkatGame",Me.sample="c4-d4, e4-d4-c4, b4-c4-d4, d6-c5-b4, d4-d5-d6, e7-d6-c5, b6-c5-d4, b4-b5-b6-c6-d6, c7-d7-e7-d6-c5, f6-e7, d4-e5-f6-e6-d6, f5-e5, a3-b4, e5-d6-c7, b7-c7-d7, e7-d7-c7, b4-a3, g5-f6, c5-b6, f6-g5, b6-c5, f7-f6, c5-b6, f6-e5, c3-d4, e1-d2-c3, c2-c3-c4, e5-d4-c3-c4-c5, b6-c5-d4, e3-d3-c3-d4-e5, d1-e1, f1-e1-d1, c1-d1-e1-e2-e3, f4-e3-d2, a5-b5, c7-d7, b5-b6, g5-f4, b2-c2, d2-c2-b2-b3-b4, a4-b4-c4, g6-g5, b1-b2, e5-f5, b6-c6, g7-f6, c6-c7, d7-c7-b7, a7-b7-c7, f6-e5, b2-c2, f2-e2, a1-b1, f5-f6, a3-b4, e5-e4, b4-a5, g1-f1, a5-b6, g3-f2, c4-c3, g4-g3, a6-a5, f2-e3, b1-a1, e4-d4, c3-d4-e5-f6-g7, g5-f6, g7-f6-e5, f4-e5-d6, c7-d6-e5, g3-f2, a1-b1, g2-g3, e5-f6, e3-d3, f6-f5, f2-e3, a2-a1, d3-d2, b6-a6, d2-c2-b2, b1-b2-b3, e3-e4, a6-a7, e2-e1, a5-a6, e4-e3, f5-e5, g3-g4, a6-a5, g4-g3, e5-d6, e3-e4, b3-b4, e1-d2, d6-d7, d2-c1, b4-c5, f3-f2, c5-c4, f1-g1, d7-c7, e4-e3, a5-b6, f2-f3, c7-b7, g3-g4, b6-c6, e3-e4, c4-b4, c1-c2, b4-c5, g1-f1, c5-c4, g4-f4, a1-b1, c2-c3, c4-c3-c2, e4-d4, c6-d6, d4-e5, d6-c5, e5-d4, c5-d4-e3-f3-g3-f4-e5, f1-g1, e5-d6, g1-f2, b1-b2, f2-e2, c2-d2, e2-d2-c2-b2-a2, d6-c5, a2-a1, a7-a6, a1-b1, c5-c4, b1-a1, a6-a5, a1-b2, a5-a4, b2-c3, c4-c3-c2";var Ge=5,Ce=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=new d.HexagonalGrid(1,!0,d.Shape.Rhombus,Ge,Ge);Object(d.normalize)(e);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,Ge*Ge*3));return r.hull=!0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Te),t}();Ce.title="Qirkat Hex",Ce.group="Qirkat",Ce.original="QirkatGame",Ce.sample="c2-c3, c4-c3-c2, c1-c2-c3, d1-c2, c3-c2-c1, d3-c3, b3-c3-d3-d2-d1, e3-d3, a3-b3, e2-e3, b3-a3, e1-e2, d1-c2, d3-d2, a4-b3, d4-d3, a5-a4, c5-b5-a5-b4-c3, c2-c3-c4, d3-c4-b5, b3-b4, b5-b4-b3, a3-b3-c3-d2-e1, d5-c5, e1-d1, e2-d3, d1-d2, d3-d2-d1, c1-d1-e1, e3-d3, e1-d1, c5-d5, b2-b3, d3-d2, d1-d2-d3, e4-e3, b3-c2, e3-d3-c3-c2-c1, b1-c1-d1, d5-d4, d1-c2, d4-d3, c2-c3, d3-c3-b3, a4-b3-c2, e5-d5, c2-c1, d5-e4, c1-b1, e4-e3, a2-a3, e3-d4, b1-b2, d4-e3, a3-a2, e3-d4, a2-a3, d4-e3, a3-a4, e3-d4, a4-a3, d4-e3, a3-a4, e3-e2, a1-a2, e2-e1, a2-a3, e1-d1, b2-c1, d1-c1-b1, a3-a2, b1-a1, a2-a3, a1-a2, a3-a2-a1";var Qe=7,Ie=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=new d.HexagonalGrid(1,!0,d.Shape.Rhombus,Qe,Qe);Object(d.normalize)(e);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,Qe*Qe*3));return r.hull=!0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Te),t}();Ie.title="Qirkat Hex 7x7",Ie.group="Qirkat",Ie.original="QirkatGame",Ie.sample="d3-d4, d5-d4-d3, d2-d3-d4, d6-d5, d4-d5-d6, d7-d6-d5, c3-d2, e1-d2-c3, b3-c3-d3, e3-d3-c3, b4-c3-d2, e2-e3, b5-b4, d5-c5-b5-c4-d3, d2-d3-d4, e3-d4-c5, b6-c5-d4, f1-e2, d4-d5, e5-d5-c5, c6-c5-c4, f2-f1, c4-c5, f3-f2, a7-b6, e4-e5, c5-b5, e5-d5, b4-c3, e6-d7, b7-c6, d5-c6-b7, c7-b7-a7, f2-e3, b5-c5, f5-e6, b2-b3, e3-d3, c3-d3-e3-e2-e1, g3-f3, b1-b2, d7-c7, b3-b4, f3-e4, c1-b1, g1-f2, e1-f1-g1-f2-e3-e4-e5-f4-g3-g2-g1, e6-f5, d1-e1, c7-b7, a7-b7-c7, f5-e5, e1-d2, e7-e6, c5-c4, e5-d5, c7-c6, d5-c6-b7-b6-b5-b4-b3-c2-d1-d2-d3-c4-b5, a6-b5-c4, e6-e5, c4-d3, f6-f5, a3-b3, e5-e6, d3-e2, e6-d7, a2-a3, f5-e5, b3-b4, e5-f4, b4-b3, f4-e5, a3-a2, d7-e6, b3-a3, e5-f4, g1-f2, g4-g3, e2-f1, f7-f6, f1-g1, f6-f7, a4-b3, g3-f3, b3-c3, f3-f2-f1, g1-f1-e1, e6-e5, c3-c4, g5-f5, c4-c3, f5-e6, e1-e2, f7-f6, c3-c2, f6-f7, e2-e3, f4-f5, c2-c1, f5-g4, a3-a4, e5-f5, a4-b3, e6-d7, e3-d4, f5-f6, d4-c5, f6-f5, a5-b5, f5-f4, b5-b6, f7-f6, a2-a3, g7-f7, b6-b7, f6-g5, c1-d1, g6-g7, c5-c6, g5-g6, b3-c3, f7-f6, b2-c1, f4-f3, c1-b2, g6-g5, d1-e1, f6-f7, c6-d5, d7-c7, b7-c7-d7, f7-f6, b1-a2, f3-f4, d5-e4, g7-f7, b2-b1, f7-e7, d7-e7-f7-f6-f5-f4-f3, g4-f5, c3-d3, f5-f4, f3-f4-f5, g5-f5-e5-e4-e3-d3-c3, a3-b3, c3-b3-a3, a2-a3-a4";var Ae=5,He=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=new d.HexagonalGrid(1,!0,d.Shape.Hexagonal,Ae,Ae);Object(d.normalize)(e);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,Ae*Ae*3));return r.hull=!0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Te),t}();He.title="Qirkat Hex2",He.group="Qirkat",He.original="QirkatGame",He.sample="e6-e5, e4-e5-e6, e7-e6-e5, f6-e7, e8-e7-e6, f7-e7, d8-e7-f6, g5-f6-e7, e6-e7-e8, f5-f6, e8-f7, g7-f7-e7, d7-e7-f7-f6-f5, g4-f5-e6-e5-e4, e9-f8-g7-g6-g5, h5-g5-f5, d5-e5, f5-e5-d5-d6-d7, c7-d7-e7, f4-f5, e7-e6, f5-e6-d7, c8-d7-e6, h6-h5, d4-d5, g3-g4, d9-d8, e3-d4, c5-d4-e3-f3-g3-g4-g5, h5-g5-f5-e6-d7-d8-d9, c9-d9-e9, e4-e3, d3-e3-f3, f2-f3-f4, c4-d3, e2-d3-c4, c3-c4-c5, e1-d2-c3, b4-c3-d2, i4-h5, a5-b4, h3-g4, d2-e1, g4-h3, d5-d6, f4-f5, b9-c9, h4-g5, c6-d5, f5-e5, d6-e5-f4, g2-f3, f4-f3-f2, f1-f2-f3, d5-d4, h3-g3, e1-e2, h5-g6, d4-d5, i3-h4, e9-e8, g6-f7, e8-f7-g6-g5-g4-g3-g2-f3-e4, h2-g3, d5-c6, g1-g2, e4-d5, g3-f3, b4-a5, f3-e3, e2-e3-e4, i2-h3, b5-b4, h3-i2, c5-b5, i1-h2, e4-f3, g2-f3-e4, d5-e4-f3, h4-i3, b4-c3, i2-h3, b5-c5, h1-g1, c6-d5, i5-h6, f3-e3, h2-i1, c9-d9, i1-h1, d5-d6, i3-h4, e3-f3, h6-i5, b8-c7, h4-h5, c7-c6, h1-i1, c5-b5, h5-h4, a9-b9, h3-i2, f3-g2, g1-g2-g3, a8-a9, i2-i3, c3-b4, g3-g2, c6-c5, i5-i4, b5-c4, g2-g3, d6-d5, i3-h3, c4-d3, i1-i2, c5-b5, h4-g5, d3-d4, g5-g6, b9-b8, h3-i3, d5-e4, g3-f3, e4-f3-g2, g6-h5, d9-d8, h5-g5, d4-e3, i3-h4, a7-a8, i2-i1, b7-c6, h4-h5, b8-c7, g5-g6, c7-b7, g6-g7, d8-e7, h5-g6, a9-b8, g7-f7, e7-f7-g7-g6-g5, i1-h1, g5-f5, h1-g2-f3-e3-d3, b7-a7, d3-e3, b8-b9, i4-i3, b9-b8, i3-i2, a8-b7, e3-f3, b6-c5, f3-e4, f5-f4, e4-e5, f4-e5-d6, i2-i1, b7-c7, i1-h2, b8-a9, h2-h1, a7-a8, h1-g1, d6-e5, g1-f2, c7-d6, f2-f1, d6-d7, f1-e1, d7-e6, e1-e2, a8-a7, e2-f1, c5-d4, f1-e1, c6-d5, e1-d2, b4-c3, d2-c3-b4-b5-b6, a7-b6-c5";var Le=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ne=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var ze=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.moveToString=Z.bind(n),n.stringToMove=K.bind(n),n.jumpsPossible=function(){var e=this,t=w(this.player);return this.grid.tiles.reduce(function(r,n){if(n.data!==e.player)return r;var i=e.multiJumps({tile:n},t);return r.concat(i)},[])}.bind(n),n.multiJumps=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=e.tile;e.jumps=[];var a=!0,s=!1,u=void 0;try{for(var c,l=o.links[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value,h=ge(f,2),d=h[0],p=h[1];if(p.data===t&&-1===i.indexOf(p)){var y=p.links.get(d);if(y&&!y.data){var v={tile:y,removed:p,depth:n,parent:e};e.jumps.push(v),this.multiJumps(v,t,r,n+1,i.concat([p]))}}}}catch(e){s=!0,u=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw u}}return!e.jumps.length&&n&&r.push(e),r}.bind(n),n.leavesToMoves=function(e){return e.map(this.leaveToMove)}.bind(n),n.leaveToMove=function(e){for(var t=[],r=e;r;)r.parent?t.unshift([r.tile,r.removed]):t.unshift(r.tile),r=r.parent;return t}.bind(n),n.expandJumps=function(e){return e.reduce(function(e,t){for(var r=t;r.parent;)e.push(r),r=r.parent;return e},[])}.bind(n),n.finished=!1,n.maxMoves=r,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ke),Ne(t,[{key:"move",value:function(e){var t=e[0],r=e[e.length-1];r=Array.isArray(r)?r[0]:r;for(var n=1;n<e.length;n++)Array.isArray(e[n])&&(e[n][1].data=null);r.data=t.data,t.data=null,this.player=w(this.player),this.moves.push(e),this.winner=this.getWinner(),this.winner&&(this.finished=!0)}},{key:"possible",value:function(){return 1===this.player?this.possibleHunters(1):this.possibleHunters(2).concat(this.possibleHare())}},{key:"undo",value:function(){for(var e=this.moves.pop(),t=e[0],r=e[e.length-1],n=w((r=Array.isArray(r)?r[0]:r).data),i=e.length-1;i>0;i--){var o=e[i];Array.isArray(o)&&(o[1].data=n)}t.data=r.data,r.data=null,this.player=w(this.player)}},{key:"evaluate",value:function(){throw new Error("Method not implemented.")}},{key:"possibleHunters",value:function(e){return this.grid.tiles.filter(function(t){return t.data===e}).reduce(function(e,t){var r=!0,n=!1,i=void 0;try{for(var o,a=t.links[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value,u=Le(s,2),c=(u[0],u[1]);c.data||e.push([t,c])}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}return e},[])}},{key:"possibleHare",value:function(){var e=this.jumpsPossible();return e=this.expandJumps(e),e=this.leavesToMoves(e)}},{key:"getWinner",value:function(){return 0===this.possible().length?w(this.player):this.moves.length===this.maxMoves?-1:0}}]),t}();ze.title="Catch the Hare",ze.group="Qirkat",ze.wiki="https://en.wikipedia.org/wiki/Catch_the_Hare",ze.location="Europe",ze.created=1283;var Fe=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.RectangularGrid(1,!1,d.Shape.Even,5,5,d.Rectangular8Tile),50)),r=0;r<10;r++)e.grid.tiles[r].data=1;return e.grid.tiles[10].data=1,e.grid.tiles[14].data=1,e.grid.tiles[12].data=2,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ze),t}();Fe.title="Catch the Hare",Fe.group="Qirkat",Fe.wiki="https://en.wikipedia.org/wiki/Catch_the_Hare",Fe.location="Europe",Fe.created=1283,Fe.rules=["Black hunters block hare move","White hare captures hunters"],Fe.sample="c5-c4, c3-d2, c4-c3, d2-e1, c3-d3, e1-d1, b2-c2, d1-e1, b3-c3, e1-d1, d3-d2, d1-e1, c3-d3, e1-d1, d3-e3, d1-e1, b4-c3, e1-d1, c3-d3, d1-e1, e3-e2, e1-d1, c2-c3, d1-e1, d3-e3, e1-d1, e2-e1, d1-d2-d3, c1-d2, d3-d4, c3-c4, d4-e5, e3-e4, e5-d4, c4-c5, d4-e5, c5-d5, e5-d4, b5-c5, d4-e5, d2-d3, e5-d4, d3-c3, d4-e5, e1-e2, e5-d4, e2-e3, d4-e5, c5-b5, e5-d4, b5-c5, d4-e5, a4-b4, e5-d4, b4-c4, d4-e5, c4-d4";var We=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.RectangularGrid(1,!1,d.Shape.Even,5,5,d.Rectangular8Tile),50)),r=0;r<10;r++)e.grid.tiles[r].data=1;return e.grid.tiles[12].data=2,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ze),t}();We.title="Catch the Hare 10",We.group="Qirkat",We.original="CatchTheHareGame",We.sample="b4-c4, c3-c4-c5, a5-b4, c5-b5-a5-b4-c3, a3-b4, c3-b3-a3-a4-a5, b2-c2, a5-b4-c3-c2-c1, a1-b2, c1-b1-a1-a2-a3, b2-b3, a3-b3-c3";var De=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var Ve=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.count=0,this.depth=0,this.depth=t}return De(e,[{key:"select",value:function(e){return{move:this.move(e,this.depth),count:this.count}}},{key:"move",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.count=0;var n=e.possible(),i=-1/0,o=void 0,a=!0,s=!1,u=void 0;try{for(var c,l=n[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value;e.move(f);var h=this.minimax(t-1,e,!r);e.undo(),h>i&&(i=h,o=f)}}catch(e){s=!0,u=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw u}}return o}},{key:"minimax",value:function(e,t,r){if(this.count++,0===e)return t.evaluate();var n=t.possible();if(r){var i=-1/0,o=!0,a=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;t.move(l),i=Math.max(i,this.minimax(e-1,t,!r)),t.undo()}}catch(e){a=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}return i}var f=1/0,h=!0,d=!1,p=void 0;try{for(var y,v=n[Symbol.iterator]();!(h=(y=v.next()).done);h=!0){var b=y.value;t.move(b),f=Math.min(f,this.minimax(e-1,t,!r)),t.undo()}}catch(e){d=!0,p=e}finally{try{!h&&v.return&&v.return()}finally{if(d)throw p}}return f}}]),e}();var Be=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.RectangularGrid(1,void 0,d.Shape.Even,11,11,d.Rectangular8Tile),4))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ne),t}();Be.title="Four-in-a-row",Be.group="Connect",Be.rules=["Connect four pieces"],Be.wiki="https://en.wikipedia.org/wiki/M,n,k-game",Be.sample="f6, f5, e6, g6, d6, c6, e7, e5, c5, b4, f8",Be.player=function(){return new Ve(2)};var Ye=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=new d.RadialGrid(1,!1,d.Shape.Even,12,8,d.Radial8Tile,2);return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,4))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ne),t}();Ye.title="Four-in-a-row Round",Ye.group="Connect",Ye.rules=["Connect four pieces"],Ye.original="FourInARow11Game",Ye.sample="f5, g4, g5, h5, f3, i6, f6, f4, h4, i3, e7";var qe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.RectangularGrid(1,!1,d.Shape.Even,15,15,d.Rectangular8Tile),5))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ne),t}();qe.title="Gomoku",qe.group="Connect",qe.wiki="https://en.wikipedia.org/wiki/Gomoku",qe.location="Japan",qe.created=990,qe.rules=["Connect five pieces"],qe.sample="h8, h7, i8, g8, g9, i7, g7, i9, h9, f9, h10, h11, f8, i11, e7, d6, f6, e5, g5, h4, g10, j7, f11, e12, e9, h6, e10, d10, e8, e11, e6",qe.player=function(){return new Ve(2)};var $e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.RectangularGrid(1,!1,d.Shape.Even,9,9,d.Rectangular8Tile),5))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ne),t}();$e.title="Gomoku 9x9",$e.group="Connect",$e.original="GomokuGame",$e.sample="e5, e4, d6, f4, d5, d4, c4, g4, h4, f5, e6, b3, f7, g8, h5, f6, g6, e8, h7, h6, c7, b8, c5, c6, e7, d7, b4, f8, a3",$e.player=function(){return new Ve(2)};var Je=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.RectangularGrid(1,!1,d.Shape.Even,11,11,d.Rectangular8Tile),5))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ne),t}();Je.title="Gomoku 11x11",Je.group="Connect",Je.original="GomokuGame",Je.sample="f6, f5, e7, g5, f7, e5, d5, h5, i5, e6, d7, g7, d6, d8, c5, f8, c7, b7, d4, d3, c6, c4, e8, b5, c8, c9, f9, g10, d9, g6, e4, g4, f4, g3",Je.player=function(){return new Ve(2)};var Xe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.HexagonalGrid(1,!0,d.Shape.Even,15),5))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ne),t}();Xe.title="Gomoku Hex",Xe.group="Connect",Xe.original="GomokuGame",Xe.sample="h8, i8, h7, i7, i6, i5, g9, g10, h10, j6, h9, j7, g8, k8, i4, k9",Xe.player=function(){return new Ve(2)};var Ue=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var Ze=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.player=1,this.moves=[],this.score={1:0,2:0},this.winner=0,this.moveToString=X.bind(this),this.stringToMove=U.bind(this),this.finished=!1,this.history=[],this.anti=i,this.grid=t,this.tileMap=Object(d.toMap)(t.tiles);var o=Math.floor(t.x/2-.5),a=Math.ceil(t.x/2-.5),s=Math.floor(t.y/2-.5),u=Math.ceil(t.y/2-.5);this.center=[this.tileMap.get(t.tile(o,s).key),this.tileMap.get(t.tile(o,u).key),this.tileMap.get(t.tile(a,u).key),this.tileMap.get(t.tile(a,s).key)],this.empty=Object(d.toMap)(this.grid.tiles),Object(d.link)(this.tileMap),n&&this.center.forEach(function(e){r.move(e,!0)}),this.updatePossible()}return Ue(e,[{key:"possible",value:function(){return this.knownPossible}},{key:"updatePossible",value:function(){this.knownPossible=this.possibleFor(this.player),this.knownPossible.length||(this.possibleFor(this.player%2+1).length?this.move(null):this.finished=!0)}},{key:"possibleFor",value:function(e){var t=[];if(this.grid.tiles.length-this.empty.size<4)return this.center.filter(function(e){return!e.data});var r=!0,n=!1,i=void 0;try{for(var o,a=this.empty.values()[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value,u=!0,c=!1,l=void 0;try{for(var f,h=s.links.keys()[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){for(var d=f.value,p=s.links.get(d),y=0;p&&p.data&&p.data!==e;)y++,p=p.links.get(d);if(y&&p&&p.data===e){t.push(s);break}}}catch(e){c=!0,l=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw l}}}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}return t}},{key:"undo",value:function(){var e=this.moves.pop();if(this.finished=!1,this.winner=0,!e)return this.player=w(this.player),this.history.pop(),void this.undo();this.score[e.data]--,e.data=null,this.empty.set(e.key,e);var t=this.history.pop();this.player=this.player%2+1;var r=!0,n=!1,i=void 0;try{for(var o,a=Object.keys(t)[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value,u=this.tileMap.get(s);this.score[u.data]--,u.data=t[s],this.score[u.data]++}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}this.updatePossible()}},{key:"move",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){if(e.data=this.player,this.score[this.player]=this.score[this.player]||0,this.score[this.player]++,this.player=this.player%2+1,this.empty.delete(e.key),!t){this.moves.push(e);var r=this.getState(e);this.history.push(r),this.updatePossible(),this.winner=this.getWinner()}}else this.movePass(e)}},{key:"evaluate",value:function(){return-this.score[this.player]+this.score[w(this.player)]}},{key:"getWinner",value:function(){return this.finished?this.score[1]===this.score[2]?-1:this.score[1]>this.score[2]?this.anti?2:1:this.anti?1:2:0}},{key:"movePass",value:function(e){this.player=this.player%2+1,this.moves.push(e),this.history.push({}),this.updatePossible(),this.winner=this.getWinner()}},{key:"getState",value:function(e){var t={},r=!0,n=!1,i=void 0;try{for(var o,a=e.links.keys()[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){for(var s=o.value,u=e.links.get(s),c=[];u&&u.data&&u.data!==e.data;)c.push(u),u=u.links.get(s);if(u&&u.data===e.data){var l=!0,f=!1,h=void 0;try{for(var d,p=c[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var y=d.value;t[y.key]=y.data,this.score[y.data]--,this.score[e.data]++,y.data=e.data}}catch(e){f=!0,h=e}finally{try{!l&&p.return&&p.return()}finally{if(f)throw h}}}}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}return t}}]),e}();Ze.theme=A.Reversi;var Ke=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.RectangularGrid(1,void 0,d.Shape.Even,8,8,d.Rectangular8Tile),!0))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ze),t}();Ke.title="Othello",Ke.group="Reversi",Ke.created=1971,Ke.authors=[" Goro Hasegawa"],Ke.wiki="https://en.wikipedia.org/wiki/Reversi",Ke.location="Japan",Ke.sample="f4, d3, c3, f5, e3, g3, e6, c2, d6, c7, f3, b3, f6, g6, d2, e1, f7, e8, h3, c4, c1, e2, h6, h5, h4, g2, c6, g7, h1, f2, b4, b5, c5, d1, f1, d7, a5, b6, a6, g5, g1, b7, a8, a7, d8, e7, b8, b2, g4, c8, b1, a3, a4, h2, f8, h8, h7, g8, a2, a1";var et=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.RectangularGrid(1,void 0,d.Shape.Even,4,4,d.Rectangular8Tile),!0))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ze),t}();et.title="Othello 4x4",et.group="Reversi",et.original="OthelloGame",et.sample="d2, d3, d4, b1, a4, b4, c4, d1, a3, pass, a2";var tt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.RectangularGrid(1,void 0,d.Shape.Even,8,8,d.Rectangular8Tile)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ze),t}();tt.title="Reversi",tt.group="Reversi",tt.created=1883,tt.authors=["Lewis Waterman","John W. Mollett"],tt.wiki="https://en.wikipedia.org/wiki/Reversi",tt.rules=["Capture more pieces"],tt.location="England",tt.sample="d5, e5, d4, e4, f3, e3, f2, c3, f5, e6, c5, c6, f4, g2, d6, g6, h1, c4, b5, e2, b6, f1, d2, e1, b4, g3, c2, h3, f7, e7, h2, e8, f8, a6, g7, c1, d8, f6, b2, g4, d7, c8, h4, d1, h6, d3, c7, h8, g8, a1, a5, h5, b3, g5, a7, b1, a2, h7, b8, b7, a8, g1, a4, a3";var rt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.RectangularGrid(1,void 0,d.Shape.Even,4,4,d.Rectangular8Tile)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ze),t}();rt.title="Reversi 4x4",rt.group="Reversi",rt.original="ReversiGame",rt.sample="c2, c3, b2, b3, b4, a1, d2, d4, a2, a3, a4, c4, pass, c1, b1, pass, d3, d1";var nt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.RectangularGrid(1,void 0,d.Shape.Even,6,6,d.Rectangular8Tile)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ze),t}();nt.title="Reversi 6x6",nt.group="Reversi",nt.original="ReversiGame",nt.sample="d4, d3, c4, c3, d2, c5, b5, e3, d5, c1, d1, e1, b2, b4, b3, d6, f3, a4, e5, a6, a5, c2, a2, f6, e4, e2, b6, c6, f5, a3, f1, f4, f2, e6, a1, b1";var it=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.RectangularGrid(1,void 0,d.Shape.Even,10,10,d.Rectangular8Tile)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ze),t}();it.title="Reversi 10x10",it.group="Reversi",it.original="ReversiGame",it.sample="f6, e5, e6, f5, g4, e7, d8, h3, d4, e8, f8, e4, f4, g7, g5, e3, g3, c3, d6, d7, i3, g6, c8, f3, h6, c7, c6, b9, f2, b5, e2, d9, c10, i7, h4, i2, b2, h5, a4, c5, j1, j2, i4, g8, h7, a5, a10, a1, f9, a3, g9, i6, b8, h8, c9, d2, j3, i5, b6, d3, f7, a6, d1, e1, j7, j8, d5, c2, j4, e10, b7, b10, h9, h2, e9, i9, a9, b4, c4, b3, c1, i8, j10, j9, i10, j5, j6, h10, i1, d10, f10, g10, a8, g2, a7, h1, b1, a2, f1, g1";var ot=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,x(new d.HexagonalGrid(1,!1,d.Shape.Rhombus,8))))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ze),t}();ot.title="Reversi Hex",ot.group="Reversi",ot.original="ReversiGame",ot.sample="e4, d4, e5, d5, c6, d6, c7, f3, c5, b6, a6, c8, b5, c4, d3, a5, a4, e2, f4, f5, e6, e3, g5, e7, f2, g4, f6, g2, f1, g3, h1, d2, h4, g1, c2, g6, h2, d1, h3, b2, f7, c3, h6, g7, f8, e8, h5, h7, h8, g8, d7, a7, a8, b4, e1, d8, c1, b1, a2, a3, b7, b8, a1, b3";var at=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,x(new d.HexagonalGrid(1,void 0,d.Shape.Rhombus,4))))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ze),t}();at.title="Reversi Hex 4x4",at.group="Reversi",at.original="ReversiGame",at.sample="b3, c3, c2, b2, c4, b4, a4, d2, d1, pass, a2, pass, d3";var st=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,x(new d.HexagonalGrid(1,void 0,d.Shape.Rhombus,6))))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ze),t}();st.title="Reversi Hex 6x6",st.group="Reversi",st.original="ReversiGame",st.sample="d3, c4, d4, c3, b3, e4, d5, c2, f4, e3, f3, e2, d2, e5, f1, f2, e1, a3, e6, c5, b4, d6, c6, b5, b2, c1, a6, b6, a5, f6, b1, a1, d1, f5, pass, a4, a2";var ut=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,x(new d.HexagonalGrid(1,void 0,d.Shape.Rhombus,10))))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ze),t}();ut.title="Reversi Hex 10x10",ut.group="Reversi",ut.original="ReversiGame",ut.sample="f5, f6, e6, e5, d5, d6, e7, d4, c5, f4, g4, b6, d3, g5, e4, d8, c6, d7, e8, e3, c9, h4, g6, d2, f3, f7, h3, h2, d1, b10, a7, d9, i4, c3, c10, g7, b4, b5, a10, g3, h1, d10, f2, a6, c8, c4, f8, f1, a5, e9, g1, a4, e10, i1, a3, b8, b9, e1, j1, h5, g2, j4, i3, e2, j3, a9, h6, i6, b3, f9, c7, b2, j6, i2, a8, h7, i5, j5, g8, f10, c1, j7, g9, g10, c2, j2, j8, b1, i7, i8, a2, b7, h9, i9, h10, j9, j10, pass, a1, pass, h8, pass, i10";var ct=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new d.RectangularGrid(1,void 0,d.Shape.Even,8,8,d.Rectangular8Tile),!1,!0))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ze),t}();ct.title="Anti-Reversi",ct.group="Reversi",ct.created=1883,ct.authors=["Lewis Waterman","John W. Mollett"],ct.wiki="https://en.wikipedia.org/wiki/Reversi",ct.rules=["Capture less pieces"],ct.location="England",ct.sample="d5, e4, e5, d4, e3, d6, c4, f4, d7, c5, e6, b4, d3, f2, f5, c3, e2, c7, b6, e1, d8, g5, b2, b8, a3, a1, c6, c8, g4, a5, h6, e7, b5, h4, c2, b7, f7, g7, e8, f8, a7, a8, a4, f6, g8, b3, h7, h8, c1, g6, d2, f3, f1, b1, g1, h5, h3, g3, d1, a2, h2, h1, g2, a6";var lt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,x(new d.HexagonalGrid(1,!1,d.Shape.Rhombus,8)),!1,!0))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ze),t}();lt.title="Anti-Reversi Hex",lt.group="Reversi",lt.original="ReversiGame",lt.rules=["Capture less pieces"],lt.sample="e4, e5, d5, d4, f5, d6, c4, g5, e6, d7, d8, c8, b8, c5, f4, c6, b7, b6, a7, b5, f6, g4, h4, e3, a6, g6, d3, c7, e7, a8, g7, g3, h2, f3, f2, b4, a4, h3, a5, g1, e2, c3, d2, h5, g2, e8, f7, f1, e1, d1, c2, c1, h6, f8, b3, b2, a2, b1, a3, g8, h1, a1, h7";var ft=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ht=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var dt=function(){function e(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.moves=[],this.player=1,this.winner=0,this.playerTiles={1:[],2:[]},this.moveToString=X.bind(this),this.stringToMove=U.bind(this),this.undo=te.bind(this),this.finished=!1,this.grid=t,this.tileMap=Object(d.toMap)(t.tiles),this.freeTileMap=Object(d.toMap)(t.tiles),Object(d.link)(this.tileMap),this.markLine(this.grid.tile(0,0),this.grid.tile(0,this.grid.y-1),1,"begin"),this.markLine(this.grid.tile(this.grid.x-1,0),this.grid.tile(this.grid.x-1,this.grid.y-1),1,"end"),this.markLine(this.grid.tile(0,0),this.grid.tile(this.grid.x-1,0),2,"begin"),this.markLine(this.grid.tile(0,this.grid.y-1),this.grid.tile(this.grid.x-1,this.grid.y-1),2,"end")}return ht(e,[{key:"possible",value:function(){return this.finished?[]:Object(d.toArray)(this.freeTileMap)}},{key:"links",value:function(){return[[this.grid.tile(-1,1),this.grid.tile(-1,this.grid.y-1),1],[this.grid.tile(this.grid.x,0),this.grid.tile(this.grid.x,this.grid.y-2),1],[this.grid.tile(1,-1),this.grid.tile(this.grid.x-1,-1),2],[this.grid.tile(0,this.grid.y),this.grid.tile(this.grid.x-2,this.grid.y),2]]}},{key:"move",value:function(e){e.data=this.player,this.playerTiles[this.player].push(e),this.player=w(this.player),this.moves.push(e),this.freeTileMap.delete(e.key),this.winner=this.getWinner(),(this.moves.length===this.grid.tiles.length||this.winner)&&(this.finished=!0)}},{key:"evaluate",value:function(){throw new Error("Method not implemented.")}},{key:"winning",value:function(){for(var e=this.moves[this.moves.length-1],t=new Map([[e.key,!0]]),r=[{tile:e,previous:null}],n=e.data,i=0,o=void 0,a=void 0;i<r.length;){var s=r[i].tile;if(s["begin"+n]?o=o||r[i]:s["end"+n]&&(a=a||r[i]),o&&a){for(var u=[],c=o;c;)u.push(c.tile),c=c.previous;c=a;for(var l=[];c;)l.unshift(c.tile),c=c.previous;return l.shift(),u.concat(l)}var f=!0,h=!1,d=void 0;try{for(var p,y=s.links[Symbol.iterator]();!(f=(p=y.next()).done);f=!0){var v=p.value,b=ft(v,2)[1];b.data===n&&(t.has(b.key)||(r.push({tile:b,previous:r[i]}),t.set(b.key,!0)))}}catch(e){h=!0,d=e}finally{try{!f&&y.return&&y.return()}finally{if(h)throw d}}i++}}},{key:"getWinner",value:function(){if(!this.moves.length)return 0;var e=this.moves[this.moves.length-1];return this.flood(e)?e.data:this.moves.length===this.grid.tiles.length?-1:0}},{key:"markLine",value:function(e,t,r,n){var i=this;d.Float3.line(e,t).forEach(function(e){i.tileMap.get(e.toString())[""+n+r]=!0})}},{key:"flood",value:function(e){for(var t=new Map([[e.key,!0]]),r=[e],n=e.data,i=0,o=!1,a=!1;i<r.length;){var s=r[i];if(s["begin"+n]?o=!0:s["end"+n]&&(a=!0),o&&a)return!0;var u=!0,c=!1,l=void 0;try{for(var f,h=s.links[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value,p=ft(d,2)[1];p.data===n&&(t.has(p.key)||(r.push(p),t.set(p.key,!0)))}}catch(e){c=!0,l=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw l}}i++}return!1}}]),e}();dt.theme=A.Hex;var pt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,x(new d.HexagonalGrid(1,void 0,d.Shape.Rhombus,11))))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,dt),t}();pt.title="Hex",pt.group="Hex",pt.created=1942,pt.location="Denmark",pt.authors=["Piet Hein","John Nash"],pt.aliases=["Con-tac-tix"],pt.wiki="https://en.wikipedia.org/wiki/Hex_(board_game)",pt.rules=["Connect edges"],pt.sample="f6, g6, f7, g5, e5, f5, e6, d4, d5, c5, b6, c6, g8, c8, i8, e2, k8, c10, j8, c9, h8, e3, f8, c11, c7, b7, d6, b8, a6, e1";var yt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,x(new d.HexagonalGrid(1,void 0,d.Shape.Rhombus,5))))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,dt),t}();yt.title="Hex 5x5",yt.group="Hex",yt.original="HexGame",yt.sample="e1, b2, b3, a4, a3, c2, c3, d2, d3, e3, e2";var vt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,x(new d.HexagonalGrid(1,void 0,d.Shape.Rhombus,7))))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,dt),t}();vt.title="Hex 7x7",vt.group="Hex",vt.original="HexGame",vt.sample="c7, c6, c5, a4, f1, e7, c3, g4, g3, g2, a6, e2, d5, f5, f4, d3, e4, g7, b5";var bt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,x(new d.HexagonalGrid(1,void 0,d.Shape.Rhombus,9))))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,dt),t}();bt.title="Hex 9x9",bt.group="Hex",bt.original="HexGame",bt.sample="e5, e4, f5, e3, d5, g5, g4, c5, i3, c6, h3, d4, b8, c7, c8, d7, a8, e8, d8, e7, e2, g2, f2, f3, g1, h1, d9, e9";var gt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,x(new d.HexagonalGrid(1,void 0,d.Shape.Rhombus,13))))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,dt),t}();gt.title="Hex 13x13",gt.group="Hex",gt.original="HexGame",gt.sample="l1, j3, c1, k12, b1, e6, d8, a12, b7, j6, l3, a1, l6, m2, h1, h4, i1, d3, g8, f1, k8, g7, f6, e2, b6, f8, i7, e5, f9, j4, h2, e10, l9, k6, m5, e9, g2, h7, a3, a6, g4, i6, a10, g10, f11, k3, h11, a9, j5, b8, e13, c8, i5, h12, i11, g1, b4, h5, b12, e1, c6, d13, k2, m3, c10, a11, i12, j10, d11, f5, a7, j1, e11, g13, m9, i8, d5, c11, b11, a5, l7, d10, i13, c12, b2, c5, m10, i9, m1, c13, a4, d2, m4, g11, f13, e8, d7, h3, b10, k9, g5, h6, j13, g3, i2, f3, d4, i3, l5, k4, j2, j2";var mt=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var wt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.count=0,this.hit=0,this.depth=0,this.depth=t}return mt(e,[{key:"select",value:function(e){return{move:this.move(e,this.depth),count:this.count,hit:this.hit}}},{key:"move",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.count=0;var n=e.possible(),i=-1/0,o=void 0,a=!0,s=!1,u=void 0;try{for(var c,l=n[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value;e.move(f);var h=this.minimax(t-1,e,-1/0,1/0,!r);e.undo(),h>i&&(i=h,o=f)}}catch(e){s=!0,u=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw u}}return o}},{key:"minimax",value:function(e,t,r,n,i){if(this.count++,0===e)return t.evaluate();var o=t.possible(),a=r,s=n;if(i){var u=-1/0,c=!0,l=!1,f=void 0;try{for(var h,d=o[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value;if(t.move(p),u=Math.max(u,this.minimax(e-1,t,a,s,!i)),t.undo(),s<=(a=Math.max(a,u)))return this.hit++,u}}catch(e){l=!0,f=e}finally{try{!c&&d.return&&d.return()}finally{if(l)throw f}}return u}var y=1/0,v=!0,b=!1,g=void 0;try{for(var m,w=o[Symbol.iterator]();!(v=(m=w.next()).done);v=!0){var x=m.value;if(t.move(x),y=Math.min(y,this.minimax(e-1,t,a,s,!i)),t.undo(),(s=Math.min(s,y))<=a)return this.hit++,y}}catch(e){b=!0,g=e}finally{try{!v&&w.return&&w.return()}finally{if(b)throw g}}return y}}]),e}(),xt=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var kt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return xt(e,[{key:"select",value:function(e){var t=e.possible();return{move:t[Math.floor(Math.random()*t.length)]}}}]),e}(),Ot=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function _t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Tt=function(){function e(t,r,n){_t(this,e),this.depth=t.moves.length,this.action=n,this.parentNode=r,this.children=[],this.wins=0,this.visits=0,this.unexamined=t.possible(),this.activePlayer=t.player%2+1}return Ot(e,[{key:"addChild",value:function(t,r){var n=new e(t,this,this.unexamined[r]);return this.unexamined.splice(r,1),this.children.push(n),n}},{key:"selectChild",value:function(){var e=null,t=Number.NEGATIVE_INFINITY,r=!0,n=!1,i=void 0;try{for(var o,a=this.children[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value,u=s.wins/s.visits+Math.sqrt(2*Math.log(this.visits)/s.visits);u>t&&(e=s,t=u)}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}return e}},{key:"update",value:function(e){this.visits++,this.wins+=this.activePlayer===e?1:-1===e?0:-1}},{key:"mostVisitedChild",value:function(){return this.children.sort(function(e,t){return t.visits-e.visits}),this.children[0]}}]),e}(),jt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8192,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;_t(this,e),this.blockSize=n,this.maxTime=t,this.maxIterations=r}return Ot(e,[{key:"select",value:function(e){var t=new Tt(e),r=Date.now(),n=r+this.maxTime,i=0;return 1===t.unexamined.length?{duration:Date.now()-r,move:t.unexamined[0],nodesVisited:i}:(i=this.iterate(e,t,n),{duration:Date.now()-r,move:t.mostVisitedChild().action,nodesVisited:i})}},{key:"iterate",value:function(e,t,r){for(var n=0,i=0;i<this.maxIterations&&Date.now()<r;i+=this.blockSize)for(var o=0;o<this.blockSize;++o){for(var a=t,s=e.moves.length;0===a.unexamined.length&&a.children.length>0;)a=a.selectChild(),e.move(a.action);if(a.unexamined.length>0){var u=Math.floor(Math.random()*a.unexamined.length);e.move(a.unexamined[u]),a=a.addChild(e,u)}for(var c=e.possible();c.length>0;)e.move(c[Math.floor(Math.random()*c.length)]),++n,c=e.possible();for(var l=e.winner;a;)a.update(l),a=a.parentNode;for(;e.moves.length>s;)e.undo()}return n}}]),e}(),St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pt=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var Et=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8192,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,jt),Pt(t,[{key:"select",value:function(e){var t=this.getRoot(e)||new Tt(e),r=Date.now(),n=r+this.maxTime,i=this.iterate(e,t,n);return this.cachedRoot=t.mostVisitedChild(),{duration:Date.now()-r,move:this.cachedRoot.action,nodesVisited:i}}},{key:"getRoot",value:function(e){var t=this;if(this.cachedRoot&&!(this.cachedRoot.depth>=e.moves.length)){for(var r=function(r){if(t.cachedRoot=t.cachedRoot.children.find(function(t){return t.action===e.moves[r]}),!t.cachedRoot)return{v:void 0}},n=this.cachedRoot.depth;n<e.moves.length;n++){var i=r(n);if("object"===(void 0===i?"undefined":St(i)))return i.v}return this.cachedRoot}}}]),t}(),Rt=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var Mt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return Rt(e,null,[{key:"game",value:function(t){return e.games.find(function(e){return e.id===t})}},{key:"similar",value:function(t,r){return e.games.filter(function(e){return e.originalId===t&&e.id!==r})}},{key:"wip",set:function(t){t!==this.wipValue&&(this.wipValue=t,e.gamesValue=void 0)}},{key:"games",get:function(){return e.gamesValue||(e.gamesValue=Object.freeze(M(n,this.wipValue))),e.gamesValue}}]),e}();Mt.wipValue=!1;var Gt=n,Ct=i;r.d(t,"Move",function(){return o.Move}),r.d(t,"GameProxy",function(){return s}),r.d(t,"TimedProxy",function(){return L}),r.d(t,"IGame",function(){return N.IGame}),r.d(t,"IPLayer",function(){return z.IPLayer}),r.d(t,"Games",function(){return Gt}),r.d(t,"Players",function(){return Ct}),r.d(t,"FIELDS",function(){return T}),r.d(t,"other",function(){return w}),r.d(t,"reset",function(){return k}),r.d(t,"stringify",function(){return m}),r.d(t,"table",function(){return M}),r.d(t,"undoFor",function(){return _}),r.d(t,"update",function(){return O}),r.d(t,"Info",function(){return Mt}),r.d(t,"Theme",function(){return A}),r.d(t,"ThemeStones",function(){return W}),r.d(t,"Stones",function(){return H}),r.d(t,"StoneNames",function(){return D}),r.d(t,"TicTacToeGame",function(){return ie}),r.d(t,"TicTacToeRoundGame",function(){return oe}),r.d(t,"TicTacToeTriGame",function(){return ae}),r.d(t,"TacTickleGame",function(){return le}),r.d(t,"TacTickle4Game",function(){return fe}),r.d(t,"TacTickleHexGame",function(){return he}),r.d(t,"TacTickleHex2Game",function(){return de}),r.d(t,"TacTickleRoundGame",function(){return pe}),r.d(t,"TacTickleTriGame",function(){return ye}),r.d(t,"ConnectFourGame",function(){return be}),r.d(t,"QirkatGame",function(){return Se}),r.d(t,"Qirkat3Game",function(){return Ee}),r.d(t,"Qirkat7Game",function(){return Me}),r.d(t,"QirkatHexGame",function(){return Ce}),r.d(t,"QirkatHex7Game",function(){return Ie}),r.d(t,"QirkatHex2Game",function(){return He}),r.d(t,"CatchTheHareGame",function(){return Fe}),r.d(t,"CatchTheHare10Game",function(){return We}),r.d(t,"FourInARow11Game",function(){return Be}),r.d(t,"FourInARowRoundGame",function(){return Ye}),r.d(t,"GomokuGame",function(){return qe}),r.d(t,"Gomoku9Game",function(){return $e}),r.d(t,"Gomoku11Game",function(){return Je}),r.d(t,"GomokuHexGame",function(){return Xe}),r.d(t,"OthelloGame",function(){return Ke}),r.d(t,"Othello4Game",function(){return et}),r.d(t,"ReversiGame",function(){return tt}),r.d(t,"Reversi4Game",function(){return rt}),r.d(t,"Reversi6Game",function(){return nt}),r.d(t,"Reversi10Game",function(){return it}),r.d(t,"ReversiHexGame",function(){return ot}),r.d(t,"ReversiHex4Game",function(){return at}),r.d(t,"ReversiHex6Game",function(){return st}),r.d(t,"ReversiHex10Game",function(){return ut}),r.d(t,"AntiReversiGame",function(){return ct}),r.d(t,"AntiReversiHexGame",function(){return lt}),r.d(t,"HexGame",function(){return pt}),r.d(t,"Hex5Game",function(){return yt}),r.d(t,"Hex7Game",function(){return vt}),r.d(t,"Hex9Game",function(){return bt}),r.d(t,"Hex13Game",function(){return gt}),r.d(t,"AlphaBetaPlayer",function(){return wt}),r.d(t,"RandomPlayer",function(){return kt}),r.d(t,"UctPlayer",function(){return jt}),r.d(t,"UctCachedPlayer",function(){return Et}),r.d(t,"MinimaxPlayer",function(){return Ve}),r.d(t,"getMovePlace",function(){return u}),r.d(t,"initHighlight",function(){return c}),r.d(t,"initActions",function(){return l}),r.d(t,"selectAction",function(){return f}),r.d(t,"undoAction",function(){return h})},function(e,t){},function(e,t){},function(e,t){},function(e,t,r){var n,i;
/**
 * lunr - http://lunrjs.com - A bit like Solr, but much smaller and not as bright - 2.1.6
 * Copyright (C) 2018 Oliver Nightingale
 * @license MIT
 */!function(){var o,a,s,u,c,l,f,h,d,p,y,v,b,g,m,w,x,k,O,_,T,j,S,P,E,R,M=function(e){var t=new M.Builder;return t.pipeline.add(M.trimmer,M.stopWordFilter,M.stemmer),t.searchPipeline.add(M.stemmer),e.call(t,t),t.build()};M.version="2.1.6"
/*!
 * lunr.utils
 * Copyright (C) 2018 Oliver Nightingale
 */,M.utils={},M.utils.warn=(o=this,function(e){o.console&&console.warn&&console.warn(e)}),M.utils.asString=function(e){return void 0===e||null===e?"":e.toString()},M.FieldRef=function(e,t,r){this.docRef=e,this.fieldName=t,this._stringValue=r},M.FieldRef.joiner="/",M.FieldRef.fromString=function(e){var t=e.indexOf(M.FieldRef.joiner);if(-1===t)throw"malformed field ref string";var r=e.slice(0,t),n=e.slice(t+1);return new M.FieldRef(n,r,e)},M.FieldRef.prototype.toString=function(){return void 0==this._stringValue&&(this._stringValue=this.fieldName+M.FieldRef.joiner+this.docRef),this._stringValue},M.idf=function(e,t){var r=0;for(var n in e)"_index"!=n&&(r+=Object.keys(e[n]).length);var i=(t-r+.5)/(r+.5);return Math.log(1+Math.abs(i))},M.Token=function(e,t){this.str=e||"",this.metadata=t||{}},M.Token.prototype.toString=function(){return this.str},M.Token.prototype.update=function(e){return this.str=e(this.str,this.metadata),this},M.Token.prototype.clone=function(e){return e=e||function(e){return e},new M.Token(e(this.str,this.metadata),this.metadata)}
/*!
 * lunr.tokenizer
 * Copyright (C) 2018 Oliver Nightingale
 */,M.tokenizer=function(e){if(null==e||void 0==e)return[];if(Array.isArray(e))return e.map(function(e){return new M.Token(M.utils.asString(e).toLowerCase())});for(var t=e.toString().trim().toLowerCase(),r=t.length,n=[],i=0,o=0;i<=r;i++){var a=i-o;(t.charAt(i).match(M.tokenizer.separator)||i==r)&&(a>0&&n.push(new M.Token(t.slice(o,i),{position:[o,a],index:n.length})),o=i+1)}return n},M.tokenizer.separator=/[\s\-]+/
/*!
 * lunr.Pipeline
 * Copyright (C) 2018 Oliver Nightingale
 */,M.Pipeline=function(){this._stack=[]},M.Pipeline.registeredFunctions=Object.create(null),M.Pipeline.registerFunction=function(e,t){t in this.registeredFunctions&&M.utils.warn("Overwriting existing registered function: "+t),e.label=t,M.Pipeline.registeredFunctions[e.label]=e},M.Pipeline.warnIfFunctionNotRegistered=function(e){e.label&&e.label in this.registeredFunctions||M.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",e)},M.Pipeline.load=function(e){var t=new M.Pipeline;return e.forEach(function(e){var r=M.Pipeline.registeredFunctions[e];if(!r)throw new Error("Cannot load unregistered function: "+e);t.add(r)}),t},M.Pipeline.prototype.add=function(){Array.prototype.slice.call(arguments).forEach(function(e){M.Pipeline.warnIfFunctionNotRegistered(e),this._stack.push(e)},this)},M.Pipeline.prototype.after=function(e,t){M.Pipeline.warnIfFunctionNotRegistered(t);var r=this._stack.indexOf(e);if(-1==r)throw new Error("Cannot find existingFn");r+=1,this._stack.splice(r,0,t)},M.Pipeline.prototype.before=function(e,t){M.Pipeline.warnIfFunctionNotRegistered(t);var r=this._stack.indexOf(e);if(-1==r)throw new Error("Cannot find existingFn");this._stack.splice(r,0,t)},M.Pipeline.prototype.remove=function(e){var t=this._stack.indexOf(e);-1!=t&&this._stack.splice(t,1)},M.Pipeline.prototype.run=function(e){for(var t=this._stack.length,r=0;r<t;r++){for(var n=this._stack[r],i=[],o=0;o<e.length;o++){var a=n(e[o],o,e);if(void 0!==a&&""!==a)if(a instanceof Array)for(var s=0;s<a.length;s++)i.push(a[s]);else i.push(a)}e=i}return e},M.Pipeline.prototype.runString=function(e){var t=new M.Token(e);return this.run([t]).map(function(e){return e.toString()})},M.Pipeline.prototype.reset=function(){this._stack=[]},M.Pipeline.prototype.toJSON=function(){return this._stack.map(function(e){return M.Pipeline.warnIfFunctionNotRegistered(e),e.label})}
/*!
 * lunr.Vector
 * Copyright (C) 2018 Oliver Nightingale
 */,M.Vector=function(e){this._magnitude=0,this.elements=e||[]},M.Vector.prototype.positionForIndex=function(e){if(0==this.elements.length)return 0;for(var t=0,r=this.elements.length/2,n=r-t,i=Math.floor(n/2),o=this.elements[2*i];n>1&&(o<e&&(t=i),o>e&&(r=i),o!=e);)n=r-t,i=t+Math.floor(n/2),o=this.elements[2*i];return o==e?2*i:o>e?2*i:o<e?2*(i+1):void 0},M.Vector.prototype.insert=function(e,t){this.upsert(e,t,function(){throw"duplicate index"})},M.Vector.prototype.upsert=function(e,t,r){this._magnitude=0;var n=this.positionForIndex(e);this.elements[n]==e?this.elements[n+1]=r(this.elements[n+1],t):this.elements.splice(n,0,e,t)},M.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var e=0,t=this.elements.length,r=1;r<t;r+=2){var n=this.elements[r];e+=n*n}return this._magnitude=Math.sqrt(e)},M.Vector.prototype.dot=function(e){for(var t=0,r=this.elements,n=e.elements,i=r.length,o=n.length,a=0,s=0,u=0,c=0;u<i&&c<o;)(a=r[u])<(s=n[c])?u+=2:a>s?c+=2:a==s&&(t+=r[u+1]*n[c+1],u+=2,c+=2);return t},M.Vector.prototype.similarity=function(e){return this.dot(e)/(this.magnitude()*e.magnitude())},M.Vector.prototype.toArray=function(){for(var e=new Array(this.elements.length/2),t=1,r=0;t<this.elements.length;t+=2,r++)e[r]=this.elements[t];return e},M.Vector.prototype.toJSON=function(){return this.elements}
/*!
 * lunr.stemmer
 * Copyright (C) 2018 Oliver Nightingale
 * Includes code from - http://tartarus.org/~martin/PorterStemmer/js.txt
 */,M.stemmer=(a={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},s={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},u="[aeiouy]",c="[^aeiou][^aeiouy]*",l=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),f=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),h=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$"),d=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy]"),p=/^(.+?)(ss|i)es$/,y=/^(.+?)([^s])s$/,v=/^(.+?)eed$/,b=/^(.+?)(ed|ing)$/,g=/.$/,m=/(at|bl|iz)$/,w=new RegExp("([^aeiouylsz])\\1$"),x=new RegExp("^"+c+u+"[^aeiouwxy]$"),k=/^(.+?[^aeiou])y$/,O=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,_=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,T=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,j=/^(.+?)(s|t)(ion)$/,S=/^(.+?)e$/,P=/ll$/,E=new RegExp("^"+c+u+"[^aeiouwxy]$"),R=function(e){var t,r,n,i,o,u,c;if(e.length<3)return e;if("y"==(n=e.substr(0,1))&&(e=n.toUpperCase()+e.substr(1)),o=y,(i=p).test(e)?e=e.replace(i,"$1$2"):o.test(e)&&(e=e.replace(o,"$1$2")),o=b,(i=v).test(e)){var R=i.exec(e);(i=l).test(R[1])&&(i=g,e=e.replace(i,""))}else if(o.test(e)){t=(R=o.exec(e))[1],(o=d).test(t)&&(u=w,c=x,(o=m).test(e=t)?e+="e":u.test(e)?(i=g,e=e.replace(i,"")):c.test(e)&&(e+="e"))}(i=k).test(e)&&(e=(t=(R=i.exec(e))[1])+"i");(i=O).test(e)&&(t=(R=i.exec(e))[1],r=R[2],(i=l).test(t)&&(e=t+a[r]));(i=_).test(e)&&(t=(R=i.exec(e))[1],r=R[2],(i=l).test(t)&&(e=t+s[r]));if(o=j,(i=T).test(e))t=(R=i.exec(e))[1],(i=f).test(t)&&(e=t);else if(o.test(e)){t=(R=o.exec(e))[1]+R[2],(o=f).test(t)&&(e=t)}(i=S).test(e)&&(t=(R=i.exec(e))[1],o=h,u=E,((i=f).test(t)||o.test(t)&&!u.test(t))&&(e=t));return o=f,(i=P).test(e)&&o.test(e)&&(i=g,e=e.replace(i,"")),"y"==n&&(e=n.toLowerCase()+e.substr(1)),e},function(e){return e.update(R)}),M.Pipeline.registerFunction(M.stemmer,"stemmer")
/*!
 * lunr.stopWordFilter
 * Copyright (C) 2018 Oliver Nightingale
 */,M.generateStopWordFilter=function(e){var t=e.reduce(function(e,t){return e[t]=t,e},{});return function(e){if(e&&t[e.toString()]!==e.toString())return e}},M.stopWordFilter=M.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),M.Pipeline.registerFunction(M.stopWordFilter,"stopWordFilter")
/*!
 * lunr.trimmer
 * Copyright (C) 2018 Oliver Nightingale
 */,M.trimmer=function(e){return e.update(function(e){return e.replace(/^\W+/,"").replace(/\W+$/,"")})},M.Pipeline.registerFunction(M.trimmer,"trimmer")
/*!
 * lunr.TokenSet
 * Copyright (C) 2018 Oliver Nightingale
 */,M.TokenSet=function(){this.final=!1,this.edges={},this.id=M.TokenSet._nextId,M.TokenSet._nextId+=1},M.TokenSet._nextId=1,M.TokenSet.fromArray=function(e){for(var t=new M.TokenSet.Builder,r=0,n=e.length;r<n;r++)t.insert(e[r]);return t.finish(),t.root},M.TokenSet.fromClause=function(e){return"editDistance"in e?M.TokenSet.fromFuzzyString(e.term,e.editDistance):M.TokenSet.fromString(e.term)},M.TokenSet.fromFuzzyString=function(e,t){for(var r=new M.TokenSet,n=[{node:r,editsRemaining:t,str:e}];n.length;){var i,o,a,s=n.pop();if(s.str.length>0)(o=s.str.charAt(0))in s.node.edges?i=s.node.edges[o]:(i=new M.TokenSet,s.node.edges[o]=i),1==s.str.length?i.final=!0:n.push({node:i,editsRemaining:s.editsRemaining,str:s.str.slice(1)});if(s.editsRemaining>0&&s.str.length>1)(o=s.str.charAt(1))in s.node.edges?a=s.node.edges[o]:(a=new M.TokenSet,s.node.edges[o]=a),s.str.length<=2?a.final=!0:n.push({node:a,editsRemaining:s.editsRemaining-1,str:s.str.slice(2)});if(s.editsRemaining>0&&1==s.str.length&&(s.node.final=!0),s.editsRemaining>0&&s.str.length>=1){if("*"in s.node.edges)var u=s.node.edges["*"];else{u=new M.TokenSet;s.node.edges["*"]=u}1==s.str.length?u.final=!0:n.push({node:u,editsRemaining:s.editsRemaining-1,str:s.str.slice(1)})}if(s.editsRemaining>0){if("*"in s.node.edges)var c=s.node.edges["*"];else{c=new M.TokenSet;s.node.edges["*"]=c}0==s.str.length?c.final=!0:n.push({node:c,editsRemaining:s.editsRemaining-1,str:s.str})}if(s.editsRemaining>0&&s.str.length>1){var l,f=s.str.charAt(0),h=s.str.charAt(1);h in s.node.edges?l=s.node.edges[h]:(l=new M.TokenSet,s.node.edges[h]=l),1==s.str.length?l.final=!0:n.push({node:l,editsRemaining:s.editsRemaining-1,str:f+s.str.slice(2)})}}return r},M.TokenSet.fromString=function(e){for(var t=new M.TokenSet,r=t,n=!1,i=0,o=e.length;i<o;i++){var a=e[i],s=i==o-1;if("*"==a)n=!0,t.edges[a]=t,t.final=s;else{var u=new M.TokenSet;u.final=s,t.edges[a]=u,t=u,n&&(t.edges["*"]=r)}}return r},M.TokenSet.prototype.toArray=function(){for(var e=[],t=[{prefix:"",node:this}];t.length;){var r=t.pop(),n=Object.keys(r.node.edges),i=n.length;r.node.final&&e.push(r.prefix);for(var o=0;o<i;o++){var a=n[o];t.push({prefix:r.prefix.concat(a),node:r.node.edges[a]})}}return e},M.TokenSet.prototype.toString=function(){if(this._str)return this._str;for(var e=this.final?"1":"0",t=Object.keys(this.edges).sort(),r=t.length,n=0;n<r;n++){var i=t[n];e=e+i+this.edges[i].id}return e},M.TokenSet.prototype.intersect=function(e){for(var t=new M.TokenSet,r=void 0,n=[{qNode:e,output:t,node:this}];n.length;){r=n.pop();for(var i=Object.keys(r.qNode.edges),o=i.length,a=Object.keys(r.node.edges),s=a.length,u=0;u<o;u++)for(var c=i[u],l=0;l<s;l++){var f=a[l];if(f==c||"*"==c){var h=r.node.edges[f],d=r.qNode.edges[c],p=h.final&&d.final,y=void 0;f in r.output.edges?(y=r.output.edges[f]).final=y.final||p:((y=new M.TokenSet).final=p,r.output.edges[f]=y),n.push({qNode:d,output:y,node:h})}}}return t},M.TokenSet.Builder=function(){this.previousWord="",this.root=new M.TokenSet,this.uncheckedNodes=[],this.minimizedNodes={}},M.TokenSet.Builder.prototype.insert=function(e){var t,r=0;if(e<this.previousWord)throw new Error("Out of order word insertion");for(var n=0;n<e.length&&n<this.previousWord.length&&e[n]==this.previousWord[n];n++)r++;this.minimize(r),t=0==this.uncheckedNodes.length?this.root:this.uncheckedNodes[this.uncheckedNodes.length-1].child;for(n=r;n<e.length;n++){var i=new M.TokenSet,o=e[n];t.edges[o]=i,this.uncheckedNodes.push({parent:t,char:o,child:i}),t=i}t.final=!0,this.previousWord=e},M.TokenSet.Builder.prototype.finish=function(){this.minimize(0)},M.TokenSet.Builder.prototype.minimize=function(e){for(var t=this.uncheckedNodes.length-1;t>=e;t--){var r=this.uncheckedNodes[t],n=r.child.toString();n in this.minimizedNodes?r.parent.edges[r.char]=this.minimizedNodes[n]:(r.child._str=n,this.minimizedNodes[n]=r.child),this.uncheckedNodes.pop()}}
/*!
 * lunr.Index
 * Copyright (C) 2018 Oliver Nightingale
 */,M.Index=function(e){this.invertedIndex=e.invertedIndex,this.fieldVectors=e.fieldVectors,this.tokenSet=e.tokenSet,this.fields=e.fields,this.pipeline=e.pipeline},M.Index.prototype.search=function(e){return this.query(function(t){new M.QueryParser(e,t).parse()})},M.Index.prototype.query=function(e){var t=new M.Query(this.fields),r=Object.create(null),n=Object.create(null),i=Object.create(null);e.call(t,t);for(var o=0;o<t.clauses.length;o++){var a=t.clauses[o],s=null;s=a.usePipeline?this.pipeline.runString(a.term):[a.term];for(var u=0;u<s.length;u++){var c=s[u];a.term=c;for(var l=M.TokenSet.fromClause(a),f=this.tokenSet.intersect(l).toArray(),h=0;h<f.length;h++)for(var d=f[h],p=this.invertedIndex[d],y=p._index,v=0;v<a.fields.length;v++){var b=a.fields[v],g=p[b],m=Object.keys(g),w=d+"/"+b;if(void 0===n[b]&&(n[b]=new M.Vector),n[b].upsert(y,1*a.boost,function(e,t){return e+t}),!i[w]){for(var x=0;x<m.length;x++){var k,O=m[x],_=new M.FieldRef(O,b),T=g[O];void 0===(k=r[_])?r[_]=new M.MatchData(d,b,T):k.add(d,b,T)}i[w]=!0}}}}var j=Object.keys(r),S=[],P=Object.create(null);for(o=0;o<j.length;o++){var E,R=M.FieldRef.fromString(j[o]),G=R.docRef,C=this.fieldVectors[R],Q=n[R.fieldName].similarity(C);if(void 0!==(E=P[G]))E.score+=Q,E.matchData.combine(r[R]);else{var I={ref:G,score:Q,matchData:r[R]};P[G]=I,S.push(I)}}return S.sort(function(e,t){return t.score-e.score})},M.Index.prototype.toJSON=function(){var e=Object.keys(this.invertedIndex).sort().map(function(e){return[e,this.invertedIndex[e]]},this),t=Object.keys(this.fieldVectors).map(function(e){return[e,this.fieldVectors[e].toJSON()]},this);return{version:M.version,fields:this.fields,fieldVectors:t,invertedIndex:e,pipeline:this.pipeline.toJSON()}},M.Index.load=function(e){var t={},r={},n=e.fieldVectors,i={},o=e.invertedIndex,a=new M.TokenSet.Builder,s=M.Pipeline.load(e.pipeline);e.version!=M.version&&M.utils.warn("Version mismatch when loading serialised index. Current version of lunr '"+M.version+"' does not match serialized index '"+e.version+"'");for(var u=0;u<n.length;u++){var c=(f=n[u])[0],l=f[1];r[c]=new M.Vector(l)}for(u=0;u<o.length;u++){var f,h=(f=o[u])[0],d=f[1];a.insert(h),i[h]=d}return a.finish(),t.fields=e.fields,t.fieldVectors=r,t.invertedIndex=i,t.tokenSet=a.root,t.pipeline=s,new M.Index(t)}
/*!
 * lunr.Builder
 * Copyright (C) 2018 Oliver Nightingale
 */,M.Builder=function(){this._ref="id",this._fields=[],this.invertedIndex=Object.create(null),this.fieldTermFrequencies={},this.fieldLengths={},this.tokenizer=M.tokenizer,this.pipeline=new M.Pipeline,this.searchPipeline=new M.Pipeline,this.documentCount=0,this._b=.75,this._k1=1.2,this.termIndex=0,this.metadataWhitelist=[]},M.Builder.prototype.ref=function(e){this._ref=e},M.Builder.prototype.field=function(e){this._fields.push(e)},M.Builder.prototype.b=function(e){this._b=e<0?0:e>1?1:e},M.Builder.prototype.k1=function(e){this._k1=e},M.Builder.prototype.add=function(e){var t=e[this._ref];this.documentCount+=1;for(var r=0;r<this._fields.length;r++){var n=this._fields[r],i=e[n],o=this.tokenizer(i),a=this.pipeline.run(o),s=new M.FieldRef(t,n),u=Object.create(null);this.fieldTermFrequencies[s]=u,this.fieldLengths[s]=0,this.fieldLengths[s]+=a.length;for(var c=0;c<a.length;c++){var l=a[c];if(void 0==u[l]&&(u[l]=0),u[l]+=1,void 0==this.invertedIndex[l]){var f=Object.create(null);f._index=this.termIndex,this.termIndex+=1;for(var h=0;h<this._fields.length;h++)f[this._fields[h]]=Object.create(null);this.invertedIndex[l]=f}void 0==this.invertedIndex[l][n][t]&&(this.invertedIndex[l][n][t]=Object.create(null));for(var d=0;d<this.metadataWhitelist.length;d++){var p=this.metadataWhitelist[d],y=l.metadata[p];void 0==this.invertedIndex[l][n][t][p]&&(this.invertedIndex[l][n][t][p]=[]),this.invertedIndex[l][n][t][p].push(y)}}}},M.Builder.prototype.calculateAverageFieldLengths=function(){for(var e=Object.keys(this.fieldLengths),t=e.length,r={},n={},i=0;i<t;i++){var o=M.FieldRef.fromString(e[i]);n[a=o.fieldName]||(n[a]=0),n[a]+=1,r[a]||(r[a]=0),r[a]+=this.fieldLengths[o]}for(i=0;i<this._fields.length;i++){var a;r[a=this._fields[i]]=r[a]/n[a]}this.averageFieldLength=r},M.Builder.prototype.createFieldVectors=function(){for(var e={},t=Object.keys(this.fieldTermFrequencies),r=t.length,n=Object.create(null),i=0;i<r;i++){for(var o=M.FieldRef.fromString(t[i]),a=o.fieldName,s=this.fieldLengths[o],u=new M.Vector,c=this.fieldTermFrequencies[o],l=Object.keys(c),f=l.length,h=0;h<f;h++){var d,p,y,v=l[h],b=c[v],g=this.invertedIndex[v]._index;void 0===n[v]?(d=M.idf(this.invertedIndex[v],this.documentCount),n[v]=d):d=n[v],p=d*((this._k1+1)*b)/(this._k1*(1-this._b+this._b*(s/this.averageFieldLength[a]))+b),y=Math.round(1e3*p)/1e3,u.insert(g,y)}e[o]=u}this.fieldVectors=e},M.Builder.prototype.createTokenSet=function(){this.tokenSet=M.TokenSet.fromArray(Object.keys(this.invertedIndex).sort())},M.Builder.prototype.build=function(){return this.calculateAverageFieldLengths(),this.createFieldVectors(),this.createTokenSet(),new M.Index({invertedIndex:this.invertedIndex,fieldVectors:this.fieldVectors,tokenSet:this.tokenSet,fields:this._fields,pipeline:this.searchPipeline})},M.Builder.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},M.MatchData=function(e,t,r){for(var n=Object.create(null),i=Object.keys(r),o=0;o<i.length;o++){var a=i[o];n[a]=r[a].slice()}this.metadata=Object.create(null),this.metadata[e]=Object.create(null),this.metadata[e][t]=n},M.MatchData.prototype.combine=function(e){for(var t=Object.keys(e.metadata),r=0;r<t.length;r++){var n=t[r],i=Object.keys(e.metadata[n]);void 0==this.metadata[n]&&(this.metadata[n]=Object.create(null));for(var o=0;o<i.length;o++){var a=i[o],s=Object.keys(e.metadata[n][a]);void 0==this.metadata[n][a]&&(this.metadata[n][a]=Object.create(null));for(var u=0;u<s.length;u++){var c=s[u];void 0==this.metadata[n][a][c]?this.metadata[n][a][c]=e.metadata[n][a][c]:this.metadata[n][a][c]=this.metadata[n][a][c].concat(e.metadata[n][a][c])}}}},M.MatchData.prototype.add=function(e,t,r){if(!(e in this.metadata))return this.metadata[e]=Object.create(null),void(this.metadata[e][t]=r);if(t in this.metadata[e])for(var n=Object.keys(r),i=0;i<n.length;i++){var o=n[i];o in this.metadata[e][t]?this.metadata[e][t][o]=this.metadata[e][t][o].concat(r[o]):this.metadata[e][t][o]=r[o]}else this.metadata[e][t]=r},M.Query=function(e){this.clauses=[],this.allFields=e},M.Query.wildcard=new String("*"),M.Query.wildcard.NONE=0,M.Query.wildcard.LEADING=1,M.Query.wildcard.TRAILING=2,M.Query.prototype.clause=function(e){return"fields"in e||(e.fields=this.allFields),"boost"in e||(e.boost=1),"usePipeline"in e||(e.usePipeline=!0),"wildcard"in e||(e.wildcard=M.Query.wildcard.NONE),e.wildcard&M.Query.wildcard.LEADING&&e.term.charAt(0)!=M.Query.wildcard&&(e.term="*"+e.term),e.wildcard&M.Query.wildcard.TRAILING&&e.term.slice(-1)!=M.Query.wildcard&&(e.term=e.term+"*"),this.clauses.push(e),this},M.Query.prototype.term=function(e,t){var r=t||{};return r.term=e,this.clause(r),this},M.QueryParseError=function(e,t,r){this.name="QueryParseError",this.message=e,this.start=t,this.end=r},M.QueryParseError.prototype=new Error,M.QueryLexer=function(e){this.lexemes=[],this.str=e,this.length=e.length,this.pos=0,this.start=0,this.escapeCharPositions=[]},M.QueryLexer.prototype.run=function(){for(var e=M.QueryLexer.lexText;e;)e=e(this)},M.QueryLexer.prototype.sliceString=function(){for(var e=[],t=this.start,r=this.pos,n=0;n<this.escapeCharPositions.length;n++)r=this.escapeCharPositions[n],e.push(this.str.slice(t,r)),t=r+1;return e.push(this.str.slice(t,this.pos)),this.escapeCharPositions.length=0,e.join("")},M.QueryLexer.prototype.emit=function(e){this.lexemes.push({type:e,str:this.sliceString(),start:this.start,end:this.pos}),this.start=this.pos},M.QueryLexer.prototype.escapeCharacter=function(){this.escapeCharPositions.push(this.pos-1),this.pos+=1},M.QueryLexer.prototype.next=function(){if(this.pos>=this.length)return M.QueryLexer.EOS;var e=this.str.charAt(this.pos);return this.pos+=1,e},M.QueryLexer.prototype.width=function(){return this.pos-this.start},M.QueryLexer.prototype.ignore=function(){this.start==this.pos&&(this.pos+=1),this.start=this.pos},M.QueryLexer.prototype.backup=function(){this.pos-=1},M.QueryLexer.prototype.acceptDigitRun=function(){var e,t;do{t=(e=this.next()).charCodeAt(0)}while(t>47&&t<58);e!=M.QueryLexer.EOS&&this.backup()},M.QueryLexer.prototype.more=function(){return this.pos<this.length},M.QueryLexer.EOS="EOS",M.QueryLexer.FIELD="FIELD",M.QueryLexer.TERM="TERM",M.QueryLexer.EDIT_DISTANCE="EDIT_DISTANCE",M.QueryLexer.BOOST="BOOST",M.QueryLexer.lexField=function(e){return e.backup(),e.emit(M.QueryLexer.FIELD),e.ignore(),M.QueryLexer.lexText},M.QueryLexer.lexTerm=function(e){if(e.width()>1&&(e.backup(),e.emit(M.QueryLexer.TERM)),e.ignore(),e.more())return M.QueryLexer.lexText},M.QueryLexer.lexEditDistance=function(e){return e.ignore(),e.acceptDigitRun(),e.emit(M.QueryLexer.EDIT_DISTANCE),M.QueryLexer.lexText},M.QueryLexer.lexBoost=function(e){return e.ignore(),e.acceptDigitRun(),e.emit(M.QueryLexer.BOOST),M.QueryLexer.lexText},M.QueryLexer.lexEOS=function(e){e.width()>0&&e.emit(M.QueryLexer.TERM)},M.QueryLexer.termSeparator=M.tokenizer.separator,M.QueryLexer.lexText=function(e){for(;;){var t=e.next();if(t==M.QueryLexer.EOS)return M.QueryLexer.lexEOS;if(92!=t.charCodeAt(0)){if(":"==t)return M.QueryLexer.lexField;if("~"==t)return e.backup(),e.width()>0&&e.emit(M.QueryLexer.TERM),M.QueryLexer.lexEditDistance;if("^"==t)return e.backup(),e.width()>0&&e.emit(M.QueryLexer.TERM),M.QueryLexer.lexBoost;if(t.match(M.QueryLexer.termSeparator))return M.QueryLexer.lexTerm}else e.escapeCharacter()}},M.QueryParser=function(e,t){this.lexer=new M.QueryLexer(e),this.query=t,this.currentClause={},this.lexemeIdx=0},M.QueryParser.prototype.parse=function(){this.lexer.run(),this.lexemes=this.lexer.lexemes;for(var e=M.QueryParser.parseFieldOrTerm;e;)e=e(this);return this.query},M.QueryParser.prototype.peekLexeme=function(){return this.lexemes[this.lexemeIdx]},M.QueryParser.prototype.consumeLexeme=function(){var e=this.peekLexeme();return this.lexemeIdx+=1,e},M.QueryParser.prototype.nextClause=function(){var e=this.currentClause;this.query.clause(e),this.currentClause={}},M.QueryParser.parseFieldOrTerm=function(e){var t=e.peekLexeme();if(void 0!=t)switch(t.type){case M.QueryLexer.FIELD:return M.QueryParser.parseField;case M.QueryLexer.TERM:return M.QueryParser.parseTerm;default:var r="expected either a field or a term, found "+t.type;throw t.str.length>=1&&(r+=" with value '"+t.str+"'"),new M.QueryParseError(r,t.start,t.end)}},M.QueryParser.parseField=function(e){var t=e.consumeLexeme();if(void 0!=t){if(-1==e.query.allFields.indexOf(t.str)){var r=e.query.allFields.map(function(e){return"'"+e+"'"}).join(", "),n="unrecognised field '"+t.str+"', possible fields: "+r;throw new M.QueryParseError(n,t.start,t.end)}e.currentClause.fields=[t.str];var i=e.peekLexeme();if(void 0==i){n="expecting term, found nothing";throw new M.QueryParseError(n,t.start,t.end)}switch(i.type){case M.QueryLexer.TERM:return M.QueryParser.parseTerm;default:n="expecting term, found '"+i.type+"'";throw new M.QueryParseError(n,i.start,i.end)}}},M.QueryParser.parseTerm=function(e){var t=e.consumeLexeme();if(void 0!=t){e.currentClause.term=t.str.toLowerCase(),-1!=t.str.indexOf("*")&&(e.currentClause.usePipeline=!1);var r=e.peekLexeme();if(void 0!=r)switch(r.type){case M.QueryLexer.TERM:return e.nextClause(),M.QueryParser.parseTerm;case M.QueryLexer.FIELD:return e.nextClause(),M.QueryParser.parseField;case M.QueryLexer.EDIT_DISTANCE:return M.QueryParser.parseEditDistance;case M.QueryLexer.BOOST:return M.QueryParser.parseBoost;default:var n="Unexpected lexeme type '"+r.type+"'";throw new M.QueryParseError(n,r.start,r.end)}else e.nextClause()}},M.QueryParser.parseEditDistance=function(e){var t=e.consumeLexeme();if(void 0!=t){var r=parseInt(t.str,10);if(isNaN(r)){var n="edit distance must be numeric";throw new M.QueryParseError(n,t.start,t.end)}e.currentClause.editDistance=r;var i=e.peekLexeme();if(void 0!=i)switch(i.type){case M.QueryLexer.TERM:return e.nextClause(),M.QueryParser.parseTerm;case M.QueryLexer.FIELD:return e.nextClause(),M.QueryParser.parseField;case M.QueryLexer.EDIT_DISTANCE:return M.QueryParser.parseEditDistance;case M.QueryLexer.BOOST:return M.QueryParser.parseBoost;default:n="Unexpected lexeme type '"+i.type+"'";throw new M.QueryParseError(n,i.start,i.end)}else e.nextClause()}},M.QueryParser.parseBoost=function(e){var t=e.consumeLexeme();if(void 0!=t){var r=parseInt(t.str,10);if(isNaN(r)){var n="boost must be numeric";throw new M.QueryParseError(n,t.start,t.end)}e.currentClause.boost=r;var i=e.peekLexeme();if(void 0!=i)switch(i.type){case M.QueryLexer.TERM:return e.nextClause(),M.QueryParser.parseTerm;case M.QueryLexer.FIELD:return e.nextClause(),M.QueryParser.parseField;case M.QueryLexer.EDIT_DISTANCE:return M.QueryParser.parseEditDistance;case M.QueryLexer.BOOST:return M.QueryParser.parseBoost;default:n="Unexpected lexeme type '"+i.type+"'";throw new M.QueryParseError(n,i.start,i.end)}else e.nextClause()}},void 0===(i="function"==typeof(n=function(){return M})?n.call(t,r,t,e):n)||(e.exports=i)}()},function(e,t,r){e.exports={default:r(10),__esModule:!0}},function(e,t,r){"use strict";r.r(t);var n=r(6),i=r.n(n),o=(r(8),r(1)),a=r(5),s=r.n(a),u=void 0;function c(e){var t;u||(t=o.Info.games,u=s()(function(){var e=this;this.ref("id"),o.FIELDS.forEach(function(t){return e.field(t)}),t.forEach(function(e){this.add(e)},this)}));var r={};try{e?u.search(e).forEach(function(e){r[e.ref]=!0}):r=!1}catch(e){r=!1}return{map:r}}self.onmessage=function(e){var t=c(e.data);self.postMessage(i()(t))}},function(e,t,r){},function(e,t){var r=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(9),i=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}}]);