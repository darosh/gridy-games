!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t,n){!function(e){"use strict";var t;(t=e.Shape||(e.Shape={}))[t.Even=0]="Even",t[t.Odd=1]="Odd",t[t.Hexagonal=2]="Hexagonal",t[t.Triangular=3]="Triangular",t[t.Rhombus=4]="Rhombus";var n,r,i,o=Math.sqrt(3),a=Math.sqrt(3)/2,s=Math.sqrt(3)/3,u=Math.sqrt(3)/6,l=Math.sqrt(2),c=Math.sqrt(2)/2,h=Math.sqrt(2)/4,f=Math.PI/180,p=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},v=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},g=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},b=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;p(this,e),this.x=t,this.y=n}return y(e,[{key:"distance",value:function(e){return Math.floor((Math.abs(this.x-e.x)+Math.abs(this.y-e.y))/2)}},{key:"toString",value:function(){return this.value.toString()}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"scale",value:function(t){return new e(this.x*t,this.y*t)}},{key:"cubeLength",value:function(){return Math.floor((Math.abs(this.x)+Math.abs(this.y))/2)}},{key:"value",get:function(){return[this.x,this.y]}}]),e}(),m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;p(this,e),this.x=t,this.y=n}return y(e,null,[{key:"round",value:function(e){var t=Math.round(e.x),n=Math.round(e.y);return new w(t,n)}},{key:"lerp",value:function(t,n,r){return new e(t.x+(n.x-t.x)*r,t.y+(n.y-t.y)*r)}},{key:"line",value:function(t,n){for(var r=t.distance(n),i=[],o=0;o<r+1;o++)i.push(e.round(e.lerp(t,n,1/Math.max(1,r)*o)));return i}}]),y(e,[{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"scale",value:function(t){return new e(this.x*t,this.y*t)}},{key:"toString",value:function(){return this.value.toString()}},{key:"value",get:function(){return[this.x,this.y]}}]),e}(),x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;p(this,e),this.minX=0,this.maxX=0,this.minY=0,this.maxY=0,this.minX=t,this.maxX=n,this.minY=r,this.maxY=i}return y(e,null,[{key:"add",value:function(t,n){return new e(t.minX+n.minX,t.maxX+n.maxX,t.minY+n.minY,t.maxY+n.maxY)}}]),e}();function k(e){var t=new x(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY),n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.x<t.minX&&(t.minX=s.x),s.x>t.maxX&&(t.maxX=s.x),s.y<t.minY&&(t.minY=s.y),s.y>t.maxY&&(t.maxY=s.y)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return t}function _(e){var t=e.tiles.map(function(t){return e.center(t)}),n=k(e.vertices(e.orientation)),r=k(t);return x.add(n,r)}(function(e){e[e.N=-1]="N",e[e.S=1]="S",e[e.W=-2]="W",e[e.E=2]="E"})(n||(n={})),function(e){e[e.N=1]="N",e[e.E=2]="E",e[e.NW=3]="NW",e[e.SW=4]="SW",e[e.S=-1]="S",e[e.W=-2]="W",e[e.SE=-3]="SE",e[e.NE=-4]="NE"}(r||(r={})),function(e){e[e.N=-1]="N",e[e.S=1]="S",e[e.NW=-2]="NW",e[e.SE=2]="SE",e[e.NE=-3]="NE",e[e.SW=3]="SW"}(i||(i={}));var O,T=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;p(this,e),this.x=t,this.y=n,this.z=r}return y(e,[{key:"distance",value:function(e){return Math.floor((Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z))/2)}},{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y,this.z+t.z)}},{key:"scale",value:function(t){return new e(this.x*t,this.y*t,this.z*t)}},{key:"toString",value:function(){return this.value.toString()}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z}},{key:"round",value:function(){return new e(Math.round(this.x),Math.round(this.y),Math.round(this.z))}},{key:"cubeLength",value:function(){return Math.floor((Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z))/2)}},{key:"value",get:function(){return[this.x,this.y,this.z]}}]),e}(),S=function(e){function t(){p(this,t);var e=g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.tiles=[],e}return v(t,e),y(t,[{key:"shift",value:function(){return t.directions[4][1]}},{key:"directions",value:function(){return t.directions}},{key:"add",value:function(e){var n=d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e);return new t(n.x,n.y,n.z)}},{key:"scale",value:function(e){var n=d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"scale",this).call(this,e);return new t(n.x,n.y,n.z)}},{key:"neighbors",value:function(){var e=[],n=!0,r=!1,i=void 0;try{for(var o,a=t.directions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e.push([s[0],this.add(s[1])])}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return e}},{key:"right",value:function(){var e=this.x;return this.x=-this.z,this.z=-this.y,this.y=-e,this}},{key:"left",value:function(){var e=this.z;return this.z=-this.x,this.x=-this.y,this.y=-e,this}},{key:"key",get:function(){return this.toString()}}]),t}(T);S.directions=[[i.NW,new S(1,-1,0)],[i.NE,new S(1,0,-1)],[i.N,new S(0,1,-1)],[i.SE,new S(-1,1,0)],[i.SW,new S(-1,0,1)],[i.S,new S(0,-1,1)]],function(e){e[e.Simple=1]="Simple",e[e.Variable=2]="Variable"}(O||(O={}));var j=function(){function t(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.Shape.Hexagonal,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments[4];p(this,t),this.scaleY=-1,this.angle=-30,this.tileTypes=O.Simple,this.scale=n,this.radius=a*n/2,this.orientation=r,s=s||o,this.x=o,this.y=s,this.shape=i,i===e.Shape.Even&&!1===r?(this.toTile=t.evenQToCube,this.toPoint=t.cubeToEvenQ,this.tiles=t.trapezoidalShape(0,o,0,s,this.toTile)):i===e.Shape.Even&&!0===r?(this.toTile=t.evenRToCube,this.toPoint=t.cubeToEvenR,this.tiles=t.trapezoidalShape(0,o,0,s,this.toTile)):i===e.Shape.Odd&&!1===r?(this.toTile=t.oddQToCube,this.toPoint=t.cubeToOddQ,this.tiles=t.trapezoidalShape(0,o,0,s,this.toTile)):i===e.Shape.Odd&&!0===r?(this.toTile=t.oddRToCube,this.toPoint=t.cubeToOddR,this.tiles=t.trapezoidalShape(0,o,0,s,this.toTile)):i===e.Shape.Hexagonal?(this.toTile=t.twoAxisToCube,this.toPoint=t.cubeToTwoAxis,this.tiles=t.hexagonalShape(o)):i===e.Shape.Triangular?(this.toTile=t.evenQToCube,this.toPoint=t.cubeToEvenQ,this.tiles=t.triangularShape(o)):(this.toTile=t.twoAxisToCube,this.toPoint=t.cubeToTwoAxis,this.tiles=t.trapezoidalShape(0,o,0,s,this.toTile))}return y(t,[{key:"bounds",value:function(){return _(this)}},{key:"vertices",value:function(e,t){var n=[];t=void 0===t?this.scale:t,e=void 0!==e&&this.orientation;for(var r=0;r<6;r++){var i=2*Math.PI*(2*r-(e?1:0))/12;n.push(new m(.5*t*Math.cos(i),.5*t*Math.sin(i)))}return n}},{key:"center",value:function(e){var t=this.scale/2;return(this.orientation?new m(o*e.x+a*e.z,1.5*e.z*this.scaleY):new m(1.5*e.x,(a*e.x+o*e.z)*this.scaleY)).scale(t)}},{key:"position",value:function(e){var t=this.scale/2;(e=e.scale(1/t)).y*=this.scaleY;var n=void 0,r=void 0;return this.orientation?(n=s*e.x+-1/3*e.y,r=2/3*e.y):(n=2/3*e.x,r=-1/3*e.x+s*e.y),new S(Math.round(n),Math.round(-n-r),Math.round(r))}},{key:"tile",value:function(e,t){return this.toTile?this.toTile(new w(e,t)):void 0}}],[{key:"twoAxisToCube",value:function(e){return new S(e.x,-e.y-e.x,e.y)}},{key:"cubeToTwoAxis",value:function(e){return new w(e.x,e.z)}},{key:"twoAxisToCubeXY",value:function(e){return new S(e.x,e.y,-e.x-e.y)}},{key:"cubeToTwoAxisXY",value:function(e){return new w(e.x,e.y)}},{key:"twoAxisToCubeYZ",value:function(e){return new S(-e.x-e.y,e.x,e.y)}},{key:"cubeToTwoAxisYZ",value:function(e){return new w(e.y,e.z)}},{key:"oddQToCube",value:function(e){var t=e.x,n=e.y-(e.x-(1&e.x)>>1);return new S(t,-t-n,n)}},{key:"cubeToOddQ",value:function(e){var t=e.x,n=e.z;return new w(t,n+(t-(1&t)>>1))}},{key:"evenQToCube",value:function(e){var t=e.x,n=e.y-(e.x+(1&e.x)>>1);return new S(t,-t-n,n)}},{key:"cubeToEvenQ",value:function(e){var t=e.x,n=e.z;return new w(t,n+(t+(1&t)>>1))}},{key:"oddRToCube",value:function(e){var t=e.y,n=e.x-(e.y-(1&e.y)>>1);return new S(n,-n-t,t)}},{key:"cubeToOddR",value:function(e){var t=e.x,n=e.z;return new w(t+(n-(1&n)>>1),n)}},{key:"evenRToCube",value:function(e){var t=e.y,n=e.x-(e.y+(1&e.y)>>1);return new S(n,-n-t,t)}},{key:"cubeToEvenR",value:function(e){var t=e.x,n=e.z;return new w(t+(n+(1&n)>>1),n)}},{key:"trapezoidalShape",value:function(e,t,n,r,i){for(var o=[],a=e;a<t;a++)for(var s=n;s<r;s++)o.push(i(new w(a,s)));return o}},{key:"triangularShape",value:function(e){for(var t=[],n=0;n<e;n++)for(var r=0;r<n+1;r++)t.push(new S(r,-n,n-r));return t}},{key:"hexagonalShape",value:function(e){for(var t=[],n=-e;n<e;n++)for(var r=-e;r<e;r++){var i=-n-r;Math.abs(n)<e&&Math.abs(r)<e&&Math.abs(i)<e&&t.push(new S(n,r,i))}return t}},{key:"region",value:function(e,t,n,r,i,o){for(var a=[],s=e;s<=t;s++)for(var u=Math.max(n,-s-o);u<=Math.min(r,-s-i);u++){var l=-s-u;a.push(new S(s,u,l))}return a}}]),t}();j.shapes=[e.Shape.Hexagonal,e.Shape.Rhombus,e.Shape.Even,e.Shape.Odd,e.Shape.Triangular];var E=function(e){function t(e,n,r,i,o){p(this,t);var a=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,i,o));return a.angle=0,a.radius=h*e,a}return v(t,e),y(t,[{key:"vertices",value:function(e,t){t=void 0===t?this.scale:t;for(var n=[],r=0;r<4;r++){var i=2*Math.PI*(2*r-1)/8;n.push(new m(.5*t*Math.cos(i),.5*t*Math.sin(i)))}return n}},{key:"center",value:function(e){var t=this.scale/2;return(this.orientation?new m(l*e.x+c*e.z,l*e.z*this.scaleY):new m(l*e.x,(c*e.x+l*e.z)*this.scaleY)).scale(t)}}]),t}(j),P=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];p(this,t);var i=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.s=r,i}return v(t,e),y(t,[{key:"toString",value:function(){return this.value.toString()}},{key:"equals",value:function(e){return this.s===e.s&&d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"equals",this).call(this,e)}},{key:"shift",value:function(){return t.directions1[0][1]}},{key:"directions",value:function(){return this.s?t.directions2:t.directions1}},{key:"opposite",value:function(e){return t.opposites[this.s.toString()][e]}},{key:"add",value:function(e){var n=d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e);return new t(n.x,n.y,e.s)}},{key:"scale",value:function(e){var n=d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"scale",this).call(this,e);return new t(n.x,n.y)}},{key:"neighbors",value:function(){for(var e=[],n=0;n<3;n++)e.push([t.directions1[n][0],this.add(this.s?t.directions2[n][1]:t.directions1[n][1])]);return e}},{key:"key",get:function(){return this.toString()}},{key:"value",get:function(){return[this.x,this.y,this.s]}}]),t}(w);P.directions1=[[1,new P(0,0,!0)],[2,new P(-1,0,!0)],[3,new P(0,-1,!0)]],P.directions2=[[1,new P(0,1,!1)],[2,new P(0,0,!1)],[3,new P(1,0,!1)]],P.opposites={false:{1:3,2:1,3:2},true:{1:2,2:3,3:1}};var M=function(){function t(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.Shape.Triangular,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;p(this,t),this.scaleY=-1,this.angle=-60,this.tileTypes=O.Variable,this.scale=n,this.radius=u*n,this.orientation=r,this.x=o,this.y=a,i===e.Shape.Rhombus?(this.tiles=this.rhombus(),this.orientation=!1):i===e.Shape.Hexagonal?(this.tiles=this.hexagonalShape(o),this.orientation=!1):(this.tiles=this.triangle(),this.orientation=!1),this.toPoint=function(e){return new w(2*e.x+(e.s?1:0),e.y)},this.toTile=function(e){return new P(e.x/2-e.x%2,e.y)}}return y(t,[{key:"bounds",value:function(){return _(this)}},{key:"center",value:function(e){return new m((2*e.x+(e.s?1:0)+e.y)*this.scale/2,this.scale*(e.y*a+(e.s?0:-u))*this.scaleY)}},{key:"vertices",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t=void 0===t?this.scale:t,(this.scaleY>0?0===n:0!==n)?[new m(0,-t*s),new m(-t/2,t*u),new m(t/2,t*u)]:[new m(0,t*(u+u)),new m(-t/2,-t*(s-u)),new m(t/2,-t*(s-u))]}},{key:"position",value:function(e){return new P(Math.round(e.x),Math.round(e.y),!1)}},{key:"getTileType",value:function(e){return e.s?0:1}},{key:"tile",value:function(e,t){}},{key:"rhombus",value:function(){for(var e=[],t=0;t<this.x;t++)for(var n=0;n<this.y;n++)e.push(new P(t,n,!1)),e.push(new P(t,n,!0));return e}},{key:"triangle",value:function(){for(var e=[],t=0;t<this.x;t++)for(var n=0;n<this.x-t;n++)e.push(new P(n,t,!1)),n<this.x-t-1&&e.push(new P(n,t,!0));return e}},{key:"hexagonalShape",value:function(e){for(var t=[],n=-e;n<e;n++)for(var r=-e;r<e;r++)Math.abs(-n-r)<=e&&n+r<e&&t.push(new P(n,r,!1)),Math.abs(-n-r)-1<=e&&n+r+1<e&&t.push(new P(n,r,!0));return t}}]),t}();M.shapes=[e.Shape.Hexagonal,e.Shape.Rhombus,e.Shape.Triangular];var R=function(){function e(t,n,r){p(this,e),this.x=t,this.y=n,this.z=r}return y(e,null,[{key:"round",value:function(e){var t=Math.round(e.x),n=Math.round(e.y),r=Math.round(e.z),i=Math.abs(t-e.x),o=Math.abs(n-e.y),a=Math.abs(r-e.z);return i>o&&i>a?t=-n-r:o>a?n=-t-r:r=-t-n,new T(t,n,r)}},{key:"lerp",value:function(t,n,r){return new e(t.x+(n.x-t.x)*r,t.y+(n.y-t.y)*r,t.z+(n.z-t.z)*r)}},{key:"line",value:function(t,n){for(var r=t.distance(n),i=[],o=0;o<r+1;o++)i.push(e.round(e.lerp(t,n,1/Math.max(1,r)*o)));return i}}]),y(e,[{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z}},{key:"toString",value:function(){return this.value.toString()}},{key:"round",value:function(){return e.round(this)}},{key:"value",get:function(){return[this.x,this.y,this.z]}}]),e}(),C=function(e){function t(){p(this,t);var e=g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.tiles=[],e}return v(t,e),y(t,[{key:"shift",value:function(){return new t(-1,1,0)}},{key:"directions",value:function(){return t.directions}},{key:"add",value:function(e){var n=this.z||e.z,r=this.x+e.x;return new t(r=((r%=n)+n)%n,this.y+e.y,n)}},{key:"scale",value:function(e){return new t(this.x,this.y*e,this.z)}},{key:"cubeLength",value:function(){return Math.floor(Math.abs(this.y))}},{key:"neighbors",value:function(){var e=[],n=!0,r=!1,i=void 0;try{for(var o,a=t.directions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e.push([s[0],this.add(s[1])])}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return e}},{key:"value",get:function(){return[this.x,this.y]}},{key:"key",get:function(){return this.toString()}}]),t}(T);C.directions=[[n.N,new C(0,-1,0)],[n.S,new C(0,1,0)],[n.E,new C(1,0,0)],[n.W,new C(-1,0,0)]];var G=function(){function t(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.Shape.Even,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1),o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=this,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:C,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;p(this,t),this.scaleY=-1,this.angle=-0,this.tileTypes=O.Simple,this.irregular=!0,this.scale=n,this.radius=n/2,this.orientation=r,this.x=i,this.y=o,this.startY=u,this.tileCtor=s;for(var l=[],c=0;c<i;c++)for(var h=u;h<o;h++)l.push(new s(c,h,i));this.tiles=l,this.toTile=function(e){return new a.tileCtor(e.x,e.y)},this.toPoint=function(e){return new w(e.x,e.y)}}return y(t,[{key:"bounds",value:function(){var e=this.scale*this.y;return new x(-e,e,-e,e)}},{key:"vertices",value:function(e,t,n,r){var i=r,o=[],a=this.center(i);return o.push(this.center(new R(i.x-.5,i.y-.5,i.z))),o.push(this.center(new R(i.x+.5,i.y-.5,i.z))),o.push(this.center(new R(i.x+.5,i.y+.5,i.z))),o.push(this.center(new R(i.x-.5,i.y+.5,i.z))),o.map(function(e){return new m(e.x-a.x,e.y-a.y)})}},{key:"path",value:function(e){var t=this.vertices(!1,0,0,e),n=(this.center(e),this.scale*e.y),r=this.scale*(e.y+1);return"M "+t[0].x+" "+t[0].y+" A "+n+" "+n+" 0 0 0 "+t[1].x+" "+t[1].y+" L "+t[2].x+" "+t[2].y+" A "+r+" "+r+" 0 0 1 "+t[3].x+" "+t[3].y+" Z"}},{key:"position",value:function(e){return new this.tileCtor(Math.round(e.x/this.scale),Math.round(e.y/this.scale*this.scaleY))}},{key:"tile",value:function(e,t){return this.toTile(new w(e,t))}},{key:"center",value:function(e){var t=void 0;return this.orientation?(t=e.x+.5,t=(t=((t%=e.z)+e.z)%e.z)*f*(360/e.z)):t=e.x*f*(360/e.z),new m((e.y+.5)*this.scale*Math.sin(t),(e.y+.5)*this.scale*Math.cos(t))}}]),t}(),I=function(e){function t(){return p(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),y(t,[{key:"shift",value:function(){return new t(-1,1)}},{key:"directions",value:function(){return t.directions}},{key:"add",value:function(e){var n=d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e);return new t(n.x,n.y)}},{key:"scale",value:function(e){var n=d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"scale",this).call(this,e);return new t(n.x,n.y)}},{key:"neighbors",value:function(){var e=[],n=!0,r=!1,i=void 0;try{for(var o,a=t.directions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e.push([s[0],this.add(s[1])])}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return e}},{key:"key",get:function(){return this.toString()}}]),t}(w);I.directions=[[n.N,new I(0,-1)],[n.E,new I(1,0)],[n.S,new I(0,1)],[n.W,new I(-1,0)]];var Q=function(){function t(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.Shape.Even,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1),o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=this,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:I,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;p(this,t),this.scaleY=-1,this.angle=-45,this.tileTypes=O.Simple,this.scale=n,this.radius=n/2,this.orientation=r,this.x=i,this.y=o,this.startY=o,this.tileCtor=s;for(var l=[],c=0;c<i;c++)for(var h=u;h<o;h++)l.push(new s(c,h));this.tiles=l,this.toTile=function(e){return new a.tileCtor(e.x,e.y)},this.toPoint=function(e){return new w(e.x,e.y)}}return y(t,[{key:"bounds",value:function(){return _(this)}},{key:"center",value:function(e){return this.orientation?new m(e.x*this.scale/l+e.y*this.scale*this.scaleY/l,e.y*this.scale*this.scaleY/l-e.x*this.scale/l):new m(e.x*this.scale,e.y*this.scale*this.scaleY)}},{key:"vertices",value:function(e,t){var n=[];return t=void 0===t?this.scale:t,(e=void 0!==e&&this.orientation)?(t*=l,n.push(new m(-t/2,0)),n.push(new m(0,-t/2)),n.push(new m(t/2,0)),n.push(new m(0,t/2))):(n.push(new m(-t/2,-t/2)),n.push(new m(-t/2,t/2)),n.push(new m(t/2,t/2)),n.push(new m(t/2,-t/2))),n}},{key:"position",value:function(e){return new this.tileCtor(Math.round(e.x/this.scale),Math.round(e.y/this.scale*this.scaleY))}},{key:"tile",value:function(e,t){return this.toTile(new w(e,t))}}]),t}(),N=function(e){function t(){p(this,t);var e=g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.tiles=[],e}return v(t,e),y(t,[{key:"shift",value:function(){return new t(-1,1,0)}},{key:"directions",value:function(){return t.directions}},{key:"add",value:function(e){var n=this.z||e.z,r=this.x+e.x;return new t(r=((r%=n)+n)%n,this.y+e.y,n)}},{key:"scale",value:function(e){return new t(this.x,this.y*e,this.z)}},{key:"cubeLength",value:function(){return Math.floor(Math.abs(this.y))}},{key:"neighbors",value:function(){var e=[],n=!0,r=!1,i=void 0;try{for(var o,a=t.directions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e.push([s[0],this.add(s[1])])}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return e}},{key:"value",get:function(){return[this.x,this.y]}},{key:"key",get:function(){return this.toString()}}]),t}(T);N.directions=[[r.N,new N(0,-1,0)],[r.E,new N(1,0,0)],[r.NW,new N(-1,-1,0)],[r.SW,new N(1,-1,0)],[r.S,new N(0,1,0)],[r.W,new N(-1,0,0)],[r.SE,new N(1,1,0)],[r.NE,new N(-1,1,0)]];var L=function(e){function t(){return p(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),y(t,[{key:"shift",value:function(){return new t(-1,1)}},{key:"directions",value:function(){return t.directions}},{key:"sides",value:function(){return t.sides}},{key:"add",value:function(e){var n=d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e);return new t(n.x,n.y)}},{key:"scale",value:function(e){var n=d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"scale",this).call(this,e);return new t(n.x,n.y)}},{key:"neighbors",value:function(){var e=[],n=!0,r=!1,i=void 0;try{for(var o,a=t.directions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e.push([s[0],this.add(s[1])])}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return e}},{key:"sideNeighbors",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=I.directions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;e.push([a[0],this.add(a[1])])}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return e}},{key:"key",get:function(){return this.toString()}}]),t}(w);function z(e){return new e.constructor}function F(e,t){return t.filter(function(t){return e.has(t[1].key)}).map(function(t){return[t[0],e.get(t[1].key)]})}function A(e){return new Map(e.map(function(e){return[e.key,e]}))}L.directions=[[r.N,new L(0,-1)],[r.E,new L(1,0)],[r.NW,new L(-1,-1)],[r.SW,new L(1,-1)],[r.S,new L(0,1)],[r.W,new L(-1,0)],[r.SE,new L(1,1)],[r.NE,new L(-1,1)]],L.sides=[L.directions[0],L.directions[1],L.directions[4],L.directions[5]];var H=function(){function e(t,n,r,i,o){p(this,e),this.cost={},this.previous={},this.max=0;var a=t.value?[t]:t;this.start=a[0];var s=i?A(i):void 0,u=o?A(o):void 0,l=!0,c=!1,h=void 0;try{for(var f,y=a[Symbol.iterator]();!(l=(f=y.next()).done);l=!0){var d=f.value;this.cost[d.key]=0,this.previous[d.key]=null}}catch(e){c=!0,h=e}finally{try{!l&&y.return&&y.return()}finally{if(c)throw h}}for(var v=[a],g=0;g<n&&v[g].length>0;g++){v[g+1]=[];var b=!0,w=!1,m=void 0;try{for(var x,k=v[g][Symbol.iterator]();!(b=(x=k.next()).done);b=!0){var _=x.value,O=_.neighbors(),T=!0,S=!1,j=void 0;try{for(var E,P=O[Symbol.iterator]();!(T=(E=P.next()).done);T=!0){var M=E.value,R=M[1];u&&!u.has(R.key)||void 0===this.cost[R.key]&&(s&&!s.has(R.key)||!i)&&R.cubeLength()<=r&&(this.cost[R.key]=g+1,this.max=Math.max(this.max,g+1),this.previous[R.key]=_,v[g+1].push(R))}}catch(e){S=!0,j=e}finally{try{!T&&P.return&&P.return()}finally{if(S)throw j}}}}catch(e){w=!0,m=e}finally{try{!b&&k.return&&k.return()}finally{if(w)throw m}}}}return y(e,[{key:"path",value:function(e){for(var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.value?[e]:e,i=(n?Math.max:Math.min).apply(null,r.map(function(e){return t.cost[e.key]}).filter(function(e){return void 0!==e})),o=[],a=r.find(function(e){return t.cost[e.key]===i})||null;a;)o.push(a),a=a.equals(this.start)?null:this.previous[a.key];return o}}]),e}();function W(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];n&&r.push(e.add(z(e)));for(var i=e.sideNeighbors?e.sideNeighbors():e.neighbors(),o=6===i.length?1:2,a=n?1:t;a<=t;a++)for(var s=e.shift().scale(a),u=0;u<i.length;u++)for(var l=0;l<a*o;l++)r.push(s.add(e)),s=(s.sideNeighbors?s.sideNeighbors():s.neighbors())[u][1];return r}e.BrickGrid=E,e.HexagonalGrid=j,e.TriangularGrid=M,e.RadialGrid=G,e.RectangularGrid=Q,e.Position=w,e.HexagonalTile=S,e.Radial8Tile=N,e.RadialTile=C,e.Rectangular8Tile=L,e.RectangularTile=I,e.TriangularTile=P,e.Float2=m,e.Float3=R,e.Integer2=w,e.Integer3=T,e.Search=H,e.normalize=function(e){var t=function(e){var t=e.tiles.map(function(t){return e.toPoint(t)});return new w(Math.min.apply(null,t.map(function(e){return e.x})),Math.min.apply(null,t.map(function(e){return e.y})))}(e);t.x=-t.x,t.y=-t.y,e.tiles=e.tiles.map(function(n){return e.toTile?e.toTile(e.toPoint(n).add(t)):[]})},e.translate=function(e,t){e.tiles=e.tiles.map(function(n){return e.toTile?e.toTile(e.toPoint(n).add(t)):[]})},e.rotate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.tiles.forEach(function(e){for(var n=t;n>0;)e.right(),n--;for(;n<0;)e.left(),n++})},e.enumerate=function(e){var t={},n=Object.keys(e),r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,l=parseInt(u,10);l>=0&&(t[e[u]]=l)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return t},e.instance=z,e.toMap=A,e.toArray=function(e){return Array.from(e.values())},e.link=function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;a.links=new Map;var s=!0,u=!1,l=void 0;try{for(var c,h=a.neighbors()[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var f=c.value;e.has(f[1].key)&&a.links.set(f[0],e.get(f[1].key))}}catch(e){u=!0,l=e}finally{try{!s&&h.return&&h.return()}finally{if(u)throw l}}}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}},e.axes=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,c=l.value,h=Math.abs(c[t%c.length])%2==1;h===n&&r.push(l)}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}return r},e.intersect=function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,l=!0,c=!1,h=void 0;try{for(var f,p=t[Symbol.iterator]();!(l=(f=p.next()).done);l=!0){var y=f.value;u.equals(y)&&n.push(u)}}catch(e){c=!0,h=e}finally{try{!l&&p.return&&p.return()}finally{if(c)throw h}}}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n},e.circle=function(e,t){return W(e,t,!1)},e.spiral=W,e.border=function(e){var t=A(e);return e.filter(function(e){return F(t,e.neighbors()).length<e.directions().length})},e.outline=function(e,t){var n=new Map,r=A(e),i=t?A(t):void 0;return e.forEach(function(e){var t=new Map(F(r,e.neighbors())),o=new Map(e.directions());if(t.size<o.size){var a=!0,s=!1,u=void 0;try{for(var l,c=o[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var h=l.value,f=b(h,2),p=f[0],y=f[1];if(!t.has(p)){var d=e.add(y);i?n.set(d.key,i.get(d.key)):n.set(d.key,d)}}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}}),Array.from(n.values())},e.connections=function(e){var t=[],n=A(e),r=function(e){var r=new Map(F(n,e.neighbors())),i=Array.from(r.keys()).filter(function(t){return t>0&&!r.has(e.opposite?e.opposite(t):-t)}),o=!0,a=!1,s=void 0;try{for(var u,l=i[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){for(var c=u.value,h=[],f=e;f;)h.push(f),f=new Map(F(n,f.neighbors())).get(c);t.push(h)}}catch(e){a=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw s}}},i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;r(l)}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}return t},Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t){var n=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){e.exports=!n(2)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(32),i=n(8);e.exports=function(e){return r(i(e))}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r,i;!function(){var o,a,s,u,l,c,h,f,p,y,d,v,g,b,w,m,x,k,_,O,T,S,j,E,P,M,R=function(e){var t=new R.Builder;return t.pipeline.add(R.trimmer,R.stopWordFilter,R.stemmer),t.searchPipeline.add(R.stemmer),e.call(t,t),t.build()};R.version="2.1.6",R.utils={},R.utils.warn=(o=this,function(e){o.console&&console.warn&&console.warn(e)}),R.utils.asString=function(e){return void 0===e||null===e?"":e.toString()},R.FieldRef=function(e,t,n){this.docRef=e,this.fieldName=t,this._stringValue=n},R.FieldRef.joiner="/",R.FieldRef.fromString=function(e){var t=e.indexOf(R.FieldRef.joiner);if(-1===t)throw"malformed field ref string";var n=e.slice(0,t),r=e.slice(t+1);return new R.FieldRef(r,n,e)},R.FieldRef.prototype.toString=function(){return void 0==this._stringValue&&(this._stringValue=this.fieldName+R.FieldRef.joiner+this.docRef),this._stringValue},R.idf=function(e,t){var n=0;for(var r in e)"_index"!=r&&(n+=Object.keys(e[r]).length);var i=(t-n+.5)/(n+.5);return Math.log(1+Math.abs(i))},R.Token=function(e,t){this.str=e||"",this.metadata=t||{}},R.Token.prototype.toString=function(){return this.str},R.Token.prototype.update=function(e){return this.str=e(this.str,this.metadata),this},R.Token.prototype.clone=function(e){return e=e||function(e){return e},new R.Token(e(this.str,this.metadata),this.metadata)},R.tokenizer=function(e){if(null==e||void 0==e)return[];if(Array.isArray(e))return e.map(function(e){return new R.Token(R.utils.asString(e).toLowerCase())});for(var t=e.toString().trim().toLowerCase(),n=t.length,r=[],i=0,o=0;i<=n;i++){var a=i-o;(t.charAt(i).match(R.tokenizer.separator)||i==n)&&(a>0&&r.push(new R.Token(t.slice(o,i),{position:[o,a],index:r.length})),o=i+1)}return r},R.tokenizer.separator=/[\s\-]+/,R.Pipeline=function(){this._stack=[]},R.Pipeline.registeredFunctions=Object.create(null),R.Pipeline.registerFunction=function(e,t){t in this.registeredFunctions&&R.utils.warn("Overwriting existing registered function: "+t),e.label=t,R.Pipeline.registeredFunctions[e.label]=e},R.Pipeline.warnIfFunctionNotRegistered=function(e){e.label&&e.label in this.registeredFunctions||R.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",e)},R.Pipeline.load=function(e){var t=new R.Pipeline;return e.forEach(function(e){var n=R.Pipeline.registeredFunctions[e];if(!n)throw new Error("Cannot load unregistered function: "+e);t.add(n)}),t},R.Pipeline.prototype.add=function(){Array.prototype.slice.call(arguments).forEach(function(e){R.Pipeline.warnIfFunctionNotRegistered(e),this._stack.push(e)},this)},R.Pipeline.prototype.after=function(e,t){R.Pipeline.warnIfFunctionNotRegistered(t);var n=this._stack.indexOf(e);if(-1==n)throw new Error("Cannot find existingFn");n+=1,this._stack.splice(n,0,t)},R.Pipeline.prototype.before=function(e,t){R.Pipeline.warnIfFunctionNotRegistered(t);var n=this._stack.indexOf(e);if(-1==n)throw new Error("Cannot find existingFn");this._stack.splice(n,0,t)},R.Pipeline.prototype.remove=function(e){var t=this._stack.indexOf(e);-1!=t&&this._stack.splice(t,1)},R.Pipeline.prototype.run=function(e){for(var t=this._stack.length,n=0;n<t;n++){for(var r=this._stack[n],i=[],o=0;o<e.length;o++){var a=r(e[o],o,e);if(void 0!==a&&""!==a)if(a instanceof Array)for(var s=0;s<a.length;s++)i.push(a[s]);else i.push(a)}e=i}return e},R.Pipeline.prototype.runString=function(e){var t=new R.Token(e);return this.run([t]).map(function(e){return e.toString()})},R.Pipeline.prototype.reset=function(){this._stack=[]},R.Pipeline.prototype.toJSON=function(){return this._stack.map(function(e){return R.Pipeline.warnIfFunctionNotRegistered(e),e.label})},R.Vector=function(e){this._magnitude=0,this.elements=e||[]},R.Vector.prototype.positionForIndex=function(e){if(0==this.elements.length)return 0;for(var t=0,n=this.elements.length/2,r=n-t,i=Math.floor(r/2),o=this.elements[2*i];r>1&&(o<e&&(t=i),o>e&&(n=i),o!=e);)r=n-t,i=t+Math.floor(r/2),o=this.elements[2*i];return o==e?2*i:o>e?2*i:o<e?2*(i+1):void 0},R.Vector.prototype.insert=function(e,t){this.upsert(e,t,function(){throw"duplicate index"})},R.Vector.prototype.upsert=function(e,t,n){this._magnitude=0;var r=this.positionForIndex(e);this.elements[r]==e?this.elements[r+1]=n(this.elements[r+1],t):this.elements.splice(r,0,e,t)},R.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var e=0,t=this.elements.length,n=1;n<t;n+=2){var r=this.elements[n];e+=r*r}return this._magnitude=Math.sqrt(e)},R.Vector.prototype.dot=function(e){for(var t=0,n=this.elements,r=e.elements,i=n.length,o=r.length,a=0,s=0,u=0,l=0;u<i&&l<o;)(a=n[u])<(s=r[l])?u+=2:a>s?l+=2:a==s&&(t+=n[u+1]*r[l+1],u+=2,l+=2);return t},R.Vector.prototype.similarity=function(e){return this.dot(e)/(this.magnitude()*e.magnitude())},R.Vector.prototype.toArray=function(){for(var e=new Array(this.elements.length/2),t=1,n=0;t<this.elements.length;t+=2,n++)e[n]=this.elements[t];return e},R.Vector.prototype.toJSON=function(){return this.elements},R.stemmer=(a={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},s={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},u="[aeiouy]",l="[^aeiou][^aeiouy]*",c=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),h=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),f=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$"),p=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy]"),y=/^(.+?)(ss|i)es$/,d=/^(.+?)([^s])s$/,v=/^(.+?)eed$/,g=/^(.+?)(ed|ing)$/,b=/.$/,w=/(at|bl|iz)$/,m=new RegExp("([^aeiouylsz])\\1$"),x=new RegExp("^"+l+u+"[^aeiouwxy]$"),k=/^(.+?[^aeiou])y$/,_=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,O=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,T=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,S=/^(.+?)(s|t)(ion)$/,j=/^(.+?)e$/,E=/ll$/,P=new RegExp("^"+l+u+"[^aeiouwxy]$"),M=function(e){var t,n,r,i,o,u,l;if(e.length<3)return e;if("y"==(r=e.substr(0,1))&&(e=r.toUpperCase()+e.substr(1)),o=d,(i=y).test(e)?e=e.replace(i,"$1$2"):o.test(e)&&(e=e.replace(o,"$1$2")),o=g,(i=v).test(e)){var M=i.exec(e);(i=c).test(M[1])&&(i=b,e=e.replace(i,""))}else if(o.test(e)){t=(M=o.exec(e))[1],(o=p).test(t)&&(u=m,l=x,(o=w).test(e=t)?e+="e":u.test(e)?(i=b,e=e.replace(i,"")):l.test(e)&&(e+="e"))}(i=k).test(e)&&(e=(t=(M=i.exec(e))[1])+"i");(i=_).test(e)&&(t=(M=i.exec(e))[1],n=M[2],(i=c).test(t)&&(e=t+a[n]));(i=O).test(e)&&(t=(M=i.exec(e))[1],n=M[2],(i=c).test(t)&&(e=t+s[n]));if(o=S,(i=T).test(e))t=(M=i.exec(e))[1],(i=h).test(t)&&(e=t);else if(o.test(e)){t=(M=o.exec(e))[1]+M[2],(o=h).test(t)&&(e=t)}(i=j).test(e)&&(t=(M=i.exec(e))[1],o=f,u=P,((i=h).test(t)||o.test(t)&&!u.test(t))&&(e=t));return o=h,(i=E).test(e)&&o.test(e)&&(i=b,e=e.replace(i,"")),"y"==r&&(e=r.toLowerCase()+e.substr(1)),e},function(e){return e.update(M)}),R.Pipeline.registerFunction(R.stemmer,"stemmer"),R.generateStopWordFilter=function(e){var t=e.reduce(function(e,t){return e[t]=t,e},{});return function(e){if(e&&t[e.toString()]!==e.toString())return e}},R.stopWordFilter=R.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),R.Pipeline.registerFunction(R.stopWordFilter,"stopWordFilter"),R.trimmer=function(e){return e.update(function(e){return e.replace(/^\W+/,"").replace(/\W+$/,"")})},R.Pipeline.registerFunction(R.trimmer,"trimmer"),R.TokenSet=function(){this.final=!1,this.edges={},this.id=R.TokenSet._nextId,R.TokenSet._nextId+=1},R.TokenSet._nextId=1,R.TokenSet.fromArray=function(e){for(var t=new R.TokenSet.Builder,n=0,r=e.length;n<r;n++)t.insert(e[n]);return t.finish(),t.root},R.TokenSet.fromClause=function(e){return"editDistance"in e?R.TokenSet.fromFuzzyString(e.term,e.editDistance):R.TokenSet.fromString(e.term)},R.TokenSet.fromFuzzyString=function(e,t){for(var n=new R.TokenSet,r=[{node:n,editsRemaining:t,str:e}];r.length;){var i,o,a,s=r.pop();if(s.str.length>0)(o=s.str.charAt(0))in s.node.edges?i=s.node.edges[o]:(i=new R.TokenSet,s.node.edges[o]=i),1==s.str.length?i.final=!0:r.push({node:i,editsRemaining:s.editsRemaining,str:s.str.slice(1)});if(s.editsRemaining>0&&s.str.length>1)(o=s.str.charAt(1))in s.node.edges?a=s.node.edges[o]:(a=new R.TokenSet,s.node.edges[o]=a),s.str.length<=2?a.final=!0:r.push({node:a,editsRemaining:s.editsRemaining-1,str:s.str.slice(2)});if(s.editsRemaining>0&&1==s.str.length&&(s.node.final=!0),s.editsRemaining>0&&s.str.length>=1){if("*"in s.node.edges)var u=s.node.edges["*"];else{u=new R.TokenSet;s.node.edges["*"]=u}1==s.str.length?u.final=!0:r.push({node:u,editsRemaining:s.editsRemaining-1,str:s.str.slice(1)})}if(s.editsRemaining>0){if("*"in s.node.edges)var l=s.node.edges["*"];else{l=new R.TokenSet;s.node.edges["*"]=l}0==s.str.length?l.final=!0:r.push({node:l,editsRemaining:s.editsRemaining-1,str:s.str})}if(s.editsRemaining>0&&s.str.length>1){var c,h=s.str.charAt(0),f=s.str.charAt(1);f in s.node.edges?c=s.node.edges[f]:(c=new R.TokenSet,s.node.edges[f]=c),1==s.str.length?c.final=!0:r.push({node:c,editsRemaining:s.editsRemaining-1,str:h+s.str.slice(2)})}}return n},R.TokenSet.fromString=function(e){for(var t=new R.TokenSet,n=t,r=!1,i=0,o=e.length;i<o;i++){var a=e[i],s=i==o-1;if("*"==a)r=!0,t.edges[a]=t,t.final=s;else{var u=new R.TokenSet;u.final=s,t.edges[a]=u,t=u,r&&(t.edges["*"]=n)}}return n},R.TokenSet.prototype.toArray=function(){for(var e=[],t=[{prefix:"",node:this}];t.length;){var n=t.pop(),r=Object.keys(n.node.edges),i=r.length;n.node.final&&e.push(n.prefix);for(var o=0;o<i;o++){var a=r[o];t.push({prefix:n.prefix.concat(a),node:n.node.edges[a]})}}return e},R.TokenSet.prototype.toString=function(){if(this._str)return this._str;for(var e=this.final?"1":"0",t=Object.keys(this.edges).sort(),n=t.length,r=0;r<n;r++){var i=t[r];e=e+i+this.edges[i].id}return e},R.TokenSet.prototype.intersect=function(e){for(var t=new R.TokenSet,n=void 0,r=[{qNode:e,output:t,node:this}];r.length;){n=r.pop();for(var i=Object.keys(n.qNode.edges),o=i.length,a=Object.keys(n.node.edges),s=a.length,u=0;u<o;u++)for(var l=i[u],c=0;c<s;c++){var h=a[c];if(h==l||"*"==l){var f=n.node.edges[h],p=n.qNode.edges[l],y=f.final&&p.final,d=void 0;h in n.output.edges?(d=n.output.edges[h]).final=d.final||y:((d=new R.TokenSet).final=y,n.output.edges[h]=d),r.push({qNode:p,output:d,node:f})}}}return t},R.TokenSet.Builder=function(){this.previousWord="",this.root=new R.TokenSet,this.uncheckedNodes=[],this.minimizedNodes={}},R.TokenSet.Builder.prototype.insert=function(e){var t,n=0;if(e<this.previousWord)throw new Error("Out of order word insertion");for(var r=0;r<e.length&&r<this.previousWord.length&&e[r]==this.previousWord[r];r++)n++;this.minimize(n),t=0==this.uncheckedNodes.length?this.root:this.uncheckedNodes[this.uncheckedNodes.length-1].child;for(r=n;r<e.length;r++){var i=new R.TokenSet,o=e[r];t.edges[o]=i,this.uncheckedNodes.push({parent:t,char:o,child:i}),t=i}t.final=!0,this.previousWord=e},R.TokenSet.Builder.prototype.finish=function(){this.minimize(0)},R.TokenSet.Builder.prototype.minimize=function(e){for(var t=this.uncheckedNodes.length-1;t>=e;t--){var n=this.uncheckedNodes[t],r=n.child.toString();r in this.minimizedNodes?n.parent.edges[n.char]=this.minimizedNodes[r]:(n.child._str=r,this.minimizedNodes[r]=n.child),this.uncheckedNodes.pop()}},R.Index=function(e){this.invertedIndex=e.invertedIndex,this.fieldVectors=e.fieldVectors,this.tokenSet=e.tokenSet,this.fields=e.fields,this.pipeline=e.pipeline},R.Index.prototype.search=function(e){return this.query(function(t){new R.QueryParser(e,t).parse()})},R.Index.prototype.query=function(e){var t=new R.Query(this.fields),n=Object.create(null),r=Object.create(null),i=Object.create(null);e.call(t,t);for(var o=0;o<t.clauses.length;o++){var a=t.clauses[o],s=null;s=a.usePipeline?this.pipeline.runString(a.term):[a.term];for(var u=0;u<s.length;u++){var l=s[u];a.term=l;for(var c=R.TokenSet.fromClause(a),h=this.tokenSet.intersect(c).toArray(),f=0;f<h.length;f++)for(var p=h[f],y=this.invertedIndex[p],d=y._index,v=0;v<a.fields.length;v++){var g=a.fields[v],b=y[g],w=Object.keys(b),m=p+"/"+g;if(void 0===r[g]&&(r[g]=new R.Vector),r[g].upsert(d,1*a.boost,function(e,t){return e+t}),!i[m]){for(var x=0;x<w.length;x++){var k,_=w[x],O=new R.FieldRef(_,g),T=b[_];void 0===(k=n[O])?n[O]=new R.MatchData(p,g,T):k.add(p,g,T)}i[m]=!0}}}}var S=Object.keys(n),j=[],E=Object.create(null);for(o=0;o<S.length;o++){var P,M=R.FieldRef.fromString(S[o]),C=M.docRef,G=this.fieldVectors[M],I=r[M.fieldName].similarity(G);if(void 0!==(P=E[C]))P.score+=I,P.matchData.combine(n[M]);else{var Q={ref:C,score:I,matchData:n[M]};E[C]=Q,j.push(Q)}}return j.sort(function(e,t){return t.score-e.score})},R.Index.prototype.toJSON=function(){var e=Object.keys(this.invertedIndex).sort().map(function(e){return[e,this.invertedIndex[e]]},this),t=Object.keys(this.fieldVectors).map(function(e){return[e,this.fieldVectors[e].toJSON()]},this);return{version:R.version,fields:this.fields,fieldVectors:t,invertedIndex:e,pipeline:this.pipeline.toJSON()}},R.Index.load=function(e){var t={},n={},r=e.fieldVectors,i={},o=e.invertedIndex,a=new R.TokenSet.Builder,s=R.Pipeline.load(e.pipeline);e.version!=R.version&&R.utils.warn("Version mismatch when loading serialised index. Current version of lunr '"+R.version+"' does not match serialized index '"+e.version+"'");for(var u=0;u<r.length;u++){var l=(h=r[u])[0],c=h[1];n[l]=new R.Vector(c)}for(u=0;u<o.length;u++){var h,f=(h=o[u])[0],p=h[1];a.insert(f),i[f]=p}return a.finish(),t.fields=e.fields,t.fieldVectors=n,t.invertedIndex=i,t.tokenSet=a.root,t.pipeline=s,new R.Index(t)},R.Builder=function(){this._ref="id",this._fields=[],this.invertedIndex=Object.create(null),this.fieldTermFrequencies={},this.fieldLengths={},this.tokenizer=R.tokenizer,this.pipeline=new R.Pipeline,this.searchPipeline=new R.Pipeline,this.documentCount=0,this._b=.75,this._k1=1.2,this.termIndex=0,this.metadataWhitelist=[]},R.Builder.prototype.ref=function(e){this._ref=e},R.Builder.prototype.field=function(e){this._fields.push(e)},R.Builder.prototype.b=function(e){this._b=e<0?0:e>1?1:e},R.Builder.prototype.k1=function(e){this._k1=e},R.Builder.prototype.add=function(e){var t=e[this._ref];this.documentCount+=1;for(var n=0;n<this._fields.length;n++){var r=this._fields[n],i=e[r],o=this.tokenizer(i),a=this.pipeline.run(o),s=new R.FieldRef(t,r),u=Object.create(null);this.fieldTermFrequencies[s]=u,this.fieldLengths[s]=0,this.fieldLengths[s]+=a.length;for(var l=0;l<a.length;l++){var c=a[l];if(void 0==u[c]&&(u[c]=0),u[c]+=1,void 0==this.invertedIndex[c]){var h=Object.create(null);h._index=this.termIndex,this.termIndex+=1;for(var f=0;f<this._fields.length;f++)h[this._fields[f]]=Object.create(null);this.invertedIndex[c]=h}void 0==this.invertedIndex[c][r][t]&&(this.invertedIndex[c][r][t]=Object.create(null));for(var p=0;p<this.metadataWhitelist.length;p++){var y=this.metadataWhitelist[p],d=c.metadata[y];void 0==this.invertedIndex[c][r][t][y]&&(this.invertedIndex[c][r][t][y]=[]),this.invertedIndex[c][r][t][y].push(d)}}}},R.Builder.prototype.calculateAverageFieldLengths=function(){for(var e=Object.keys(this.fieldLengths),t=e.length,n={},r={},i=0;i<t;i++){var o=R.FieldRef.fromString(e[i]);r[a=o.fieldName]||(r[a]=0),r[a]+=1,n[a]||(n[a]=0),n[a]+=this.fieldLengths[o]}for(i=0;i<this._fields.length;i++){var a;n[a=this._fields[i]]=n[a]/r[a]}this.averageFieldLength=n},R.Builder.prototype.createFieldVectors=function(){for(var e={},t=Object.keys(this.fieldTermFrequencies),n=t.length,r=Object.create(null),i=0;i<n;i++){for(var o=R.FieldRef.fromString(t[i]),a=o.fieldName,s=this.fieldLengths[o],u=new R.Vector,l=this.fieldTermFrequencies[o],c=Object.keys(l),h=c.length,f=0;f<h;f++){var p,y,d,v=c[f],g=l[v],b=this.invertedIndex[v]._index;void 0===r[v]?(p=R.idf(this.invertedIndex[v],this.documentCount),r[v]=p):p=r[v],y=p*((this._k1+1)*g)/(this._k1*(1-this._b+this._b*(s/this.averageFieldLength[a]))+g),d=Math.round(1e3*y)/1e3,u.insert(b,d)}e[o]=u}this.fieldVectors=e},R.Builder.prototype.createTokenSet=function(){this.tokenSet=R.TokenSet.fromArray(Object.keys(this.invertedIndex).sort())},R.Builder.prototype.build=function(){return this.calculateAverageFieldLengths(),this.createFieldVectors(),this.createTokenSet(),new R.Index({invertedIndex:this.invertedIndex,fieldVectors:this.fieldVectors,tokenSet:this.tokenSet,fields:this._fields,pipeline:this.searchPipeline})},R.Builder.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},R.MatchData=function(e,t,n){for(var r=Object.create(null),i=Object.keys(n),o=0;o<i.length;o++){var a=i[o];r[a]=n[a].slice()}this.metadata=Object.create(null),this.metadata[e]=Object.create(null),this.metadata[e][t]=r},R.MatchData.prototype.combine=function(e){for(var t=Object.keys(e.metadata),n=0;n<t.length;n++){var r=t[n],i=Object.keys(e.metadata[r]);void 0==this.metadata[r]&&(this.metadata[r]=Object.create(null));for(var o=0;o<i.length;o++){var a=i[o],s=Object.keys(e.metadata[r][a]);void 0==this.metadata[r][a]&&(this.metadata[r][a]=Object.create(null));for(var u=0;u<s.length;u++){var l=s[u];void 0==this.metadata[r][a][l]?this.metadata[r][a][l]=e.metadata[r][a][l]:this.metadata[r][a][l]=this.metadata[r][a][l].concat(e.metadata[r][a][l])}}}},R.MatchData.prototype.add=function(e,t,n){if(!(e in this.metadata))return this.metadata[e]=Object.create(null),void(this.metadata[e][t]=n);if(t in this.metadata[e])for(var r=Object.keys(n),i=0;i<r.length;i++){var o=r[i];o in this.metadata[e][t]?this.metadata[e][t][o]=this.metadata[e][t][o].concat(n[o]):this.metadata[e][t][o]=n[o]}else this.metadata[e][t]=n},R.Query=function(e){this.clauses=[],this.allFields=e},R.Query.wildcard=new String("*"),R.Query.wildcard.NONE=0,R.Query.wildcard.LEADING=1,R.Query.wildcard.TRAILING=2,R.Query.prototype.clause=function(e){return"fields"in e||(e.fields=this.allFields),"boost"in e||(e.boost=1),"usePipeline"in e||(e.usePipeline=!0),"wildcard"in e||(e.wildcard=R.Query.wildcard.NONE),e.wildcard&R.Query.wildcard.LEADING&&e.term.charAt(0)!=R.Query.wildcard&&(e.term="*"+e.term),e.wildcard&R.Query.wildcard.TRAILING&&e.term.slice(-1)!=R.Query.wildcard&&(e.term=e.term+"*"),this.clauses.push(e),this},R.Query.prototype.term=function(e,t){var n=t||{};return n.term=e,this.clause(n),this},R.QueryParseError=function(e,t,n){this.name="QueryParseError",this.message=e,this.start=t,this.end=n},R.QueryParseError.prototype=new Error,R.QueryLexer=function(e){this.lexemes=[],this.str=e,this.length=e.length,this.pos=0,this.start=0,this.escapeCharPositions=[]},R.QueryLexer.prototype.run=function(){for(var e=R.QueryLexer.lexText;e;)e=e(this)},R.QueryLexer.prototype.sliceString=function(){for(var e=[],t=this.start,n=this.pos,r=0;r<this.escapeCharPositions.length;r++)n=this.escapeCharPositions[r],e.push(this.str.slice(t,n)),t=n+1;return e.push(this.str.slice(t,this.pos)),this.escapeCharPositions.length=0,e.join("")},R.QueryLexer.prototype.emit=function(e){this.lexemes.push({type:e,str:this.sliceString(),start:this.start,end:this.pos}),this.start=this.pos},R.QueryLexer.prototype.escapeCharacter=function(){this.escapeCharPositions.push(this.pos-1),this.pos+=1},R.QueryLexer.prototype.next=function(){if(this.pos>=this.length)return R.QueryLexer.EOS;var e=this.str.charAt(this.pos);return this.pos+=1,e},R.QueryLexer.prototype.width=function(){return this.pos-this.start},R.QueryLexer.prototype.ignore=function(){this.start==this.pos&&(this.pos+=1),this.start=this.pos},R.QueryLexer.prototype.backup=function(){this.pos-=1},R.QueryLexer.prototype.acceptDigitRun=function(){var e,t;do{t=(e=this.next()).charCodeAt(0)}while(t>47&&t<58);e!=R.QueryLexer.EOS&&this.backup()},R.QueryLexer.prototype.more=function(){return this.pos<this.length},R.QueryLexer.EOS="EOS",R.QueryLexer.FIELD="FIELD",R.QueryLexer.TERM="TERM",R.QueryLexer.EDIT_DISTANCE="EDIT_DISTANCE",R.QueryLexer.BOOST="BOOST",R.QueryLexer.lexField=function(e){return e.backup(),e.emit(R.QueryLexer.FIELD),e.ignore(),R.QueryLexer.lexText},R.QueryLexer.lexTerm=function(e){if(e.width()>1&&(e.backup(),e.emit(R.QueryLexer.TERM)),e.ignore(),e.more())return R.QueryLexer.lexText},R.QueryLexer.lexEditDistance=function(e){return e.ignore(),e.acceptDigitRun(),e.emit(R.QueryLexer.EDIT_DISTANCE),R.QueryLexer.lexText},R.QueryLexer.lexBoost=function(e){return e.ignore(),e.acceptDigitRun(),e.emit(R.QueryLexer.BOOST),R.QueryLexer.lexText},R.QueryLexer.lexEOS=function(e){e.width()>0&&e.emit(R.QueryLexer.TERM)},R.QueryLexer.termSeparator=R.tokenizer.separator,R.QueryLexer.lexText=function(e){for(;;){var t=e.next();if(t==R.QueryLexer.EOS)return R.QueryLexer.lexEOS;if(92!=t.charCodeAt(0)){if(":"==t)return R.QueryLexer.lexField;if("~"==t)return e.backup(),e.width()>0&&e.emit(R.QueryLexer.TERM),R.QueryLexer.lexEditDistance;if("^"==t)return e.backup(),e.width()>0&&e.emit(R.QueryLexer.TERM),R.QueryLexer.lexBoost;if(t.match(R.QueryLexer.termSeparator))return R.QueryLexer.lexTerm}else e.escapeCharacter()}},R.QueryParser=function(e,t){this.lexer=new R.QueryLexer(e),this.query=t,this.currentClause={},this.lexemeIdx=0},R.QueryParser.prototype.parse=function(){this.lexer.run(),this.lexemes=this.lexer.lexemes;for(var e=R.QueryParser.parseFieldOrTerm;e;)e=e(this);return this.query},R.QueryParser.prototype.peekLexeme=function(){return this.lexemes[this.lexemeIdx]},R.QueryParser.prototype.consumeLexeme=function(){var e=this.peekLexeme();return this.lexemeIdx+=1,e},R.QueryParser.prototype.nextClause=function(){var e=this.currentClause;this.query.clause(e),this.currentClause={}},R.QueryParser.parseFieldOrTerm=function(e){var t=e.peekLexeme();if(void 0!=t)switch(t.type){case R.QueryLexer.FIELD:return R.QueryParser.parseField;case R.QueryLexer.TERM:return R.QueryParser.parseTerm;default:var n="expected either a field or a term, found "+t.type;throw t.str.length>=1&&(n+=" with value '"+t.str+"'"),new R.QueryParseError(n,t.start,t.end)}},R.QueryParser.parseField=function(e){var t=e.consumeLexeme();if(void 0!=t){if(-1==e.query.allFields.indexOf(t.str)){var n=e.query.allFields.map(function(e){return"'"+e+"'"}).join(", "),r="unrecognised field '"+t.str+"', possible fields: "+n;throw new R.QueryParseError(r,t.start,t.end)}e.currentClause.fields=[t.str];var i=e.peekLexeme();if(void 0==i){r="expecting term, found nothing";throw new R.QueryParseError(r,t.start,t.end)}switch(i.type){case R.QueryLexer.TERM:return R.QueryParser.parseTerm;default:r="expecting term, found '"+i.type+"'";throw new R.QueryParseError(r,i.start,i.end)}}},R.QueryParser.parseTerm=function(e){var t=e.consumeLexeme();if(void 0!=t){e.currentClause.term=t.str.toLowerCase(),-1!=t.str.indexOf("*")&&(e.currentClause.usePipeline=!1);var n=e.peekLexeme();if(void 0!=n)switch(n.type){case R.QueryLexer.TERM:return e.nextClause(),R.QueryParser.parseTerm;case R.QueryLexer.FIELD:return e.nextClause(),R.QueryParser.parseField;case R.QueryLexer.EDIT_DISTANCE:return R.QueryParser.parseEditDistance;case R.QueryLexer.BOOST:return R.QueryParser.parseBoost;default:var r="Unexpected lexeme type '"+n.type+"'";throw new R.QueryParseError(r,n.start,n.end)}else e.nextClause()}},R.QueryParser.parseEditDistance=function(e){var t=e.consumeLexeme();if(void 0!=t){var n=parseInt(t.str,10);if(isNaN(n)){var r="edit distance must be numeric";throw new R.QueryParseError(r,t.start,t.end)}e.currentClause.editDistance=n;var i=e.peekLexeme();if(void 0!=i)switch(i.type){case R.QueryLexer.TERM:return e.nextClause(),R.QueryParser.parseTerm;case R.QueryLexer.FIELD:return e.nextClause(),R.QueryParser.parseField;case R.QueryLexer.EDIT_DISTANCE:return R.QueryParser.parseEditDistance;case R.QueryLexer.BOOST:return R.QueryParser.parseBoost;default:r="Unexpected lexeme type '"+i.type+"'";throw new R.QueryParseError(r,i.start,i.end)}else e.nextClause()}},R.QueryParser.parseBoost=function(e){var t=e.consumeLexeme();if(void 0!=t){var n=parseInt(t.str,10);if(isNaN(n)){var r="boost must be numeric";throw new R.QueryParseError(r,t.start,t.end)}e.currentClause.boost=n;var i=e.peekLexeme();if(void 0!=i)switch(i.type){case R.QueryLexer.TERM:return e.nextClause(),R.QueryParser.parseTerm;case R.QueryLexer.FIELD:return e.nextClause(),R.QueryParser.parseField;case R.QueryLexer.EDIT_DISTANCE:return R.QueryParser.parseEditDistance;case R.QueryLexer.BOOST:return R.QueryParser.parseBoost;default:r="Unexpected lexeme type '"+i.type+"'";throw new R.QueryParseError(r,i.start,i.end)}else e.nextClause()}},void 0===(i="function"==typeof(r=function(){return R})?r.call(t,n,t,e):r)||(e.exports=i)}()},function(e,t,n){e.exports={default:n(38),__esModule:!0}},function(e,t,n){e.exports={default:n(39),__esModule:!0}},function(e,t,n){"use strict";n.r(t);var r={};n.d(r,"TicTacToeGame",function(){return M}),n.d(r,"CircularTicTacToeGame",function(){return R}),n.d(r,"TacTickleGame",function(){return Q}),n.d(r,"TacTickle4Game",function(){return N}),n.d(r,"HexTacTickleGame",function(){return L}),n.d(r,"Hex2TacTickleGame",function(){return z}),n.d(r,"CircularTacTickleGame",function(){return F}),n.d(r,"GomokuGame",function(){return W}),n.d(r,"Gomoku7Game",function(){return D}),n.d(r,"Gomoku9Game",function(){return V}),n.d(r,"Gomoku11Game",function(){return Y}),n.d(r,"HexGomokuGame",function(){return q}),n.d(r,"ConnectFourGame",function(){return $}),n.d(r,"FourInARow11Game",function(){return X}),n.d(r,"CircularFourInARowGame",function(){return J}),n.d(r,"ReversiGame",function(){return K}),n.d(r,"Reversi4Game",function(){return ee}),n.d(r,"Reversi6Game",function(){return te}),n.d(r,"Reversi10Game",function(){return ne}),n.d(r,"OthelloGame",function(){return re}),n.d(r,"Othello4Game",function(){return ie}),n.d(r,"HexReversiGame",function(){return oe}),n.d(r,"HexReversi4Game",function(){return ae}),n.d(r,"HexGame",function(){return ce}),n.d(r,"Hex5Game",function(){return he}),n.d(r,"Hex6Game",function(){return fe}),n.d(r,"Hex9Game",function(){return pe}),n.d(r,"Hex11Game",function(){return ye}),n.d(r,"Hex13Game",function(){return de}),n.d(r,"Hex14Game",function(){return ve}),n.d(r,"CatchTheHareGame",function(){return we}),n.d(r,"AlquerqueGame",function(){return xe}),n.d(r,"CzechCheckersGame",function(){return Oe}),n.d(r,"InternationalCheckersGame",function(){return Te}),n.d(r,"HexCheckCheckersGame",function(){return Se}),n.d(r,"NineMensMorrisGame",function(){return Pe}),n.d(r,"TwelveMensMorrisGame",function(){return Me}),n.d(r,"SixMensMorrisGame",function(){return Re}),n.d(r,"ThreeMensMorrisGame",function(){return Ce}),n.d(r,"ThreeDiagonalMensMorrisGame",function(){return Ge});var i={};n.d(i,"AlphaBetaPlayer",function(){return Qe}),n.d(i,"RandomPlayer",function(){return Le}),n.d(i,"UctPlayer",function(){return He}),n.d(i,"UctCachedPlayer",function(){return qe}),n.d(i,"MinimaxPlayer",function(){return H});var o=n(11),a=n.n(o),s=n(10),u=n.n(s),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=t}l(e,[{key:"possible",value:function(){return this.game.possible()}},{key:"undo",value:function(){return this.game.undo()}},{key:"move",value:function(e){return this.game.move(e)}},{key:"evaluate",value:function(){return this.game.evaluate()}},{key:"moves",get:function(){return this.game.moves}},{key:"player",get:function(){return this.game.player}},{key:"winner",get:function(){return this.game.winner}}])}();function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.isArray(e)?(Array.isArray(e[t]),e[t]):t?void 0:e}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[],i=!0,o=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,h=c(l,n);h.actions=h.actions||[],h.actions.push({move:l,cursor:n+1}),h.highlighted||(h.highlighted=!0,r.push(h))}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}e.actions=n?e.actions:[],e.actions.push({highlighted:r})}var f=n(0),p="pass";function y(e){if(e===p)return null;var t=e.replace(/([a-z])([0-9])/g,"$1,$2").split(",");return t[0]=parseInt(t[0],36)-10,t[1]=parseInt(t[1],10)-1,t}function d(e){return String.fromCharCode(e.x+97)+(e.y+1)}function v(e){return e%2+1}function g(e){return Object(f.rotate)(e,-1),e.toPoint=f.HexagonalGrid.cubeToTwoAxisYZ,e.toTile=f.HexagonalGrid.twoAxisToCubeYZ,Object(f.normalize)(e),e}var b=["title","type","items","linkText","authors","aliases","rules","created","location","tiles","original","grid"],w=new Map([[f.RectangularGrid,"Rectangular"],[f.HexagonalGrid,"Hexagonal"],[f.RadialGrid,"Radial"]]);function m(e){return Object.assign({},e)}function x(e){return e.replace("Game","")}var k=["wiki","source"];function _(e,t){for(var n in e)Array.isArray(e[n])&&(e[n+"Array"]=e[n],e[n]=e[n].join(", "));var r={};for(var i in t)e[i]||(Array.isArray(t[i])&&(t[i+"Array"]=t[i],t[i]=t[i].join(", "),e[i+"Array"]=t[i+"Array"]),e[i]=t[i],r[i]=!0);return e.originals=r,k.forEach(function(t){var n;e[t]&&(e[t+"Text"]=(n=e[t],/[^.]*\.[^.]{2,3}(?:\.[^.]{2,3})?$/.exec(new URL(n).hostname)[0]))}),e}var O=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.limit=1e4,this.countdown=5,this.countdownSignal=3,this.signalDelay=100,this.counter=-1,this.counterSignal=-1,this.expired=!1,this.pending=!1,this.timer=null,this.timeoutWinner=null,this.game=t,this.constructor=t.constructor,Object.assign(this,n),this.game.winning&&(this.winning=this.game.winning.bind(this.game)),this.game.links&&(this.links=this.game.links.bind(this.game)),this.game.rulers&&(this.rulers=this.game.rulers.bind(this.game))}O(e,[{key:"dispose",value:function(){this.stop()}},{key:"possible",value:function(){return this.game.possible()}},{key:"undo",value:function(){return this.game.undo()}},{key:"move",value:function(e){this.game.move(e),this.game.winner?(this.stop(),this.counter=-1,this.counterSignal=-1,this.expired=!1):this.start()}},{key:"evaluate",value:function(){return this.game.evaluate()}},{key:"moveToString",value:function(e){return this.game.moveToString(e)}},{key:"stringToMove",value:function(e){return this.game.stringToMove(e)}},{key:"start",value:function(){var e=this;if(this.stop(!!this.limit),this.counter=-1,this.counterSignal=-1,this.expired=!1,this.timeoutWinner=null,this.limit){var t=this.countdown;this.timer=setInterval(function(){e.stop(!0),e.counter=t,e.timer=setInterval(function(){--t<=e.countdownSignal&&(e.counterSignal=t),setTimeout(function(){e.counter=t,t||(e.stop(),e.expired=!0,e.timeoutWinner=v(e.game.player))},e.signalDelay)},1e3)},this.limit-1e3*t-this.signalDelay)}}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.pending=e,this.timer&&(clearInterval(this.timer),this.timer=null)}},{key:"grid",get:function(){return this.game.grid}},{key:"scale",get:function(){return this.game.scale}},{key:"moves",get:function(){return this.game.moves}},{key:"player",get:function(){return this.game.player}},{key:"winner",get:function(){return this.timeoutWinner||this.game.winner}},{key:"score",get:function(){return this.game.score}},{key:"landscape",get:function(){return this.game.landscape}}])})(),"function"==typeof Symbol&&Symbol.iterator;function T(e,t,n){var r=0,i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,c=[],h=!0,f=!1,p=void 0;try{for(var y,d=l.links[Symbol.iterator]();!(h=(y=d.next()).done);h=!0){var v=y.value;if(v[0]>0){var g=v[1],b=l.links.get(l.opposite?l.opposite(v[0]):-v[0]);b&&b.data===n||g.data!==n||c.push(v[0])}}}catch(e){f=!0,p=e}finally{try{!h&&d.return&&d.return()}finally{if(f)throw p}}if(c.length){var w=!0,m=!1,x=void 0;try{for(var k,_=c[Symbol.iterator]();!(w=(k=_.next()).done);w=!0){for(var O=k.value,T=[],S=l;S&&(T.push(S),(S=S.links.get(O))&&S.data===n););var j=0;(S=T[0].links.get(-O))&&!S.data&&j++,(S=T[T.length-1].links.get(O))&&!S.data&&j++,!j&&T.length<t||(r+=Math.pow(t,T.length+1+(T.length>=t?1:0))-Math.pow(t,T.length)*(2-j))}}catch(e){m=!0,x=e}finally{try{!w&&_.return&&_.return()}finally{if(m)throw x}}}else{var E=0,P=!0,M=!1,R=void 0;try{for(var C,G=l.links.values()[Symbol.iterator]();!(P=(C=G.next()).done);P=!0){C.value.data||E++}}catch(e){M=!0,R=e}finally{try{!P&&G.return&&G.return()}finally{if(M)throw R}}r+=E/8}}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}return r}function S(e,t,n){var r={},i=!0,o=!1,a=void 0;try{for(var s,u=e.links[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;if(!r[-l[0]]){r[-l[0]]=!0;for(var c=l[1],h=1;c&&c.data===t;)h++,c=(c=c.links.get(l[0]))!==e&&c;for(c=e.links.get(-l[0]);c&&c.data===t;)h++,c=(c=c.links.get(-l[0]))!==e&&c;if(h>=n)return!0}}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}}function j(e,t,n){var r={},i=!0,o=!1,a=void 0;try{for(var s,u=e.links[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;if(!r[-l[0]]){var c=[e];r[-l[0]]=!0;for(var h=l[1],f=1;h&&h.data===t;)c.push(h),f++,h=(h=h.links.get(l[0]))!==e&&h;for(h=e.links.get(-l[0]);h&&h.data===t;)c.unshift(h),f++,h=(h=h.links.get(-l[0]))!==e&&h;if(f>=n)return c}}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}}var E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var P=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.moves=[],this.player=1,this.winner=0,this.finished=!1,this.playerTiles={},this.grid=t,this.min=n,this.tilesMap=Object(f.toMap)(this.grid.tiles),this.freeTilesMap=Object(f.toMap)(this.grid.tiles),Object(f.link)(this.tilesMap)}return E(e,[{key:"moveToString",value:function(e){return e?d(this.grid.toPoint(e)):"pass"}},{key:"stringToMove",value:function(e){var t=y(e);if(!t)return t;var n=this.grid.tile.apply(this.grid,t);return this.tilesMap.get(n.key)}},{key:"init",value:function(e){var t=function(e){var t=[],n=e.replace(/[^0-9a-z]+/,"").replace(/([0-9])([a-z])/g,"$1,$2").split(","),r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;t.push(y(u))}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return t}(e),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this.move(this.tilesMap.get(this.grid.tile(s[0],s[1]).key))}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}},{key:"possible",value:function(){return this.finished?[]:Object(f.toArray)(this.freeTilesMap)}},{key:"undo",value:function(){var e=this.moves.pop();e.data=null,this.freeTilesMap.set(e.key,e),this.player=v(this.player),this.finished=!1,this.winner=0,this.playerTiles[this.player].pop()}},{key:"move",value:function(e){e.data=this.player,(this.playerTiles[this.player]||(this.playerTiles[this.player]=[])).push(e),this.player=this.player%2+1,this.moves.push(e),this.freeTilesMap.delete(e.key),this.winner=this.getWinner(),(this.moves.length===this.grid.tiles.length||this.winner)&&(this.finished=!0)}},{key:"evaluate",value:function(){return T(this.playerTiles[this.player]||[],this.min,this.player)-T(this.playerTiles[v(this.player)]||[],this.min,v(this.player))*this.min}},{key:"getWinner",value:function(){return S(this.moves[this.moves.length-1],v(this.player),this.min)?v(this.player):this.moves.length===this.grid.tiles.length?-1:0}},{key:"winning",value:function(){var e=this.moves[this.moves.length-1];return j(e,e.data,this.min)}}]),e}();var M=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new f.RectangularGrid(1,!1,f.Shape.Even,3,3,f.Rectangular8Tile),3))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,P),t}();M.title="Tic Tac Toe",M.type="Connect",M.aliases=["Noughts and Crosses","Xs and Os","Exy-ozys"],M.created=-1300,M.location="Egypt",M.wiki="https://en.wikipedia.org/wiki/Tic-tac-toe",M.rules=["Connect 3"];var R=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=new f.RadialGrid(1,!0,f.Shape.Even,3,4,f.Radial8Tile,1);return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,3))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,P),t}();R.title="Circular Tic Tac Toe",R.type="Connect",R.original="TicTacToeGame";var C=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),G=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var I=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments[2],i=arguments[3];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.moves=[],this.player=1,this.winner=0,this.playerTiles={1:[],2:[]},this.finished=!1,this.grid=t,this.tileMap=Object(f.toMap)(t.tiles),Object(f.link)(this.tileMap),this.min=n,this.init(i),this.directions=r.map(function(e){return C(e,1)[0]})}return G(e,[{key:"moveToString",value:function(e){if(!e)return"pass";var t=e.map(this.grid.toPoint);return t.map(d).join("-")}},{key:"stringToMove",value:function(e){var t,n=this,r=(t=e)===p?null:t.split("-").map(y);return r?r.map(function(e){var t=n.grid.tile.apply(n.grid,e);return n.tileMap.get(t.key)}):r}},{key:"possible",value:function(){var e=this;return this.finished?[]:this.grid.tiles.reduce(function(t,n){if(n.data!==e.player)return t;var r=!0,i=!1,o=void 0;try{for(var a,s=n.links[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,l=C(u,2),c=l[0],h=l[1];!h.data&&e.directions.indexOf(c)>-1&&t.push([n,h])}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return t},[])}},{key:"move",value:function(e){e[1].data=e[0].data,e[0].data=null,this.player=v(this.player),this.moves.push(e),S(e[1],e[1].data,this.min)?(this.finished=!0,this.winner=e[1].data):this.moves.length===2*this.grid.tiles.length&&(this.finished=!0,this.winner=-1)}},{key:"undo",value:function(){var e=this.moves.pop();e[0].data=e[1].data,e[1].data=null,this.player=v(this.player%2),this.finished=!1,this.winner=0}},{key:"evaluate",value:function(){throw new Error("Method not implemented.")}},{key:"winning",value:function(){var e=this.moves[this.moves.length-1];return j(e[1],e[1].data,this.min)}},{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[0,0,1],[0,this.grid.y-1,0]],t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)for(var a=i.value,s=C(a,3),u=s[0],l=s[1],c=s[2],h=u;h<u+4;h++){var f=this.tileMap.get(this.grid.tile(h,l).key),p=(h+c)%2+1;f&&(f.data=p)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}}]),e}();I.move=!0;var Q=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new f.RectangularGrid(1,void 0,f.Shape.Even,4,5,f.Rectangular8Tile),3,f.RectangularTile.directions))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,I),t}();Q.title="Tac-tickle",Q.type="Move to Connect",Q.authors=["NRICH"],Q.source="https://nrich.maths.org/1240",Q.created="2000",Q.rules=["Move to connect 3"];var N=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new f.RectangularGrid(1,void 0,f.Shape.Even,4,4,f.Rectangular8Tile),3,f.RectangularTile.directions))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,I),t}();N.title="Tac-tickle 4x4",N.type="Move to Connect",N.aliases="Tic-tackle",N.original="TacTickleGame";var L=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new f.HexagonalGrid(1,!0,f.Shape.Even,4,5),3,f.HexagonalTile.directions))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,I),t}();L.title="Hex Tac-tickle",L.type="Move to Connect",L.original="TacTickleGame";var z=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=new f.HexagonalGrid(1,!0,f.Shape.Hexagonal,4);return Object(f.normalize)(e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,3,f.HexagonalTile.directions,[[3,0,0],[0,6,0]]))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,I),t}();z.title="Hex2 Tac-tickle",z.type="Move to Connect",z.original="TacTickleGame";var F=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new f.RadialGrid(1,!1,f.Shape.Even,4,5,f.Radial8Tile,1),3,f.RadialTile.directions,[[0,1,1],[0,4,0]]))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,I),t}();F.title="Circular Tac-tickle",F.type="Move to Connect",F.original="TacTickleGame";var A=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var H=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.count=0,this.depth=0,this.depth=t}return A(e,[{key:"select",value:function(e){return{move:this.move(e,this.depth),count:this.count}}},{key:"move",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.count=0;var r=e.possible(),i=-1/0,o=void 0,a=!0,s=!1,u=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var h=l.value;e.move(h);var f=this.minimax(t-1,e,!n);e.undo(),f>i&&(i=f,o=h)}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}return o}},{key:"minimax",value:function(e,t,n){if(this.count++,0===e)return t.evaluate();var r=t.possible();if(n){var i=-1/0,o=!0,a=!1,s=void 0;try{for(var u,l=r[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;t.move(c),i=Math.max(i,this.minimax(e-1,t,!n)),t.undo()}}catch(e){a=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw s}}return i}var h=1/0,f=!0,p=!1,y=void 0;try{for(var d,v=r[Symbol.iterator]();!(f=(d=v.next()).done);f=!0){var g=d.value;t.move(g),h=Math.min(h,this.minimax(e-1,t,!n)),t.undo()}}catch(e){p=!0,y=e}finally{try{!f&&v.return&&v.return()}finally{if(p)throw y}}return h}}]),e}();var W=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new f.RectangularGrid(1,!1,f.Shape.Even,15,15,f.Rectangular8Tile),5))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,P),t}();W.title="Gomoku",W.type="Connect",W.player=function(){return new H(2)};var D=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new f.RectangularGrid(1,!1,f.Shape.Even,7,7,f.Rectangular8Tile),5))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,P),t}();D.title="Gomoku 7x7",D.type="Connect",D.player=function(){return new H(2)};var V=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new f.RectangularGrid(1,!1,f.Shape.Even,9,9,f.Rectangular8Tile),5))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,P),t}();V.title="Gomoku 9x9",V.type="Connect",V.player=function(){return new H(2)};var Y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new f.RectangularGrid(1,!1,f.Shape.Even,11,11,f.Rectangular8Tile),5))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,P),t}();Y.title="Gomoku 11x11",Y.type="Connect",Y.player=function(){return new H(2)};var q=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=new f.HexagonalGrid(1,!0,f.Shape.Even,15);return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,5))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,P),t}();q.title="Hex Gomoku",q.type="Connect",q.player=function(){return new H(2)};var B=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var $=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new f.RectangularGrid(1,!1,f.Shape.Even,7,6,f.Rectangular8Tile),4));return e.landscape=!0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,P),B(t,[{key:"possible",value:function(){if(this.finished)return[];for(var e=[],t=0;t<this.grid.x;t++)for(var n=0;n<this.grid.y;n++){var r=this.tilesMap.get([t,n].toString());if(!r.data){e.push(r);break}}return e}}]),t}();$.title="Connect Four",$.type="Connect",$.authors=["Howard Wexler","Ned Strongin"],$.created=1974,$.wiki="https://en.wikipedia.org/wiki/Connect_Four",$.alias=["Captain's Mistress","Four Up","Plot Four","Find Four","Four in a Row","Four in a Line","Gravitrips"],$.rules=["Connect 4"];var X=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=new f.RectangularGrid(1,void 0,f.Shape.Even,11,11,f.Rectangular8Tile);return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,4))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,P),t}();X.title="Four-in-a-row",X.type="Connect",X.player=function(){return new H(2)};var J=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=new f.RadialGrid(1,!1,f.Shape.Even,12,8,f.Radial8Tile,2);return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,4))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,P),t}();J.title="Circular Four-in-a-row",J.type="Connect",J.rules=["Connect 4"],J.original="TicTacToeGame";var U=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Z=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.player=1,this.moves=[],this.score={1:0,2:0},this.winner=0,this.finished=!1,this.history=[],this.grid=t,this.tilesMap=Object(f.toMap)(t.tiles);var i=Math.floor(t.x/2-.5),o=Math.ceil(t.x/2-.5),a=Math.floor(t.y/2-.5),s=Math.ceil(t.y/2-.5);this.center=[this.tilesMap.get(t.tile(i,a).key),this.tilesMap.get(t.tile(i,s).key),this.tilesMap.get(t.tile(o,s).key),this.tilesMap.get(t.tile(o,a).key)],this.empty=Object(f.toMap)(this.grid.tiles),Object(f.link)(this.tilesMap),r&&this.center.forEach(function(e){return n.move(e,!0)}),this.updatePossible()}return U(e,[{key:"moveToString",value:function(e){return e?d(this.grid.toPoint(e)):"pass"}},{key:"stringToMove",value:function(e){var t=y(e);if(!t)return t;var n=this.grid.tile.apply(this.grid,t);return this.tilesMap.get(n.key)}},{key:"possible",value:function(){return this.knownPossible}},{key:"updatePossible",value:function(){this.knownPossible=this.possibleFor(this.player),this.knownPossible.length||(this.possibleFor(this.player%2+1).length?this.move(null):this.finished=!0)}},{key:"possibleFor",value:function(e){var t=[];if(this.grid.tiles.length-this.empty.size<4)return this.center.filter(function(e){return!e.data});var n=!0,r=!1,i=void 0;try{for(var o,a=this.empty.values()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=!0,l=!1,c=void 0;try{for(var h,f=s.links.keys()[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){for(var p=h.value,y=s.links.get(p),d=0;y&&y.data&&y.data!==e;)d++,y=y.links.get(p);if(d&&y&&y.data===e){t.push(s);break}}}catch(e){l=!0,c=e}finally{try{!u&&f.return&&f.return()}finally{if(l)throw c}}}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return t}},{key:"undo",value:function(){var e=this.moves.pop();if(this.finished=!1,this.winner=0,!e)return this.player=v(this.player),this.history.pop(),void this.undo();this.score[e.data]--,e.data=null,this.empty.set(e.key,e);var t=this.history.pop();for(var n in this.player=this.player%2+1,t)if(t.hasOwnProperty(n)){var r=this.tilesMap.get(n);this.score[r.data]--,r.data=t[n],this.score[r.data]++}this.updatePossible()}},{key:"move",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return this.player=this.player%2+1,this.moves.push(e),this.history.push({}),this.updatePossible(),void(this.winner=this.getWinner());if(e.data=this.player,this.score[this.player]=this.score[this.player]||0,this.score[this.player]++,this.player=this.player%2+1,this.empty.delete(e.key),!t){this.moves.push(e);var n={},r=!0,i=!1,o=void 0;try{for(var a,s=e.links.keys()[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){for(var u=a.value,l=e.links.get(u),c=[];l&&l.data&&l.data!==e.data;)c.push(l),l=l.links.get(u);if(l&&l.data===e.data){var h=!0,f=!1,p=void 0;try{for(var y,d=c[Symbol.iterator]();!(h=(y=d.next()).done);h=!0){var v=y.value;n[v.key]=v.data,this.score[v.data]--,this.score[e.data]++,v.data=e.data}}catch(e){f=!0,p=e}finally{try{!h&&d.return&&d.return()}finally{if(f)throw p}}}}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}this.history.push(n),this.updatePossible(),this.winner=this.getWinner()}}},{key:"evaluate",value:function(){return-this.score[this.player]+this.score[v(this.player)]}},{key:"getWinner",value:function(){return this.finished?this.score[1]===this.score[2]?-1:this.score[1]>this.score[2]?1:2:0}}]),e}();var K=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new f.RectangularGrid(1,void 0,f.Shape.Even,8,8,f.Rectangular8Tile)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Z),t}();K.title="Reversi",K.type="Reversi",K.created=1883,K.authors=["Lewis Waterman","John W. Mollett"],K.wiki="https://en.wikipedia.org/wiki/Reversi",K.rules=["Capture pieces"],K.location="England";var ee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new f.RectangularGrid(1,void 0,f.Shape.Even,4,4,f.Rectangular8Tile)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Z),t}();ee.title="Reversi 4x4",ee.type="Reversi",ee.original="ReversiGame";var te=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new f.RectangularGrid(1,void 0,f.Shape.Even,6,6,f.Rectangular8Tile)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Z),t}();te.title="Reversi 6x6",te.type="Reversi",te.original="ReversiGame";var ne=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new f.RectangularGrid(1,void 0,f.Shape.Even,10,10,f.Rectangular8Tile)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Z),t}();ne.title="Reversi 10x10",ne.type="Reversi",ne.original="ReversiGame";var re=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new f.RectangularGrid(1,void 0,f.Shape.Even,8,8,f.Rectangular8Tile),!0))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Z),t}();re.title="Othello",re.type="Reversi",re.created=1971,re.authors=[" Goro Hasegawa"],re.wiki="https://en.wikipedia.org/wiki/Reversi",re.location="Japan",re.original="ReversiGame";var ie=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new f.RectangularGrid(1,void 0,f.Shape.Even,4,4,f.Rectangular8Tile),!0))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Z),t}();ie.title="Othello 4x4",ie.type="Reversi",ie.original="OthelloGame";var oe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,g(new f.HexagonalGrid(1,!1,f.Shape.Rhombus,8))))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Z),t}();oe.title="Hex Reversi",oe.type="Reversi",oe.original="ReversiGame";var ae=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,g(new f.HexagonalGrid(1,void 0,f.Shape.Rhombus,4))))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Z),t}();ae.title="Hex Reversi 4x4",ae.type="Reversi",ae.original="ReversiGame";var se=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ue=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var le=function(){function e(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.moves=[],this.player=1,this.winner=0,this.playerTiles={1:[],2:[]},this.finished=!1,this.grid=t,this.tileMap=Object(f.toMap)(t.tiles),this.freeTilesMap=Object(f.toMap)(t.tiles),Object(f.link)(this.tileMap),this.markLine(this.grid.tile(0,0),this.grid.tile(0,this.grid.y-1),1,"begin"),this.markLine(this.grid.tile(this.grid.x-1,0),this.grid.tile(this.grid.x-1,this.grid.y-1),1,"end"),this.markLine(this.grid.tile(0,0),this.grid.tile(this.grid.x-1,0),2,"begin"),this.markLine(this.grid.tile(0,this.grid.y-1),this.grid.tile(this.grid.x-1,this.grid.y-1),2,"end")}return ue(e,[{key:"possible",value:function(){return this.finished?[]:Object(f.toArray)(this.freeTilesMap)}},{key:"links",value:function(){return[[this.grid.tile(-1,1),this.grid.tile(-1,this.grid.y-1),1],[this.grid.tile(this.grid.x,0),this.grid.tile(this.grid.x,this.grid.y-2),1],[this.grid.tile(1,-1),this.grid.tile(this.grid.x-1,-1),2],[this.grid.tile(0,this.grid.y),this.grid.tile(this.grid.x-2,this.grid.y),2]]}},{key:"move",value:function(e){e.data=this.player,this.playerTiles[this.player].push(e),this.player=v(this.player),this.moves.push(e),this.freeTilesMap.delete(e.key),this.winner=this.getWinner(),(this.moves.length===this.grid.tiles.length||this.winner)&&(this.finished=!0)}},{key:"moveToString",value:function(e){return e?d(this.grid.toPoint(e)):"pass"}},{key:"stringToMove",value:function(e){var t=y(e);if(!t)return t;var n=this.grid.tile.apply(this.grid,t);return this.tileMap.get(n.key)}},{key:"undo",value:function(){var e=this.moves.pop();e.data=null,this.freeTilesMap.set(e.key,e),this.player=v(this.player),this.finished=!1,this.winner=0,this.playerTiles[this.player].pop()}},{key:"evaluate",value:function(){throw new Error("Method not implemented.")}},{key:"winning",value:function(){for(var e=this.moves[this.moves.length-1],t=new Map([[e.key,!0]]),n=[{tile:e,previous:null}],r=e.data,i=0,o=void 0,a=void 0;i<n.length;){var s=n[i].tile;if(s["begin"+r]?o=o||n[i]:s["end"+r]&&(a=a||n[i]),o&&a){for(var u=[],l=o;l;)u.push(l.tile),l=l.previous;l=a;for(var c=[];l;)c.unshift(l.tile),l=l.previous;return c.shift(),u.concat(c)}var h=!0,f=!1,p=void 0;try{for(var y,d=s.links[Symbol.iterator]();!(h=(y=d.next()).done);h=!0){var v=y.value,g=se(v,2)[1];g.data===r&&(t.has(g.key)||(n.push({tile:g,previous:n[i]}),t.set(g.key,!0)))}}catch(e){f=!0,p=e}finally{try{!h&&d.return&&d.return()}finally{if(f)throw p}}i++}}},{key:"getWinner",value:function(){if(!this.moves.length)return 0;var e=this.moves[this.moves.length-1];return this.flood(e)?e.data:this.moves.length===this.grid.tiles.length?-1:0}},{key:"markLine",value:function(e,t,n,r){var i=this;f.Float3.line(e,t).forEach(function(e){i.tileMap.get(e.toString())[r+n]=!0})}},{key:"flood",value:function(e){for(var t=new Map([[e.key,!0]]),n=[e],r=e.data,i=0,o=!1,a=!1;i<n.length;){var s=n[i];if(s["begin"+r]?o=!0:s["end"+r]&&(a=!0),o&&a)return!0;var u=!0,l=!1,c=void 0;try{for(var h,f=s.links[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=h.value,y=se(p,2)[1];y.data===r&&(t.has(y.key)||(n.push(y),t.set(y.key,!0)))}}catch(e){l=!0,c=e}finally{try{!u&&f.return&&f.return()}finally{if(l)throw c}}i++}return!1}}]),e}();var ce=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,g(new f.HexagonalGrid(1,void 0,f.Shape.Rhombus,11))))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,le),t}();ce.title="Hex",ce.type="Hex",ce.created=1942,ce.authors=["Piet Hein","John Nash"],ce.aliases=["Con-tac-tix"],ce.wiki="https://en.wikipedia.org/wiki/Hex_(board_game)",ce.rules=["Connect edges"];var he=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,g(new f.HexagonalGrid(1,void 0,f.Shape.Rhombus,5))))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,le),t}();he.title="Hex 5x5",he.type="Hex",he.original="HexGame";var fe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,g(new f.HexagonalGrid(1,void 0,f.Shape.Rhombus,6))))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,le),t}();fe.title="Hex 6x6",fe.type="Hex",fe.original="HexGame";var pe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,g(new f.HexagonalGrid(1,void 0,f.Shape.Rhombus,9))))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,le),t}();pe.title="Hex 9x9",pe.type="Hex",pe.original="HexGame";var ye=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,g(new f.HexagonalGrid(1,void 0,f.Shape.Rhombus,11))))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,le),t}();ye.title="Hex 11x11",ye.type="Hex",ye.original="HexGame";var de=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,g(new f.HexagonalGrid(1,void 0,f.Shape.Rhombus,13))))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,le),t}();de.title="Hex 13x13",de.type="Hex",de.original="HexGame";var ve=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,g(new f.HexagonalGrid(1,void 0,f.Shape.Rhombus,14))))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,le),t}();ve.title="Hex 14x14",ve.type="Hex",ve.original="HexGame";var ge=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var be=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.moves=[],this.player=1,this.scale=1,this.winner=0,this.grid=t,this.tileMap=Object(f.toMap)(this.grid.tiles),Object(f.link)(this.tileMap);var n=0,r=(this.grid.tiles.length-1)/2,i=!0,o=!1,a=void 0;try{for(var s,u=this.grid.tiles[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,c=!0,h=!1,p=void 0;try{for(var y,d=l.links[Symbol.iterator]();!(c=(y=d.next()).done);c=!0){var v=y.value;[l.key,v[1].key].sort(),l.x%2&&l.y%2||v[1].x===l.x||v[1].y===l.y||l.links.delete(v[0])}}catch(e){h=!0,p=e}finally{try{!c&&d.return&&d.return()}finally{if(h)throw p}}n<r?l.data=1:n>r&&(l.data=2),n++}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}}return ge(e,[{key:"rulers",value:function(){var e=new Map,t=!0,n=!1,r=void 0;try{for(var i,o=this.grid.tiles[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,s=!0,u=!1,l=void 0;try{for(var c,h=a.links[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var f=c.value,p=[a.key,f[1].key];p.sort(),e.set(p.toString(),[a,f[1]])}}catch(e){u=!0,l=e}finally{try{!s&&h.return&&h.return()}finally{if(u)throw l}}}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return Array.from(e.values())}},{key:"possible",value:function(){return[]}},{key:"move",value:function(e){throw new Error("Method not implemented.")}},{key:"undo",value:function(){throw new Error("Method not implemented.")}},{key:"evaluate",value:function(){throw new Error("Method not implemented.")}}]),e}();be.wip=!0;var we=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new f.RectangularGrid(1,!1,f.Shape.Even,5,5,f.Rectangular8Tile)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,be),t}();we.title="Catch the Hare",we.type="Misc",we.wiki="https://en.wikipedia.org/wiki/Catch_the_Hare",we.location="Europe",we.created=1283;var me=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var xe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new f.RectangularGrid(1,!1,f.Shape.Even,5,5,f.Rectangular8Tile)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,be),me(t,[{key:"possible",value:function(){var e=this;return this.grid.tiles.filter(function(t){t.data,e.player}),[]}}]),t}();xe.title="Alquerque",xe.type="Misc",xe.created=950,xe.aliases=["Qirkat"],xe.location="Middle East",xe.wiki="https://en.wikipedia.org/wiki/Alquerque";var ke=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var _e=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.moves=[],this.player=1,this.winner=0,this.grid=t,this.tileMap=Object(f.toMap)(t.tiles),this.init(n,r)}return ke(e,[{key:"possible",value:function(){return[]}},{key:"move",value:function(e){throw new Error("Method not implemented.")}},{key:"undo",value:function(){throw new Error("Method not implemented.")}},{key:"evaluate",value:function(){throw new Error("Method not implemented.")}},{key:"init",value:function(e,t){for(var n=[[0,e,"1"],[this.grid.y-e,this.grid.y,"2"]],r=0;r<n.length;r++)for(var i=n[r],o=i[0];o<i[1];o++)for(var a=1===t?0:o%2;a<this.grid.x;a+=t)this.tileMap.get(this.grid.tile(a,o).key).data=i[2]}}]),e}();_e.wip=!0;var Oe=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new f.RectangularGrid(1,void 0,f.Shape.Even,8,8,f.Rectangular8Tile),3)),n=!0,r=!1,i=void 0;try{for(var o,a=e.grid.tiles[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.even=s.x%2==s.y%2,s.odd=!s.even}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,_e),t}();Oe.title="Czech Checkers",Oe.type="Checkers";var Te=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new f.RectangularGrid(1,void 0,f.Shape.Even,10,10,f.Rectangular8Tile),4)),n=!0,r=!1,i=void 0;try{for(var o,a=e.grid.tiles[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.even=s.x%2==s.y%2,s.odd=!s.even}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,_e),t}();Te.title="International Checkers",Te.type="Checkers";var Se=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new f.HexagonalGrid(1,!0,f.Shape.Odd,4,8),3,1))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,_e),t}();Se.title="Hex Czech Checkers",Se.type="Checkers";var je=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Ee=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.moves=[],this.player=1,this.scale=.33,this.winner=0;var i=2*t+1,o=t;this.grid=new f.RectangularGrid(1,void 0,f.Shape.Even,i,i,r?f.Rectangular8Tile:f.RectangularTile),this.tileMap=Object(f.toMap)(this.grid.tiles),Object(f.link)(this.tileMap),this.grid.tiles=this.grid.tiles.filter(function(e){var t=void 0,r=void 0,i=Math.abs(e.x-o),a=Math.abs(e.y-o);if(0===i&&0===a?(t=n,r=!n):t=i===a||(n?0===i||0===a:0===i?!(0===a):0===a),t){if(i!==a){var s=!0,u=!1,l=void 0;try{for(var c,h=e.links.keys()[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var f=c.value;Math.abs(f)>2&&(e.links.get(f).links.delete(-f),e.links.delete(f))}}catch(e){u=!0,l=e}finally{try{!s&&h.return&&h.return()}finally{if(u)throw l}}}}else!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!0,r=!1,i=void 0;try{for(var o,a=e.links.keys()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(e.links.has(-s)&&!t){var u=e.links.get(-s),l=e.links.get(s);l.links.set(-s,u),u.links.set(s,l)}else e.links.get(s).links.delete(-s)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}(e,r);return t})}return je(e,[{key:"links",value:function(){var e=new Map,t=!0,n=!1,r=void 0;try{for(var i,o=this.grid.tiles[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,s=!0,u=!1,l=void 0;try{for(var c,h=a.links[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var f=c.value,p=[a.key,f[1].key];p.sort(),e.set(p.toString(),[a,f[1]])}}catch(e){u=!0,l=e}finally{try{!s&&h.return&&h.return()}finally{if(u)throw l}}}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return Array.from(e.values())}},{key:"possible",value:function(){return[]}},{key:"move",value:function(e){throw new Error("Method not implemented.")}},{key:"undo",value:function(){throw new Error("Method not implemented.")}},{key:"evaluate",value:function(){throw new Error("Method not implemented.")}}]),e}();Ee.wip=!0;var Pe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,3))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ee),t}();Pe.title="Nine Men's Morris",Pe.type="Mills",Pe.created=-1400,Pe.location="Egypt",Pe.wiki="https://en.wikipedia.org/wiki/Nine_Men%27s_Morris";var Me=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,3,!1,!0))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ee),t}();Me.title="Twelve Men's Morris",Me.type="Mills";var Re=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,2))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ee),t}();Re.title="Six Men's Morris",Re.type="Mills",Re.created=-1400,Re.location="Egypt",Re.wiki="https://en.wikipedia.org/wiki/Six_Men%27s_Morris";var Ce=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,1,!0))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ee),t}();Ce.title="Three Men's Morris",Ce.type="Mills",Ce.created=-1400,Ce.location="Egypt",Ce.wiki="https://en.wikipedia.org/wiki/Three_Men%27s_Morris";var Ge=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,1,!0,!0))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ee),t}();Ge.title="Three Diagonal Men's Morris",Ge.type="Mills";var Ie=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Qe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.count=0,this.hit=0,this.depth=0,this.depth=t}return Ie(e,[{key:"select",value:function(e){return{move:this.move(e,this.depth),count:this.count,hit:this.hit}}},{key:"move",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.count=0;var r=e.possible(),i=-1/0,o=void 0,a=!0,s=!1,u=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var h=l.value;e.move(h);var f=this.minimax(t-1,e,-1/0,1/0,!n);e.undo(),f>i&&(i=f,o=h)}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}return o}},{key:"minimax",value:function(e,t,n,r,i){if(this.count++,0===e)return t.evaluate();var o=t.possible();if(i){var a=-1/0,s=!0,u=!1,l=void 0;try{for(var c,h=o[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var f=c.value;if(t.move(f),a=Math.max(a,this.minimax(e-1,t,n,r,!i)),t.undo(),r<=(n=Math.max(n,a)))return this.hit++,a}}catch(e){u=!0,l=e}finally{try{!s&&h.return&&h.return()}finally{if(u)throw l}}return a}var p=1/0,y=!0,d=!1,v=void 0;try{for(var g,b=o[Symbol.iterator]();!(y=(g=b.next()).done);y=!0){var w=g.value;if(t.move(w),p=Math.min(p,this.minimax(e-1,t,n,r,!i)),t.undo(),(r=Math.min(r,p))<=n)return this.hit++,p}}catch(e){d=!0,v=e}finally{try{!y&&b.return&&b.return()}finally{if(d)throw v}}return p}}]),e}(),Ne=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Le=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return Ne(e,[{key:"select",value:function(e){var t=e.possible();return{move:t[Math.floor(Math.random()*t.length)]}}}]),e}(),ze=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ae=function(){function e(t,n,r){Fe(this,e),this.action=r,this.parentNode=n,this.children=[],this.wins=0,this.visits=0,this.unexamined=t.possible(),this.activePlayer=t.player%2+1}return ze(e,[{key:"addChild",value:function(t,n){var r=new e(t,this,this.unexamined[n]);return this.unexamined.splice(n,1),this.children.push(r),r}},{key:"selectChild",value:function(){var e=null,t=Number.NEGATIVE_INFINITY,n=!0,r=!1,i=void 0;try{for(var o,a=this.children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=s.wins/s.visits+Math.sqrt(2*Math.log(this.visits)/s.visits);u>t&&(e=s,t=u)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return e}},{key:"update",value:function(e){this.visits++,this.wins+=this.activePlayer===e?1:-1===e?0:-1}},{key:"mostVisitedChild",value:function(){return this.children.sort(function(e,t){return t.visits-e.visits}),this.children[0]}}]),e}(),He=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8192,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;Fe(this,e),this.blockSize=r,this.maxTime=t,this.maxIterations=n}return ze(e,[{key:"select",value:function(e){var t=new Ae(e),n=Date.now(),r=n+this.maxTime,i=0;if(1===t.unexamined.length)return{duration:Date.now()-n,move:t.unexamined[0],nodesVisted:i};for(var o=0;o<this.maxIterations&&Date.now()<r;o+=this.blockSize)for(var a=0;a<this.blockSize;++a){for(var s=t,u=e.moves.length;0===s.unexamined.length&&s.children.length>0;)s=s.selectChild(),e.move(s.action);if(s.unexamined.length>0){var l=Math.floor(Math.random()*s.unexamined.length);e.move(s.unexamined[l]),s=s.addChild(e,l)}for(var c=e.possible();c.length>0;)e.move(c[Math.floor(Math.random()*c.length)]),++i,c=e.possible();for(var h=e.winner;s;)s.update(h),s=s.parentNode;for(;e.moves.length>u;)e.undo()}return{duration:Date.now()-n,move:t.mostVisitedChild().action,nodesVisted:i}}}]),e}(),We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ye=function(){function e(t,n,r){Ve(this,e),this.depth=t.moves.length,this.action=r,this.parentNode=n,this.children=[],this.wins=0,this.visits=0,this.unexamined=t.possible(),this.activePlayer=t.player%2+1}return De(e,[{key:"addChild",value:function(t,n){var r=new e(t,this,this.unexamined[n]);return this.unexamined.splice(n,1),this.children.push(r),r}},{key:"selectChild",value:function(){var e=null,t=Number.NEGATIVE_INFINITY,n=!0,r=!1,i=void 0;try{for(var o,a=this.children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=s.wins/s.visits+Math.sqrt(2*Math.log(this.visits)/s.visits);u>t&&(e=s,t=u)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return e}},{key:"update",value:function(e){this.visits++,this.wins+=this.activePlayer===e?1:-1===e?0:-1}},{key:"mostVisitedChild",value:function(){return this.children.sort(function(e,t){return t.visits-e.visits}),this.children[0]}}]),e}(),qe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8192,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;Ve(this,e),this.blockSize=r,this.maxTime=t,this.maxIterations=n}return De(e,[{key:"select",value:function(e){for(var t=this.getRoot(e)||new Ye(e),n=Date.now(),r=n+this.maxTime,i=0,o=0;o<this.maxIterations&&Date.now()<r;o+=this.blockSize)for(var a=0;a<this.blockSize;++a){for(var s=t,u=e.moves.length;0===s.unexamined.length&&s.children.length>0;)s=s.selectChild(),e.move(s.action);if(s.unexamined.length>0){var l=Math.floor(Math.random()*s.unexamined.length);e.move(s.unexamined[l]),s=s.addChild(e,l)}for(var c=e.possible();c.length>0;)e.move(c[Math.floor(Math.random()*c.length)]),++i,c=e.possible();for(var h=e.winner;s;)s.update(h),s=s.parentNode;for(;e.moves.length>u;)e.undo()}return this.cachedRoot=t.mostVisitedChild(),{duration:Date.now()-n,move:this.cachedRoot.action,nodesVisted:i}}},{key:"getRoot",value:function(e){var t=this;if(this.cachedRoot&&!(this.cachedRoot.depth>=e.moves.length)){for(var n=function(n){if(t.cachedRoot=t.cachedRoot.children.find(function(t){return t.action===e.moves[n]}),!t.cachedRoot)return{v:void 0}},r=this.cachedRoot.depth;r<e.moves.length;r++){var i=n(r);if("object"===(void 0===i?"undefined":We(i)))return i.v}return this.cachedRoot}}}]),e}(),Be=r,$e=n(9),Xe=n.n($e),Je=void 0,Ue=void 0;function Ze(){var e=function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var o,a=Object.keys(e)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=e[s],l=u.original,c=u.original?e[u.original]:{},f=_(m(u),m(c));f.id=x(s),f.originalId=l?x(l):void 0,f.instance=new e[s],f.tiles=f.instance.grid.tiles.length,f.original=c.title||u.title,f.originals.original=!c.title,f.link=f.wiki||f.source,f.linkText=f.wikiText||f.sourceText,f.grid=w.get(f.instance.grid.constructor),f.wip=u.wip,h(f.instance,f.instance.possible()),Object.freeze(f.instance),Object.freeze(f),t.push(f)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return t}(Be);return Xe()(function(){var t=this;this.ref("id"),b.forEach(function(e){return t.field(e)}),e.forEach(function(e){this.add(e)},this)})}self.onmessage=function(e){var t=function(e){Je||(Je=Ze(),Ue=u()(Je.invertedIndex).sort());var t={};try{e?Je.search(e).forEach(function(e){t[e.ref]=!0}):t=!1}catch(e){t=!1}var n=e?Ue.filter(function(t){return t.includes(e)}):Ue;return{map:t,autocomplete:n}}(e.data);self.postMessage(a()(t))}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(4);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(4),i=n(5).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){e.exports=!n(3)&&!n(2)(function(){return 7!=Object.defineProperty(n(15)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(4);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var r=n(17),i=n(16),o=n(14),a=Object.defineProperty;t.f=n(3)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(18),i=n(13);e.exports=n(3)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(20);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(5),i=n(1),o=n(21),a=n(19),s=function(e,t,n){var u,l,c,h=e&s.F,f=e&s.G,p=e&s.S,y=e&s.P,d=e&s.B,v=e&s.W,g=f?i:i[t]||(i[t]={}),b=g.prototype,w=f?r:p?r[t]:(r[t]||{}).prototype;for(u in f&&(n=t),n)(l=!h&&w&&void 0!==w[u])&&u in g||(c=l?w[u]:n[u],g[u]=f&&"function"!=typeof w[u]?n[u]:d&&l?o(c,r):v&&w[u]==c?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):y&&"function"==typeof c?o(Function.call,c):c,y&&((g.virtual||(g.virtual={}))[u]=c,e&s.R&&b&&!b[u]&&a(b,u,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){var r=n(22),i=n(1),o=n(2);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(5),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,n){var r=n(26)("keys"),i=n(25);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(6),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(6),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(7),i=n(29),o=n(28);e.exports=function(e){return function(t,n,a){var s,u=r(t),l=i(u.length),c=o(a,l);if(e&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(31);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(33),i=n(7),o=n(30)(!1),a=n(27)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,l=[];for(n in s)n!=a&&r(s,n)&&l.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(l,n)||l.push(n));return l}},function(e,t,n){var r=n(34),i=n(24);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(8);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(36),i=n(35);n(23)("keys",function(){return function(e){return i(r(e))}})},function(e,t,n){n(37),e.exports=n(1).Object.keys},function(e,t,n){var r=n(1),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}}]);