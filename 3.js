(self.webpackJsonp=self.webpackJsonp||[]).push([[3],{348:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s(350);const a=i.a.MILLISECONDS,n=i.a.LATENCY_DEFAULT,o=i.a.LATENCY_RATIO;const r=new class{get latency(){return isNaN(this._latency)&&(Promise.all([s.e(11),s.e(12)]).then(s.bind(null,92)).then(({Tone:t})=>{this._latency=t.supported&&!isNaN(t.context.baseLatency)?t.context.baseLatency*a*o:n}),this._latency=n),this._latency}get start(){return`+${this.latency/a}`}get stop(){return`+${this.latency/o/a}`}set last(t){this._last&&this._last.cancel&&(this._last.triggerRelease(this.stop),this._last=null),this._last=t}}},350:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s(27);const a={MILLISECONDS:1e3,LATENCY_DEFAULT:25,LATENCY_RATIO:2,SOUND_POLY:4,PLAYER_DRAW:-1,PLAYER_1:1,PLAYER_2:2,PAN_LEFT:-1,PAN_RIGHT:1,SOUND_CHORD_TIME:.8,SOUND_KICK_TIME:.2,SOUND_CHORD:{envelope:{attack:.01,decay:.4,sustain:.1,release:.4},oscillator:{type:"sawtooth3"},volume:-10},SOUND_FAIL_ENV:{attack:.025,decay:1.2,sustain:0,release:1},SOUND_FAIL_OSC:{type:"sawtooth",frequency:"C3",volume:-12},SOUND_TICK_ENV:{attack:.025,decay:.6,sustain:0,release:1},SOUND_TICK_OSC:{type:"sawtooth",frequency:"G3",volume:-12},SOUND_KICK_ENV:{attack:.01,decay:.4,sustain:.1,release:.4},SOUND_KICK_1:{type:"sawtooth3",frequency:"B3",volume:-12},SOUND_KICK_2:{type:"sawtooth3",frequency:"D4",volume:-12}};s.n(i)()(a)},355:function(t,e,s){"use strict";s.d(e,"b",function(){return c}),s.d(e,"a",function(){return l});var i=s(348),a=s(350);const n=a.a.SOUND_TICK_ENV,o=a.a.SOUND_TICK_OSC;let r;function c(t){r&&r.cancel(t)}function l(){Promise.all([s.e(11),s.e(12)]).then(s.bind(null,92)).then(({AmplitudeEnvelope:t,Oscillator:e,Tone:s})=>{s.supported&&(r||(r=new t(n).toMaster(),new e(o).connect(r).start()),i.a.last=r,r.triggerAttack(i.a.start))})}},360:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s(2);function a(t){return i.Theme[t.theme].replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+"-theme"}},365:function(t,e,s){"use strict";s.d(e,"a",function(){return u});var i=s(355),a=s(348),n=s(350);const o=n.a.PAN_LEFT,r=n.a.SOUND_KICK_ENV,c=n.a.SOUND_KICK_1,l=n.a.SOUND_KICK_TIME;let h;function u(){Promise.all([s.e(11),s.e(12)]).then(s.bind(null,92)).then(({AmplitudeEnvelope:t,Oscillator:e,Panner:s,Tone:n})=>{n.supported&&(h||(h=new s(o).toMaster(),(h=new t(r).connect(h)).attackCurve="exponential",new e(c).connect(h).start()),Object(i.b)(a.a.stop),h.triggerAttackRelease(l,a.a.start))})}},382:function(t,e,s){"use strict";var i=s(94),a=s(2);function n(t,e,s){const i=t[1],a=t[2];return i&&!a&&e===(s?1:2)||!i&&a&&e===(s?2:1)}e.a={computed:{sessionHuman:function(){return{1:Object(i.b)(this.$store.state.player[1]),2:Object(i.b)(this.$store.state.player[2])}},sessionWaiting(){return!this.sessionHuman[this.game.player]&&!this.game.winner},sessionCanSwitch(){return!this.game.moves.length&&this.sessionHuman[1]&&!this.sessionHuman[2]},sessionHotSeat(){return this.sessionHuman[1]&&this.sessionHuman[2]},sessionSolo(){return this.sessionHuman[1]!==this.sessionHuman[2]},sessionRobotMatch(){return!this.sessionHuman[1]&&!this.sessionHuman[2]},sessionOther(){return 3-this.game.player},sessionHumanWin(){return n(this.sessionHuman,this.game.winner,!0)},sessionHumanLost(){return n(this.sessionHuman,this.game.winner,!1)},sessionNames(){return a.StoneNames[a.ThemeStones[this.game.constructor.theme]]},sessionSoloDraw(){return this.sessionSolo&&-1===this.game.winner},sessionTimedOut(){return this.sessionHotSeat&&this.game.expired}}}},384:function(t,e,s){"use strict";s.d(e,"b",function(){return a}),s.d(e,"a",function(){return n});var i=s(2);function a(t,e,s,i){return Math.min(s/t,i/e)}function n(t,e,s=!0){return void 0===t[e]&&s&&t.original?function(t,e,s){if(void 0===i.Games[t.original][e])return n(i.Games[t.original],e,s);return i.Games[t.original][e]}(t,e,s):t[e]}},385:function(t,e,s){"use strict";var i=s(365),a=s(355),n=s(348),o=s(350);const r=o.a.PAN_RIGHT,c=o.a.SOUND_KICK_ENV,l=o.a.SOUND_KICK_2,h=o.a.SOUND_KICK_TIME;let u;function m(){Promise.all([s.e(11),s.e(12)]).then(s.bind(null,92)).then(({AmplitudeEnvelope:t,Oscillator:e,Panner:s,Tone:i})=>{i.supported&&(u||(u=new s(r).toMaster(),(u=new t(c).connect(u)).attackCurve="exponential",new e(l).connect(u).start()),Object(a.b)(n.a.stop),u.triggerAttackRelease(h,n.a.start))})}const d=o.a.SOUND_FAIL_ENV,v=o.a.SOUND_FAIL_OSC;let p;function _(){Promise.all([s.e(11),s.e(12)]).then(s.bind(null,92)).then(({AmplitudeEnvelope:t,Oscillator:e,Tone:s})=>{s.supported&&(p||(p=new t(d).toMaster(),new e(v).connect(p).start()),n.a.last=p,p.triggerAttack(n.a.start))})}const g=o.a.SOUND_POLY,f=o.a.PLAYER_DRAW,b=o.a.PLAYER_1,w=o.a.PLAYER_2,O=o.a.SOUND_CHORD_TIME,y=o.a.SOUND_CHORD;let R;const A={[f]:["C2","E3","G3","C4"],[b]:["B2","G3","B3","D4"],[w]:["A2","F3","A3","D4"]};function E(t=b){Promise.all([s.e(11),s.e(12)]).then(s.bind(null,92)).then(({PolySynth:e,Tone:s})=>{s.supported&&(R||(R=new e(g).toMaster()).set(y),Object(a.b)(n.a.stop),R.triggerAttackRelease(A[t],O,n.a.start))})}s.d(e,"c",function(){return i.a}),s.d(e,"d",function(){return m}),s.d(e,"b",function(){return _}),s.d(e,"f",function(){return a.a}),s.d(e,"a",function(){return E}),s.d(e,"e",function(){return n.a})},393:function(t,e,s){"use strict";e.a={methods:{playerSwitch(){this.$store.commit("player",{1:this.$store.state.player[2],2:this.$store.state.player[1]})}}}},394:function(t,e,s){"use strict";let i;function a(t,e){window.navigator.vibrate&&(i&&(clearTimeout(i),i=null),e?i=setTimeout(()=>{window.navigator.vibrate(t)},e):window.navigator.vibrate(t))}s.d(e,"a",function(){return a})},398:function(t,e,s){"use strict";s.d(e,"a",function(){return i});const i=new(s(5).a)},566:function(t,e,s){t.exports=function(){return new Worker(s.p+"e295aa2f6b7d646ea5b3.worker.js")}},567:function(t,e,s){(t.exports=s(1)(!1)).push([t.i,".clickable[data-v-83cfceaa]:hover{cursor:pointer}.mt-1-5[data-v-83cfceaa]{margin-top:5px}.divider-large[data-v-83cfceaa],.icon-large>svg[data-v-83cfceaa]{width:96px;height:96px;margin:12px}.icon-large[data-v-83cfceaa]{display:block}.relative[data-v-83cfceaa]{position:relative}.absolute[data-v-83cfceaa]{position:absolute}",""])},568:function(t,e,s){var i=s(567);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,s(138).default)("07b15cbc",i,!0,{})},619:function(t,e,s){"use strict";s.r(e);var i=s(2),a=s(94),n=s(398),o=s(159),r=s.n(o),c=s(31),l=s.n(c);const h=s(566);var u=s(360),m=s(46),d=s(384),v=s(385),p=s(394),_=s(27);const g={AXE_X:0,AXE_Y:1,MINIMAL_GAME_BOARD:180,MOBILE_BREAKPOINT:1264,RESIZE_REFRESH_DELAY:100,SQUARE_RATIO:1,DRAWER_WIDTH:300,ZERO_WIDTH:0,SHORT_BREAKPOINT:800,GAME_MARGIN_X:32,GAME_MARGIN_Y:128,GAME_MARGIN_Y_SHORT:80,GAME_FOOTER:16};s.n(_)()(g);const f=g.AXE_X,b=g.AXE_Y,w=g.MINIMAL_GAME_BOARD,O=g.MOBILE_BREAKPOINT,y=g.RESIZE_REFRESH_DELAY,R=g.SQUARE_RATIO,A=g.DRAWER_WIDTH,E=g.ZERO_WIDTH,S=g.SHORT_BREAKPOINT,I=g.GAME_MARGIN_X,T=g.GAME_MARGIN_Y,N=g.GAME_MARGIN_Y_SHORT,x=g.GAME_FOOTER;let k=null;var C={data:()=>({Shared:m.a,vertical:window.innerWidth<window.innerHeight}),watch:{"Shared.drawer":function(){this.onResize()}},methods:{onResize(){this.onResizeUpdated(),k&&(clearTimeout(k),k=null),k=setTimeout(()=>{k=null,this.onResizeUpdated()},y)},onResizeUpdated(){let t=this.game.grid.bounds();const e=window.innerWidth-(m.a.drawer&&window.innerWidth>=O?A:E),s=window.innerHeight;if(this.game.landscape)this.vertical=!1;else{const i=(t.maxX-t.minX)/(t.maxY-t.minY);this.vertical=i>R&&e<s}var i;this.frame=function(t,e,s,i){return t?[e-N-i,s-I]:e<S?[s-I,e-N-i]:[s-I,e-T]}(this.vertical,s,e,this.game.score?x:0),(i=this.frame)[f]=Math.max(w,i[f]),i[b]=Math.max(w,i[b])}}};var D=s(382),M=s(393);let H=0;var P={components:{GBoard:()=>s.e(25).then(s.bind(null,163)),GPlayerDivider:()=>s.e(14).then(s.bind(null,616)),GVerdict:()=>s.e(24).then(s.bind(null,615)),GInfo:()=>s.e(17).then(s.bind(null,610)),VDialog:()=>s.e(13).then(function(){var t=s(623);return"object"==typeof t&&t&&t.__esModule?t:Object.assign({},"object"==typeof t&&t,{default:t})})},mixins:[C,D.a,M.a],data:()=>({game:null,info:null,frame:null,margin:20,fab:!1,working:!1,robotPlayer:{},theme:null,showVerdict:!1,rules:!1,showRules:!0,rulesText:!0,rulesInfo:!1,passConfirm:!1}),computed:{sample(){const t=new this.game.constructor;return Object(i.update)(t,this.game.constructor.sample),t}},watch:{"game.player":function(){this.robot()},"game.winner":function(t){t&&(this.showVerdict=!0,this.update())},"game.moves.length":function(t){t&&this.sessionHotSeat&&!this.game.moves[t-1]&&(this.passConfirm=!0)},"$store.state.player":{handler:function(){this.initRobots(),this.initTimer(),this.robot()},deep:!0},"$store.state.timer":function(t){this.initTimer()},"$route.params.id":function(t){this.initGame(),this.initRobots(),this.onResize(),this.update()}},mounted(){document.body.scrollTop=document.documentElement.scrollTop=0},created(){this.initGame(),this.initRobots(),this.onResize(),this.update(),n.a.$on("game",this.update)},destroyed(){n.a.$off("game",this.update),this.destroyRobots(),this.game.dispose&&this.game.dispose()},methods:{initTimer(){this.game.limit=this.sessionHotSeat?this.$store.state.timer:0},initGame(){!this.sessionHuman[1]&&this.sessionHuman[2]&&this.playerSwitch(),this.info=i.Info.game(this.$route.params.id);const t=this.$route.params.id+"Game",e=new i.Games[t];Object(i.initHighlight)(e);const s=new i.TimedProxy(e);this.game=m.a.game=s,this.theme=Object(u.a)(i.Games[t]),this.initTimer(),this.showRules&&!this.sessionRobotMatch&&this.$store.state.rules&&(this.showRules=!1,setTimeout(()=>{this.rulesText=Object(d.a)(e.constructor,"rules"),this.rules=!!this.rulesText},200))},initRobot(t){return!Object(a.b)(t)&&new class{constructor(t,e){this.id=0,this.promises={},this.worker=new h,this.worker.onmessage=this.message.bind(this),this.worker.postMessage({player:t,game:e})}message(t){const e=JSON.parse(t.data);this.promises[e.id].resolve(e),delete this.promises[e.id]}select(t){return this.post({game:Object(i.stringify)(t).join(", ")}).then(e=>(e.move=t.stringToMove(e.move),e))}post(t){this.id++;const e=new l.a((t,e)=>{this.promises[this.id]={resolve:t,reject:e}});return this.worker.postMessage(r()({},t,{id:this.id})),e}terminate(){this.worker.terminate(),delete this.worker}}(t,this.$route.params.id)},destroyRobots(){this.robotPlayer[1]&&(this.robotPlayer[1].terminate(),this.working=!1),this.robotPlayer[2]&&(this.robotPlayer[2].terminate(),this.working=!1)},initRobots(){this.destroyRobots(),this.robotPlayer={1:this.initRobot(this.$store.state.player[1]),2:this.initRobot(this.$store.state.player[2])}},kickSound(){this.$store.state.sound&&(this.game.winner?Object(v.a)(this.game.winner):1===this.game.player?Object(v.c)():Object(v.d)()),this.$store.state.vibration&&!this.sessionRobotMatch&&Object(p.a)(50,this.$store.state.sound?2*v.e.latency:0)},robot(){const t=this.robotPlayer[this.game.player];this.working||this.game.winner||!t||(this.working=!0,H++,this.runRobot(t,H))},runRobot(t,e){const s=Date.now();t.select(this.game).then(t=>{setTimeout(()=>{e===H&&(this.working=!1,Object(i.undoAction)(this.game),this.game.move(t.move),this.kickSound(),this.update(),this.robot())},Math.max(0,400-Date.now()+s))})},move(t){if(this.rules=!1,this.game.winner||this.working)return;const e=Object(i.selectAction)(this.game,t);!1!==e&&(e?(Object(i.undoAction)(this.game),this.game.move(e),this.kickSound(),this.update()):this.kickSound())},update(){Object(i.undoAction)(this.game),this.game.winner||Object(i.initActions)(this.game,this.game.possible())},undo(){this.showVerdict=!1;const t=this.sessionHotSeat?Object(i.other)(this.game.player):this.game.player;Object(i.undoFor)(this.game,t),this.update()},reset(){this.fab=!1,this.showVerdict=!1,this.initGame(),this.onResize(),this.initRobots(),this.update(),this.robot()}}},G=s(91);var L=function(t){s(568)},U=Object(G.a)(P,function(){var t,e,s=this,i=s.$createElement,a=s._self._c||i;return a("div",{directives:[{name:"resize",rawName:"v-resize",value:s.onResize,expression:"onResize"}],class:s.theme},[a("v-layout",{staticStyle:{"margin-bottom":"-36px"},attrs:{column:"",wrap:"","align-center":"","align-content-center":""}},[a("div",{staticClass:"mt-1-5",staticStyle:{"text-align":"center"}},[a("g-board",{attrs:{game:s.game,coords:s.$store.state.coords,frame:s.frame,margin:s.margin,move:s.move,vertical:s.vertical,waiting:s.sessionWaiting,interactive:"",centered:""}})],1)]),s._v(" "),s.game.moves.length&&s.game.score?a("v-footer",{staticClass:"pb-2",attrs:{app:"",fixed:"",height:"auto",color:"transparent"}},[a("v-flex",{staticClass:"title text-xs-right",staticStyle:{width:"60px"}},[s._v(s._s(s.game.score[1]))]),s._v(" "),a("g-player-divider",{staticClass:"mx-3 d-block"}),s._v(" "),a("v-flex",{staticClass:"title text-xs-left",staticStyle:{width:"60px"}},[s._v(s._s(s.game.score[2]))])],1):s._e(),s._v(" "),a("v-speed-dial",{staticStyle:{"z-index":"9"},attrs:{fixed:"",right:"",bottom:"",direction:"top",transition:"slide-y-reverse-transition"},model:{value:s.fab,callback:function(t){s.fab=t},expression:"fab"}},[a("v-fab-transition",{attrs:{slot:"activator"},slot:"activator"},[s.game.moves.length?a("v-btn",{attrs:{color:s.$store.state.dark?"grey darken-4":"grey darken-3",dark:"",fab:"",hover:""},model:{value:s.fab,callback:function(t){s.fab=t},expression:"fab"}},[a("v-icon",{staticClass:"white--text"},[s._v("gamepad")]),s._v(" "),a("v-icon",{staticClass:"white--text"},[s._v("close")])],1):s._e()],1),s._v(" "),s.game.moves.length?a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"grey darken-3"},on:{click:function(t){t.stopPropagation(),s.undo()}}},[a("v-icon",{staticClass:"white--text"},[s._v("undo")])],1):s._e(),s._v(" "),s.game.moves.length?a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"grey darken-3"},on:{click:function(t){t.stopPropagation(),s.reset()}}},[a("v-icon",{staticClass:"white--text"},[s._v("refresh")])],1):s._e()],1),s._v(" "),a("g-verdict",{attrs:{reset:s.reset,game:s.game,theme:s.theme},model:{value:s.showVerdict,callback:function(t){s.showVerdict=t},expression:"showVerdict"}}),s._v(" "),a("v-dialog",{attrs:{value:s.rules,"max-width":"280px"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"title pa-2"},[s._v(s._s(s._f("titled")(s.game.constructor.title)))])]),s._v(" "),s.rulesInfo?s._e():a("v-card-text",{staticClass:"pt-0 pb-4"},s._l(s.rulesText,function(t,e){return a("div",{key:e,staticClass:"px-2"},[s._v(s._s(t))])})),s._v(" "),s.rulesInfo?s._e():a("div",{staticClass:"text-xs-center"},[a("g-board",{staticClass:"preview d-inline-block",attrs:{game:s.sample,frame:[240,164],margin:4}})],1),s._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:s.rulesInfo,expression:"rulesInfo"}]},[a("g-info",{staticClass:"mx-2",attrs:{game:s.info}})],1),s._v(" "),a("v-card-actions",[a("v-spacer"),s._v(" "),a("v-btn",{staticStyle:{"min-width":"0"},attrs:{flat:""},on:{click:function(t){s.rulesInfo=!s.rulesInfo}}},[s._v(s._s(s.rulesInfo?"Rules":"Info"))]),s._v(" "),a("v-btn",{staticStyle:{"min-width":"0"},attrs:{flat:""},on:{click:function(t){s.rules=!1}}},[s._v("Ok")])],1)],1)],1),s._v(" "),a("v-dialog",{attrs:{value:s.passConfirm,"max-width":"280px",persistent:""}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"title pa-2"},[s._v("No moves available")])]),s._v(" "),a("div",{staticClass:"text-xs-center",class:(t={},t[s.theme]=!0,t)},[a("div",{staticClass:"d-inline-block relative player",class:(e={},e["player-"+s.sessionOther]=!0,e),staticStyle:{height:"120px",width:"120px"}},[a("svg",{staticClass:"d-block absolute",attrs:{height:"120",width:"120"}},[a("circle",{class:"symbol-"+s.sessionOther,attrs:{cx:"60",cy:"60",r:"60"}})]),s._v(" "),a("v-icon",{staticClass:"absolute player-status icon-large"},[s._v("close")])],1)]),s._v(" "),a("v-card-actions",[a("v-spacer"),s._v(" "),a("v-btn",{staticStyle:{"min-width":"0"},attrs:{flat:""},on:{click:function(t){s.game.start(),s.passConfirm=!1}}},[s._v("Pass")])],1)],1)],1)],1)},[],!1,L,"data-v-83cfceaa",null);e.default=U.exports}}]);