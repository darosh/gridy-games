(self.webpackJsonp=self.webpackJsonp||[]).push([[3],{248:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(264),s=n.n(i),a=n(263),o=n.n(a),r=new(function(){function t(){s()(this,t)}return o()(t,[{key:"latency",get:function(){var t=this;return isNaN(this._latency)&&(Promise.all([n.e(9),n.e(10)]).then(n.bind(null,72)).then(function(e){var n=e.Tone;t._latency=n.supported&&!isNaN(n.context.baseLatency)?1e3*n.context.baseLatency*2:25}),this._latency=100),this._latency}},{key:"start",get:function(){return"+"+this.latency/1e3}},{key:"stop",get:function(){return"+"+this.latency/2/1e3}},{key:"last",set:function(t){this._last&&this._last.cancel&&(this._last.triggerRelease(this.stop),this._last=null),this._last=t}}]),t}())},251:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return o});var i=n(248),s=void 0;function a(t){s&&s.cancel(t)}function o(){Promise.all([n.e(9),n.e(10)]).then(n.bind(null,72)).then(function(t){var e=t.AmplitudeEnvelope,n=t.Oscillator;t.Tone.supported&&(s||(s=new e({attack:.025,decay:.6,sustain:0,release:1}).toMaster(),new n({type:"sawtooth",frequency:"G3",volume:-12}).connect(s).start()),i.a.last=s,s.triggerAttack(i.a.start))})}},256:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n(1);function s(t){return i.Theme[t.theme].replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+"-theme"}},259:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n(251),s=n(248),a=void 0;function o(){Promise.all([n.e(9),n.e(10)]).then(n.bind(null,72)).then(function(t){var e=t.AmplitudeEnvelope,n=t.Oscillator,o=t.Panner;t.Tone.supported&&(a||(a=new o(-1).toMaster(),(a=new e({attack:.01,decay:.4,sustain:.1,release:.4}).connect(a)).attackCurve="exponential",new n({type:"sawtooth3",frequency:"B3",volume:-12}).connect(a).start()),Object(i.b)(s.a.stop),a.triggerAttackRelease(.2,s.a.start))})}},263:function(t,e,n){"use strict";e.__esModule=!0;var i,s=n(79),a=(i=s)&&i.__esModule?i:{default:i};e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,a.default)(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()},264:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},274:function(t,e,n){"use strict";var i=n(42),s=n(1);function a(t,e,n){var i=t[1],s=t[2];return i&&!s&&e===(n?1:2)||!i&&s&&e===(n?2:1)}e.a={computed:{sessionHuman:function(){return{1:Object(i.b)(this.$store.state.player[1]),2:Object(i.b)(this.$store.state.player[2])}},sessionWaiting:function(){return!this.sessionHuman[this.game.player]&&!this.game.winner},sessionCanSwitch:function(){return!this.game.moves.length&&this.sessionHuman[1]&&!this.sessionHuman[2]},sessionHotSeat:function(){return this.sessionHuman[1]&&this.sessionHuman[2]},sessionSolo:function(){return this.sessionHuman[1]!==this.sessionHuman[2]},sessionRobotMatch:function(){return!this.sessionHuman[1]&&!this.sessionHuman[2]},sessionOther:function(){return 3-this.game.player},sessionHumanWin:function(){return a(this.sessionHuman,this.winner,!0)},sessionHumanLost:function(){return a(!1)},sessionNames:function(){return s.StoneNames[s.ThemeStones[this.game.constructor.theme]]},sessionSoloDraw:function(){return this.sessionSolo&&-1===this.game.winner},sessionTimedOut:function(){return this.sessionHotSeat&&this.game.expired}}}},279:function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"a",function(){return a});var i=n(1);function s(t,e,n,i){return Math.min(n/t,i/e)}function a(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return void 0===t[e]&&n&&t.original?function(t,e,n){if(void 0===i.Games[t.original][e])return a(i.Games[t.original],e,n);return i.Games[t.original][e]}(t,e,n):t[e]}},284:function(t,e,n){"use strict";var i=n(259),s=n(251),a=n(248),o=void 0;function r(){Promise.all([n.e(9),n.e(10)]).then(n.bind(null,72)).then(function(t){var e=t.AmplitudeEnvelope,n=t.Oscillator,i=t.Panner;t.Tone.supported&&(o||(o=new i(1).toMaster(),(o=new e({attack:.01,decay:.4,sustain:.1,release:.4}).connect(o)).attackCurve="exponential",new n({type:"sawtooth3",frequency:"D4",volume:-12}).connect(o).start()),Object(s.b)(a.a.stop),o.triggerAttackRelease(.2,a.a.start))})}var c=void 0;function u(){Promise.all([n.e(9),n.e(10)]).then(n.bind(null,72)).then(function(t){var e=t.AmplitudeEnvelope,n=t.Oscillator;t.Tone.supported&&(c||(c=new e({attack:.025,decay:1.2,sustain:0,release:1}).toMaster(),new n({type:"sawtooth",frequency:"C3",volume:-12}).connect(c).start()),a.a.last=c,c.triggerAttack(a.a.start))})}var l=void 0,h={"-1":["C2","E3","G3","C4"],1:["B2","G3","B3","D4"],2:["A2","F3","A3","D4"]};function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Promise.all([n.e(9),n.e(10)]).then(n.bind(null,72)).then(function(e){var n=e.PolySynth;e.Tone.supported&&(l||(l=new n(4).toMaster()).set({envelope:{attack:.01,decay:.4,sustain:.1,release:.4},oscillator:{type:"sawtooth3"},volume:-10}),Object(s.b)(a.a.stop),l.triggerAttackRelease(h[t],.8,a.a.start))})}n.d(e,"c",function(){return i.a}),n.d(e,"d",function(){return r}),n.d(e,"b",function(){return u}),n.d(e,"f",function(){return s.a}),n.d(e,"a",function(){return d}),n.d(e,"e",function(){return a.a})},285:function(t,e,n){"use strict";e.a={methods:{playerSwitch:function(){this.$store.commit("player",{1:this.$store.state.player[2],2:this.$store.state.player[1]})}}}},286:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=void 0;function s(t,e){window.navigator.vibrate&&(i&&(clearTimeout(i),i=null),e?i=setTimeout(function(){window.navigator.vibrate(t)},e):window.navigator.vibrate(t))}},290:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=new(n(6).a)},380:function(t,e,n){t.exports=function(){return new Worker(n.p+"58ecd1443070d68a4bbc.worker.js")}},381:function(t,e,n){(t.exports=n(2)(!1)).push([t.i,".clickable[data-v-2480d9c0]:hover{cursor:pointer}.mt-1-5[data-v-2480d9c0]{margin-top:5px}.divider-large[data-v-2480d9c0],.icon-large>svg[data-v-2480d9c0]{width:96px;height:96px;margin:12px}.icon-large[data-v-2480d9c0]{display:block}.relative[data-v-2480d9c0]{position:relative}.absolute[data-v-2480d9c0]{position:absolute}",""])},382:function(t,e,n){var i=n(381);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(71).default)("0781ee18",i,!0,{})},440:function(t,e,n){"use strict";n.r(e);var i=n(1),s=n(42),a=n(290),o=n(101),r=n.n(o),c=n(329),u=n.n(c),l=n(264),h=n.n(l),d=n(263),m=n.n(d),v=n(380),f=function(){function t(e,n){h()(this,t),this.id=0,this.promises={},this.worker=new v,this.worker.onmessage=this.message.bind(this),this.worker.postMessage({player:e,game:n})}return m()(t,[{key:"message",value:function(t){var e=JSON.parse(t.data);this.promises[e.id].resolve(e),delete this.promises[e.id]}},{key:"select",value:function(t){return this.post({game:Object(i.stringify)(t).join(", ")}).then(function(e){return e.move=t.stringToMove(e.move),e})}},{key:"post",value:function(t){var e=this;this.id++;var n=new u.a(function(t,n){e.promises[e.id]={resolve:t,reject:n}});return this.worker.postMessage(r()({},t,{id:this.id})),n}},{key:"terminate",value:function(){this.worker.terminate(),delete this.worker}}]),t}(),p=n(256),g=n(22),b=n(279),w=n(284),y=n(286),k=null,x={data:function(){return{Shared:g.a,vertical:window.innerWidth<window.innerHeight}},watch:{"Shared.drawer":function(){this.onResize()}},methods:{onResize:function(){var t=this;this.onResizeUpdated(),k&&(clearTimeout(k),k=null),k=setTimeout(function(){k=null,t.onResizeUpdated()},100)},onResizeUpdated:function(){var t,e=this.game.grid.bounds(),n=window.innerWidth-(g.a.drawer&&window.innerWidth>=1264?300:0),i=window.innerHeight;if(this.game.landscape)this.vertical=!1;else{var s=(e.maxX-e.minX)/(e.maxY-e.minY);this.vertical=s>1&&n<i}this.frame=function(t,e,n){return t?[e-64-16,n-32]:e<800?[n-32,e-64-16]:[n-32,e-128]}(this.vertical,i,n),(t=this.frame)[0]=Math.max(180,t[0]),t[1]=Math.max(180,t[1])}}};var _=n(274),O=n(285),R=0,C={components:{GBoard:function(){return n.e(22).then(n.bind(null,103))},GPlayerDivider:function(){return n.e(11).then(n.bind(null,436))},GVerdict:function(){return n.e(21).then(n.bind(null,438))},VDialog:function(){return n.e(14).then(function(){var t=n(442);return"object"==typeof t&&t&&t.__esModule?t:Object.assign({},"object"==typeof t&&t,{default:t})})}},mixins:[x,_.a,O.a],data:function(){return{game:null,frame:null,margin:20,fab:!1,working:!1,robotPlayer:{},theme:null,showVerdict:!1,rules:!1,showRules:!0,rulesText:!0,passConfirm:!1}},computed:{sample:function(){var t=new this.game.constructor;return Object(i.update)(t,this.game.constructor.sample),t}},watch:{"game.player":function(){this.robot()},"game.winner":function(t){t&&(this.showVerdict=!0,this.update())},"game.moves.length":function(t){t&&this.sessionHotSeat&&!this.game.moves[t-1]&&(this.passConfirm=!0)},"$store.state.player":{handler:function(){this.initRobots(),this.initTimer(),this.robot()},deep:!0},"$store.state.timer":function(t){this.initTimer()},"$route.params.id":function(t){this.initGame(),this.initRobots(),this.onResize(),this.update()}},mounted:function(){document.body.scrollTop=document.documentElement.scrollTop=0},created:function(){this.initGame(),this.initRobots(),this.onResize(),this.update(),a.a.$on("game",this.update)},destroyed:function(){a.a.$off("game",this.update),this.destroyRobots(),this.game.dispose&&this.game.dispose()},methods:{initTimer:function(){this.game.limit=this.sessionHotSeat?this.$store.state.timer:0},initGame:function(){var t=this;!this.sessionHuman[1]&&this.sessionHuman[2]&&this.playerSwitch();var e=this.$route.params.id+"Game",n=new i.Games[e];Object(i.initHighlight)(n);var s=new i.TimedProxy(n);this.game=g.a.game=s,this.theme=Object(p.a)(i.Games[e]),this.initTimer(),this.showRules&&!this.sessionRobotMatch&&this.$store.state.rules&&(this.showRules=!1,setTimeout(function(){t.rulesText=Object(b.a)(n.constructor,"rules"),t.rules=!!t.rulesText},200))},initRobot:function(t){return!Object(s.b)(t)&&new f(t,this.$route.params.id)},destroyRobots:function(){this.robotPlayer[1]&&(this.robotPlayer[1].terminate(),this.working=!1),this.robotPlayer[2]&&(this.robotPlayer[2].terminate(),this.working=!1)},initRobots:function(){this.destroyRobots(),this.robotPlayer={1:this.initRobot(this.$store.state.player[1]),2:this.initRobot(this.$store.state.player[2])}},kickSound:function(){this.$store.state.sound&&(this.game.winner?Object(w.a)(this.game.winner):1===this.game.player?Object(w.c)():Object(w.d)()),this.$store.state.vibration&&!this.sessionRobotMatch&&Object(y.a)(50,this.$store.state.sound?2*w.e.latency:0)},robot:function(){var t=this.robotPlayer[this.game.player];this.working||this.game.winner||!t||(this.working=!0,R++,this.runRobot(t,R))},runRobot:function(t,e){var n=this;t.select(this.game).then(function(t){e===R&&(n.working=!1,Object(i.undoAction)(n.game),n.game.move(t.move),n.kickSound(),n.update(),n.robot())})},move:function(t){if(this.rules=!1,!this.game.winner&&!this.working){var e=Object(i.selectAction)(this.game,t);!1!==e&&(e?(Object(i.undoAction)(this.game),this.game.move(e),this.kickSound(),this.update()):this.kickSound())}},update:function(){Object(i.undoAction)(this.game),this.game.winner||Object(i.initActions)(this.game,this.game.possible())},undo:function(){this.showVerdict=!1;var t=this.sessionHotSeat?Object(i.other)(this.game.player):this.game.player;Object(i.undoFor)(this.game,t),this.update()},reset:function(){this.fab=!1,this.showVerdict=!1,this.initGame(),this.onResize(),this.initRobots(),this.update(),this.robot()}}},j=n(40);var S=function(t){n(382)},T=Object(j.a)(C,function(){var t,e,n=this,i=n.$createElement,s=n._self._c||i;return s("div",{directives:[{name:"resize",rawName:"v-resize",value:n.onResize,expression:"onResize"}],class:n.theme},[s("v-layout",{attrs:{column:"",wrap:"","align-center":"","align-content-center":""}},[s("div",{staticClass:"mt-1-5",staticStyle:{"text-align":"center"}},[s("g-board",{attrs:{game:n.game,coords:n.$store.state.coords,frame:n.frame,margin:n.margin,move:n.move,vertical:n.vertical,waiting:n.sessionWaiting,interactive:"",centered:""}})],1)]),n._v(" "),n.game.moves.length&&n.game.score?s("v-layout",{staticClass:"text-xs-center player-score",staticStyle:{position:"absolute",bottom:"12px",left:"2px",right:"0"},attrs:{row:"","justify-center":"","align-center":""}},[s("v-flex",{staticClass:"title text-xs-right",staticStyle:{width:"60px"}},[n._v(n._s(n.game.score[1]))]),n._v(" "),s("g-player-divider",{staticClass:"mx-3 d-block"}),n._v(" "),s("v-flex",{staticClass:"title text-xs-left",staticStyle:{width:"60px"}},[n._v(n._s(n.game.score[2]))])],1):n._e(),n._v(" "),s("v-speed-dial",{staticStyle:{"z-index":"9"},attrs:{fixed:"",right:"",bottom:"",direction:"top",transition:"slide-y-reverse-transition"},model:{value:n.fab,callback:function(t){n.fab=t},expression:"fab"}},[s("v-fab-transition",{attrs:{slot:"activator"},slot:"activator"},[n.game.moves.length?s("v-btn",{attrs:{color:n.$store.state.dark?"grey darken-4":"grey darken-3",dark:"",fab:"",hover:""},model:{value:n.fab,callback:function(t){n.fab=t},expression:"fab"}},[s("v-icon",{staticClass:"white--text"},[n._v("gamepad")]),n._v(" "),s("v-icon",{staticClass:"white--text"},[n._v("close")])],1):n._e()],1),n._v(" "),n.game.moves.length?s("v-btn",{attrs:{fab:"",dark:"",small:"",color:"grey darken-3"},on:{click:function(t){t.stopPropagation(),n.undo()}}},[s("v-icon",{staticClass:"white--text"},[n._v("undo")])],1):n._e(),n._v(" "),n.game.moves.length?s("v-btn",{attrs:{fab:"",dark:"",small:"",color:"grey darken-3"},on:{click:function(t){t.stopPropagation(),n.reset()}}},[s("v-icon",{staticClass:"white--text"},[n._v("refresh")])],1):n._e()],1),n._v(" "),s("g-verdict",{attrs:{reset:n.reset,game:n.game,theme:n.theme},model:{value:n.showVerdict,callback:function(t){n.showVerdict=t},expression:"showVerdict"}}),n._v(" "),s("v-dialog",{attrs:{value:n.rules,"max-width":"280px"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"title pa-2"},[n._v(n._s(n._f("titled")(n.game.constructor.title)))])]),n._v(" "),s("v-card-text",{staticClass:"pt-0 pb-4"},n._l(n.rulesText,function(t,e){return s("div",{key:e,staticClass:"px-2"},[n._v(n._s(t))])})),n._v(" "),s("div",{staticClass:"text-xs-center"},[s("g-board",{staticClass:"preview d-inline-block",attrs:{game:n.sample,frame:[240,164],margin:4}})],1),n._v(" "),s("v-card-actions",[s("v-spacer"),n._v(" "),s("v-btn",{staticStyle:{"min-width":"0"},attrs:{flat:""},on:{click:function(t){n.rules=!1}}},[n._v("Ok")])],1)],1)],1),n._v(" "),s("v-dialog",{attrs:{value:n.passConfirm,"max-width":"280px",persistent:""}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"title pa-2"},[n._v("No moves available")])]),n._v(" "),s("div",{staticClass:"text-xs-center",class:(t={},t[n.theme]=!0,t)},[s("div",{staticClass:"d-inline-block relative player",class:(e={},e["player-"+n.sessionOther]=!0,e),staticStyle:{height:"120px",width:"120px"}},[s("svg",{staticClass:"d-block absolute",attrs:{height:"120",width:"120"}},[s("circle",{class:"symbol-"+n.sessionOther,attrs:{cx:"60",cy:"60",r:"60"}})]),n._v(" "),s("v-icon",{staticClass:"absolute player-status icon-large"},[n._v("close")])],1)]),n._v(" "),s("v-card-actions",[s("v-spacer"),n._v(" "),s("v-btn",{staticStyle:{"min-width":"0"},attrs:{flat:""},on:{click:function(t){n.game.start(),n.passConfirm=!1}}},[n._v("Pass")])],1)],1)],1)],1)},[],!1,S,"data-v-2480d9c0",null);e.default=T.exports}}]);