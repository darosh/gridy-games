(self.webpackJsonp=self.webpackJsonp||[]).push([[3],{248:function(t,e,i){"use strict";i.d(e,"a",function(){return o});var n=i(264),a=i.n(n),s=i(263),r=i.n(s),o=new(function(){function t(){a()(this,t)}return r()(t,[{key:"latency",get:function(){var t=this;return isNaN(this._latency)&&(Promise.all([i.e(9),i.e(10)]).then(i.bind(null,32)).then(function(e){var i=e.Tone;t._latency=i.supported&&!isNaN(i.context.baseLatency)?1e3*i.context.baseLatency*2:25}),this._latency=100),this._latency}},{key:"start",get:function(){return"+"+this.latency/1e3}},{key:"stop",get:function(){return"+"+this.latency/2/1e3}},{key:"last",set:function(t){this._last&&this._last.cancel&&(this._last.triggerRelease(this.stop),this._last=null),this._last=t}}]),t}())},251:function(t,e,i){"use strict";i.d(e,"b",function(){return s}),i.d(e,"a",function(){return r});var n=i(248),a=void 0;function s(t){a&&a.cancel(t)}function r(){Promise.all([i.e(9),i.e(10)]).then(i.bind(null,32)).then(function(t){var e=t.AmplitudeEnvelope,i=t.Oscillator;t.Tone.supported&&(a||(a=new e({attack:.025,decay:.6,sustain:0,release:1}).toMaster(),new i({type:"sawtooth",frequency:"G3",volume:-12}).connect(a).start()),n.a.last=a,a.triggerAttack(n.a.start))})}},256:function(t,e,i){"use strict";i.d(e,"a",function(){return a});var n=i(1);function a(t){return n.Theme[t.theme].replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+"-theme"}},259:function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i(251),a=i(248),s=void 0;function r(){Promise.all([i.e(9),i.e(10)]).then(i.bind(null,32)).then(function(t){var e=t.AmplitudeEnvelope,i=t.Oscillator,r=t.Panner;t.Tone.supported&&(s||(s=new r(-1).toMaster(),(s=new e({attack:.01,decay:.4,sustain:.1,release:.4}).connect(s)).attackCurve="exponential",new i({type:"sawtooth3",frequency:"B3",volume:-12}).connect(s).start()),Object(n.b)(a.a.stop),s.triggerAttackRelease(.2,a.a.start))})}},263:function(t,e,i){"use strict";e.__esModule=!0;var n,a=i(83),s=(n=a)&&n.__esModule?n:{default:n};e.default=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,s.default)(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}()},264:function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},274:function(t,e,i){"use strict";var n=i(44);e.a={computed:{human:function(){return[void 0,Object(n.b)(this.$store.state.player[1]),Object(n.b)(this.$store.state.player[2])]},waiting:function(){return!this.human[this.game.player]&&!this.game.winner},canSwitch:function(){return!this.game.moves.length&&this.human[1]&&!this.human[2]},hotSeat:function(){return this.human[1]&&this.human[2]},robotMatch:function(){return!this.human[1]&&!this.human[2]},other:function(){return 3-this.game.player}}}},279:function(t,e,i){"use strict";i.d(e,"b",function(){return a}),i.d(e,"a",function(){return s});var n=i(1);function a(t,e,i,n){return Math.min(i/t,n/e)}function s(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return void 0===t[e]&&i&&t.original?void 0===n.Games[t.original][e]?s(n.Games[t.original],e,i):n.Games[t.original][e]:t[e]}},284:function(t,e,i){"use strict";var n=i(259),a=i(251),s=i(248),r=void 0;function o(){Promise.all([i.e(9),i.e(10)]).then(i.bind(null,32)).then(function(t){var e=t.AmplitudeEnvelope,i=t.Oscillator,n=t.Panner;t.Tone.supported&&(r||(r=new n(1).toMaster(),(r=new e({attack:.01,decay:.4,sustain:.1,release:.4}).connect(r)).attackCurve="exponential",new i({type:"sawtooth3",frequency:"D4",volume:-12}).connect(r).start()),Object(a.b)(s.a.stop),r.triggerAttackRelease(.2,s.a.start))})}var c=void 0;function l(){Promise.all([i.e(9),i.e(10)]).then(i.bind(null,32)).then(function(t){var e=t.AmplitudeEnvelope,i=t.Oscillator;t.Tone.supported&&(c||(c=new e({attack:.025,decay:1.2,sustain:0,release:1}).toMaster(),new i({type:"sawtooth",frequency:"C3",volume:-12}).connect(c).start()),s.a.last=c,c.triggerAttack(s.a.start))})}var u=void 0,h={"-1":["C2","E3","G3","C4"],1:["B2","G3","B3","D4"],2:["A2","F3","A3","D4"]};function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Promise.all([i.e(9),i.e(10)]).then(i.bind(null,32)).then(function(e){var i=e.PolySynth;e.Tone.supported&&(u||(u=new i(4).toMaster()).set({envelope:{attack:.01,decay:.4,sustain:.1,release:.4},oscillator:{type:"sawtooth3"},volume:-10}),Object(a.b)(s.a.stop),u.triggerAttackRelease(h[t],.8,s.a.start))})}i.d(e,"c",function(){return n.a}),i.d(e,"d",function(){return o}),i.d(e,"b",function(){return l}),i.d(e,"f",function(){return a.a}),i.d(e,"a",function(){return d}),i.d(e,"e",function(){return s.a})},285:function(t,e,i){"use strict";e.a={methods:{switchPlayer:function(){this.$store.commit("player",{1:this.$store.state.player[2],2:this.$store.state.player[1]})}}}},286:function(t,e,i){"use strict";i.d(e,"a",function(){return a});var n=void 0;function a(t,e){window.navigator.vibrate&&(n&&(clearTimeout(n),n=null),e?n=setTimeout(function(){window.navigator.vibrate(t)},e):window.navigator.vibrate(t))}},290:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n=new(i(6).a)},378:function(t,e,i){t.exports=function(){return new Worker(i.p+"c9b96fa806ff1f7ff502.worker.js")}},379:function(t,e,i){(t.exports=i(2)(!1)).push([t.i,".clickable[data-v-7ae9492e]:hover{cursor:pointer}.mt-1-5[data-v-7ae9492e]{margin-top:5px}.divider-large[data-v-7ae9492e],.icon-large>svg[data-v-7ae9492e]{width:96px;height:96px;margin:12px}.icon-large[data-v-7ae9492e]{display:block}.relative[data-v-7ae9492e]{position:relative}.absolute[data-v-7ae9492e]{position:absolute}",""])},380:function(t,e,i){var n=i(379);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(76).default)("43b79ad2",n,!0,{})},438:function(t,e,i){"use strict";i.r(e);var n=i(1),a=i(44),s=i(290),r=i(104),o=i.n(r),c=i(329),l=i.n(c),u=i(264),h=i.n(u),d=i(263),m=i.n(d),v=i(378),f=function(){function t(e,i){h()(this,t),this.id=0,this.promises={},this.worker=new v,this.worker.onmessage=this.message.bind(this),this.worker.postMessage({player:e,game:i})}return m()(t,[{key:"message",value:function(t){var e=JSON.parse(t.data);this.promises[e.id].resolve(e),delete this.promises[e.id]}},{key:"select",value:function(t){return this.post({game:Object(n.stringify)(t).join(", ")}).then(function(e){return e.move=t.stringToMove(e.move),e})}},{key:"post",value:function(t){var e=this;this.id++;var i=new l.a(function(t,i){e.promises[e.id]={resolve:t,reject:i}});return this.worker.postMessage(o()({},t,{id:this.id})),i}},{key:"terminate",value:function(){this.worker.terminate(),delete this.worker}}]),t}(),p=i(256),g=i(22),b=i(279),w=i(284),y=i(286),k=null,x={data:function(){return{Shared:g.a,vertical:window.innerWidth<window.innerHeight}},watch:{"Shared.drawer":function(){this.onResize()}},methods:{onResize:function(){var t=this;this.onResizeUpdated(),k&&(clearTimeout(k),k=null),k=setTimeout(function(){k=null,t.onResizeUpdated()},100)},onResizeUpdated:function(){var t=this.game.grid.bounds(),e=window.innerWidth-(g.a.drawer&&window.innerWidth>=1264?300:0),i=window.innerHeight;if(this.game.landscape)this.vertical=!1;else{var n=(t.maxX-t.minX)/(t.maxY-t.minY);this.vertical=n>1&&e<i}this.vertical?this.frame=[i-64-16,e-32]:this.frame=i<800?[e-32,i-64-16]:[e-32,i-128],this.frame[0]=Math.max(180,this.frame[0]),this.frame[1]=Math.max(180,this.frame[1])}}},_=i(274),C=i(285),j={components:{GBoard:function(){return i.e(22).then(i.bind(null,38))},GPlayerDivider:function(){return i.e(11).then(i.bind(null,434))},GVerdict:function(){return i.e(21).then(i.bind(null,435))},VDialog:function(){return i.e(14).then(function(){var t=i(440);return"object"==typeof t&&t&&t.__esModule?t:Object.assign({},"object"==typeof t&&t,{default:t})})}},mixins:[x,_.a,C.a],data:function(){return{game:null,frame:null,margin:20,fab:!1,working:!1,robotPlayer:{},theme:null,showVerdict:!1,rules:!1,showRules:!0,rulesText:!0,passConfirm:!1}},computed:{sample:function(){var t=new this.game.constructor;return Object(n.update)(t,this.game.constructor.sample),t}},watch:{"game.player":function(){this.robot()},"game.winner":function(t){t&&(this.showVerdict=!0,this.update())},"game.moves.length":function(t){t&&this.hotSeat&&!this.game.moves[t-1]&&(this.passConfirm=!0)},"$store.state.player":{handler:function(){this.initRobots(),this.initTimer(),this.robot()},deep:!0},"$store.state.timer":function(t){this.initTimer()},"$route.params.id":function(t){this.initGame(),this.initRobots(),this.onResize(),this.update()}},mounted:function(){document.body.scrollTop=document.documentElement.scrollTop=0},created:function(){this.initGame(),this.initRobots(),this.onResize(),this.update(),s.a.$on("game",this.update)},destroyed:function(){s.a.$off("game",this.update),this.destroyRobots(),this.game.dispose&&this.game.dispose()},methods:{initTimer:function(){this.game.limit=this.hotSeat?this.$store.state.timer:0},initGame:function(){var t=this;!this.human[1]&&this.human[2]&&this.switchPlayer();var e=this.$route.params.id+"Game",i=new n.Games[e];Object(n.initHighlight)(i);var a=new n.TimedProxy(i);this.game=g.a.game=a,this.theme=Object(p.a)(n.Games[e]),this.initTimer(),this.showRules&&!this.robotMatch&&this.$store.state.rules&&(this.showRules=!1,setTimeout(function(){t.rulesText=Object(b.a)(i.constructor,"rules"),t.rules=!!t.rulesText},200))},initRobot:function(t){return!Object(a.b)(t)&&new f(t,this.$route.params.id)},destroyRobots:function(){this.robotPlayer[1]&&this.robotPlayer[1].terminate(),this.robotPlayer[2]&&this.robotPlayer[2].terminate()},initRobots:function(){this.destroyRobots(),this.robotPlayer={1:this.initRobot(this.$store.state.player[1]),2:this.initRobot(this.$store.state.player[2])}},kickSound:function(){this.$store.state.sound&&(this.game.winner?Object(w.a)(this.game.winner):1===this.game.player?Object(w.c)():Object(w.d)()),this.$store.state.vibration&&!this.robotMatch&&Object(y.a)(50,this.$store.state.sound?2*w.e.latency:0)},robot:function(){var t=this,e=this.robotPlayer[this.game.player];this.working||this.game.winner||!e||(this.working=!0,e.select(this.game).then(function(e){t.working=!1,Object(n.undoAction)(t.game),t.game.move(e.move),t.kickSound(),t.update(),t.robot()}))},move:function(t){if(this.rules=!1,!this.game.winner){var e=Object(n.selectAction)(this.game,t);!1!==e&&(e?(Object(n.undoAction)(this.game),this.game.move(e),this.kickSound(),this.update()):this.kickSound())}},update:function(){Object(n.undoAction)(this.game),this.game.winner||Object(n.initActions)(this.game,this.game.possible())},undo:function(){this.showVerdict=!1,this.game.undo(),this.game.undo(),this.update()},reset:function(){this.fab=!1,this.showVerdict=!1,this.initGame(),this.onResize(),this.initRobots(),this.update(),this.robot()}}},O=i(42);var R=function(t){i(380)},T=Object(O.a)(j,function(){var t,e,i=this,n=i.$createElement,a=i._self._c||n;return a("div",{directives:[{name:"resize",rawName:"v-resize",value:i.onResize,expression:"onResize"}],class:i.theme},[a("v-layout",{attrs:{column:"",wrap:"","align-center":"","align-content-center":""}},[a("div",{staticClass:"mt-1-5",staticStyle:{"text-align":"center"}},[a("g-board",{attrs:{game:i.game,coords:i.$store.state.coords,frame:i.frame,margin:i.margin,move:i.move,vertical:i.vertical,waiting:i.waiting,interactive:"",centered:""}})],1)]),i._v(" "),i.game.moves.length&&i.game.score?a("v-layout",{staticClass:"text-xs-center player-score",staticStyle:{position:"absolute",bottom:"12px",left:"2px",right:"0"},attrs:{row:"","justify-center":"","align-center":""}},[a("v-flex",{staticClass:"title text-xs-right",staticStyle:{width:"60px"}},[i._v(i._s(i.game.score[1]))]),i._v(" "),a("g-player-divider",{staticClass:"player-divider mx-3 d-block"}),i._v(" "),a("v-flex",{staticClass:"title text-xs-left",staticStyle:{width:"60px"}},[i._v(i._s(i.game.score[2]))])],1):i._e(),i._v(" "),a("v-speed-dial",{staticStyle:{"z-index":"9"},attrs:{fixed:"",right:"",bottom:"",direction:"top",transition:"slide-y-reverse-transition"},model:{value:i.fab,callback:function(t){i.fab=t},expression:"fab"}},[a("v-fab-transition",{attrs:{slot:"activator"},slot:"activator"},[i.game.moves.length?a("v-btn",{attrs:{color:i.$store.state.dark?"grey darken-4":"grey darken-3",dark:"",fab:"",hover:""},model:{value:i.fab,callback:function(t){i.fab=t},expression:"fab"}},[a("v-icon",{staticClass:"white--text"},[i._v("gamepad")]),i._v(" "),a("v-icon",{staticClass:"white--text"},[i._v("close")])],1):i._e()],1),i._v(" "),i.game.moves.length?a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"grey darken-3"},on:{click:function(t){t.stopPropagation(),i.undo()}}},[a("v-icon",{staticClass:"white--text"},[i._v("undo")])],1):i._e(),i._v(" "),i.game.moves.length?a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"grey darken-3"},on:{click:function(t){t.stopPropagation(),i.reset()}}},[a("v-icon",{staticClass:"white--text"},[i._v("refresh")])],1):i._e()],1),i._v(" "),a("g-verdict",{attrs:{reset:i.reset,game:i.game,theme:i.theme},model:{value:i.showVerdict,callback:function(t){i.showVerdict=t},expression:"showVerdict"}}),i._v(" "),a("v-dialog",{attrs:{value:i.rules,"max-width":"280px"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"title pa-2"},[i._v(i._s(i._f("titled")(i.game.constructor.title)))])]),i._v(" "),a("v-card-text",{staticClass:"pt-0 pb-4"},i._l(i.rulesText,function(t,e){return a("div",{key:e,staticClass:"px-2"},[i._v(i._s(t))])})),i._v(" "),a("div",{staticClass:"text-xs-center"},[a("g-board",{staticClass:"preview d-inline-block",attrs:{game:i.sample,frame:[240,164],margin:4}})],1),i._v(" "),a("v-card-actions",[a("v-spacer"),i._v(" "),a("v-btn",{staticStyle:{"min-width":"0"},attrs:{flat:""},on:{click:function(t){i.rules=!1}}},[i._v("Ok")])],1)],1)],1),i._v(" "),a("v-dialog",{attrs:{value:i.passConfirm,"max-width":"280px",persistent:""}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"title pa-2"},[i._v("No moves available")])]),i._v(" "),a("div",{staticClass:"text-xs-center",class:(t={},t[i.theme]=!0,t)},[a("div",{staticClass:"d-inline-block relative player",class:(e={},e["player-"+i.other]=!0,e),staticStyle:{height:"120px",width:"120px"}},[a("svg",{staticClass:"d-block absolute",attrs:{height:"120",width:"120"}},[a("circle",{class:"symbol-"+i.other,attrs:{cx:"60",cy:"60",r:"60"}})]),i._v(" "),a("v-icon",{staticClass:"absolute player-status icon-large"},[i._v("close")])],1)]),i._v(" "),a("v-card-actions",[a("v-spacer"),i._v(" "),a("v-btn",{staticStyle:{"min-width":"0"},attrs:{flat:""},on:{click:function(t){i.game.start(),i.passConfirm=!1}}},[i._v("Pass")])],1)],1)],1)],1)},[],!1,R,"data-v-7ae9492e",null);e.default=T.exports}}]);