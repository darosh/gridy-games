(self.webpackJsonp=self.webpackJsonp||[]).push([[3],{348:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s(26);const n={MILLISECONDS:1e3,LATENCY_DEFAULT:25,LATENCY_RATIO:2,SOUND_POLY:4,PLAYER_DRAW:-1,PLAYER_1:1,PLAYER_2:2,PAN_LEFT:-1,PAN_RIGHT:1,SOUND_CHORD_TIME:.8,SOUND_KICK_TIME:.2,SOUND_CHORD:{envelope:{attack:.01,decay:.4,sustain:.1,release:.4},oscillator:{type:"sawtooth3"},volume:-10},SOUND_FAIL_ENV:{attack:.025,decay:1.2,sustain:0,release:1},SOUND_FAIL_OSC:{type:"sawtooth",frequency:"C3",volume:-12},SOUND_TICK_ENV:{attack:.025,decay:.6,sustain:0,release:1},SOUND_TICK_OSC:{type:"sawtooth",frequency:"G3",volume:-12},SOUND_KICK_ENV:{attack:.01,decay:.4,sustain:.1,release:.4},SOUND_KICK_1:{type:"sawtooth3",frequency:"B3",volume:-12},SOUND_KICK_2:{type:"sawtooth3",frequency:"D4",volume:-12}};s.n(i)()(n)},349:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s(348);const n=i.a.MILLISECONDS,a=i.a.LATENCY_DEFAULT,o=i.a.LATENCY_RATIO;const r=new class{get latency(){return isNaN(this._latency)&&(Promise.all([s.e(12),s.e(13)]).then(s.bind(null,15)).then(({Tone:t})=>{this._latency=t.supported&&!isNaN(t.context.baseLatency)?t.context.baseLatency*n*o:a}),this._latency=a),this._latency}get start(){return`+${this.latency/n}`}get stop(){return`+${this.latency/o/n}`}set last(t){this._last&&this._last.cancel&&(this._last.triggerRelease(this.stop),this._last=null),this._last=t}}},353:function(t,e,s){"use strict";s.d(e,"b",function(){return c}),s.d(e,"a",function(){return l});var i=s(349),n=s(348);const a=n.a.SOUND_TICK_ENV,o=n.a.SOUND_TICK_OSC;let r;function c(t){r&&r.cancel(t)}function l(){Promise.all([s.e(12),s.e(13)]).then(s.bind(null,15)).then(({AmplitudeEnvelope:t,Oscillator:e,Tone:s})=>{s.supported&&(r||(r=new t(a).toMaster(),new e(o).connect(r).start()),i.a.last=r,r.triggerAttack(i.a.start))})}},361:function(t,e,s){"use strict";s.d(e,"a",function(){return u});var i=s(353),n=s(349),a=s(348);const o=a.a.PAN_LEFT,r=a.a.SOUND_KICK_ENV,c=a.a.SOUND_KICK_1,l=a.a.SOUND_KICK_TIME;let h;function u(){Promise.all([s.e(12),s.e(13)]).then(s.bind(null,15)).then(({AmplitudeEnvelope:t,Oscillator:e,Panner:s,Tone:a})=>{a.supported&&(h||(h=new s(o).toMaster(),(h=new t(r).connect(h)).attackCurve="exponential",new e(c).connect(h).start()),Object(i.b)(n.a.stop),h.triggerAttackRelease(l,n.a.start))})}},362:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s(2);function n(t){return i.Theme[t.theme].replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+"-theme"}},373:function(t,e,s){"use strict";let i;function n(t,e){window.navigator.vibrate&&(i&&(clearTimeout(i),i=null),e?i=setTimeout(()=>{window.navigator.vibrate(t)},e):window.navigator.vibrate(t))}s.d(e,"a",function(){return n})},384:function(t,e,s){"use strict";var i=s(96),n=s(2);function a(t,e,s){const i=t[1],n=t[2];return i&&!n&&e===(s?1:2)||!i&&n&&e===(s?2:1)}e.a={computed:{sessionHuman:function(){return{1:Object(i.b)(this.$store.state.player[1]),2:Object(i.b)(this.$store.state.player[2])}},sessionWaiting(){return!this.sessionHuman[this.game.player]&&!this.game.winner},sessionCanSwitch(){return!this.game.moves.length&&this.sessionHuman[1]&&!this.sessionHuman[2]},sessionHotSeat(){return this.sessionHuman[1]&&this.sessionHuman[2]},sessionSolo(){return this.sessionHuman[1]!==this.sessionHuman[2]},sessionRobotMatch(){return!this.sessionHuman[1]&&!this.sessionHuman[2]},sessionOther(){return 3-this.game.player},sessionHumanWin(){return a(this.sessionHuman,this.game.winner,!0)},sessionHumanLost(){return a(this.sessionHuman,this.game.winner,!1)},sessionNames(){return n.StoneNames[n.ThemeStones[this.game.constructor.theme]]},sessionSoloDraw(){return this.sessionSolo&&-1===this.game.winner},sessionTimedOut(){return this.sessionHotSeat&&this.game.expired}}}},386:function(t,e,s){"use strict";s.d(e,"b",function(){return n}),s.d(e,"a",function(){return a});var i=s(2);function n(t,e,s,i){return Math.min(s/t,i/e)}function a(t,e,s=!0){return void 0===t[e]&&s&&t.original?function(t,e,s){if(void 0===i.Games[t.original][e])return a(i.Games[t.original],e,s);return i.Games[t.original][e]}(t,e,s):t[e]}},387:function(t,e,s){"use strict";var i=s(361),n=s(353),a=s(349),o=s(348);const r=o.a.PAN_RIGHT,c=o.a.SOUND_KICK_ENV,l=o.a.SOUND_KICK_2,h=o.a.SOUND_KICK_TIME;let u;function m(){Promise.all([s.e(12),s.e(13)]).then(s.bind(null,15)).then(({AmplitudeEnvelope:t,Oscillator:e,Panner:s,Tone:i})=>{i.supported&&(u||(u=new s(r).toMaster(),(u=new t(c).connect(u)).attackCurve="exponential",new e(l).connect(u).start()),Object(n.b)(a.a.stop),u.triggerAttackRelease(h,a.a.start))})}const d=o.a.SOUND_FAIL_ENV,g=o.a.SOUND_FAIL_OSC;let _;function p(){Promise.all([s.e(12),s.e(13)]).then(s.bind(null,15)).then(({AmplitudeEnvelope:t,Oscillator:e,Tone:s})=>{s.supported&&(_||(_=new t(d).toMaster(),new e(g).connect(_).start()),a.a.last=_,_.triggerAttack(a.a.start))})}const f=o.a.SOUND_POLY,v=o.a.PLAYER_DRAW,b=o.a.PLAYER_1,w=o.a.PLAYER_2,O=o.a.SOUND_CHORD_TIME,R=o.a.SOUND_CHORD;let A;const E={[v]:["C2","E3","G3","C4"],[b]:["B2","G3","B3","D4"],[w]:["A2","F3","A3","D4"]};function y(t=b){Promise.all([s.e(12),s.e(13)]).then(s.bind(null,15)).then(({PolySynth:e,Tone:s})=>{s.supported&&(A||(A=new e(f).toMaster()).set(R),Object(n.b)(a.a.stop),A.triggerAttackRelease(E[t],O,a.a.start))})}s.d(e,"c",function(){return i.a}),s.d(e,"d",function(){return m}),s.d(e,"b",function(){return p}),s.d(e,"f",function(){return n.a}),s.d(e,"a",function(){return y}),s.d(e,"e",function(){return a.a})},396:function(t,e,s){"use strict";e.a={methods:{playerSwitch(){this.$store.commit("player",{1:this.$store.state.player[2],2:this.$store.state.player[1]})}}}},400:function(t,e,s){"use strict";s.d(e,"a",function(){return i});const i=new(s(5).a)},572:function(t,e,s){t.exports=function(){return new Worker(s.p+"e295aa2f6b7d646ea5b3.worker.js")}},573:function(t,e,s){(t.exports=s(1)(!1)).push([t.i,".clickable[data-v-57c8c535]:hover{cursor:pointer}.mt-1-5[data-v-57c8c535]{margin-top:5px}",""])},574:function(t,e,s){var i=s(573);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,s(139).default)("20abaf07",i,!0,{})},628:function(t,e,s){"use strict";s.r(e);var i=s(2),n=s(96),a=s(400),o=s(159),r=s.n(o),c=s(32),l=s.n(c);const h=s(572);var u=s(362),m=s(47),d=s(386),g=s(387),_=s(373),p=s(26);const f={AXE_X:0,AXE_Y:1,MINIMAL_GAME_BOARD:180,MOBILE_BREAKPOINT:1264,RESIZE_REFRESH_DELAY:100,SQUARE_RATIO:1,DRAWER_WIDTH:300,ZERO_WIDTH:0,SHORT_BREAKPOINT:800,GAME_MARGIN_X:32,GAME_MARGIN_Y:128,GAME_MARGIN_Y_SHORT:80,GAME_FOOTER:16};s.n(p)()(f);const v=f.AXE_X,b=f.AXE_Y,w=f.MINIMAL_GAME_BOARD,O=f.MOBILE_BREAKPOINT,R=f.RESIZE_REFRESH_DELAY,A=f.SQUARE_RATIO,E=f.DRAWER_WIDTH,y=f.ZERO_WIDTH,S=f.SHORT_BREAKPOINT,T=f.GAME_MARGIN_X,N=f.GAME_MARGIN_Y,I=f.GAME_MARGIN_Y_SHORT,D=f.GAME_FOOTER;let k=null;var C={data:()=>({Shared:m.a,vertical:window.innerWidth<window.innerHeight}),watch:{"Shared.drawer":function(){this.onResize()}},methods:{onResize(){this.onResizeUpdated(),k&&(clearTimeout(k),k=null),k=setTimeout(()=>{k=null,this.onResizeUpdated()},R)},onResizeUpdated(){let t=this.game.grid.bounds();const e=window.innerWidth-(m.a.drawer&&window.innerWidth>=O?E:y),s=window.innerHeight;if(this.game.landscape)this.vertical=!1;else{const i=(t.maxX-t.minX)/(t.maxY-t.minY);this.vertical=i>A&&e<s}var i;this.frame=function(t,e,s,i){return t?[e-I-i,s-T]:e<S?[s-T,e-I-i]:[s-T,e-N]}(this.vertical,s,e,this.game.score?D:0),(i=this.frame)[v]=Math.max(w,i[v]),i[b]=Math.max(w,i[b])}}};var M=s(384),x=s(396);let H=0;var G={components:{GBoard:()=>s.e(20).then(s.bind(null,82)),GPlayerDivider:()=>s.e(15).then(s.bind(null,624)),GGameVerdictDialog:()=>s.e(30).then(s.bind(null,622)),GGameInfoDialog:()=>s.e(29).then(s.bind(null,620)),GGamePassDialog:()=>s.e(28).then(s.bind(null,619))},mixins:[C,M.a,x.a],data:()=>({game:null,info:null,frame:null,margin:20,fab:!1,working:!1,robotPlayer:{},theme:null,showVerdict:!1,rules:!1,showRules:!0,passConfirm:!1}),watch:{"game.player":function(){this.robot()},"game.winner":function(t){t&&(this.showVerdict=!0,this.update())},"game.moves.length":function(t){t&&this.sessionHotSeat&&!this.game.moves[t-1]&&(this.passConfirm=!0)},"$store.state.player":{handler:function(){this.initRobots(),this.initTimer(),this.robot()},deep:!0},"$store.state.timer":function(t){this.initTimer()},"$route.params.id":function(t){this.initGame(),this.initRobots(),this.onResize(),this.update()}},mounted(){document.body.scrollTop=document.documentElement.scrollTop=0},created(){this.initGame(),this.initRobots(),this.onResize(),this.update(),a.a.$on("game",this.update)},destroyed(){a.a.$off("game",this.update),this.destroyRobots(),this.game.dispose&&this.game.dispose()},methods:{initTimer(){this.game.limit=this.sessionHotSeat?this.$store.state.timer:0},initGame(){!this.sessionHuman[1]&&this.sessionHuman[2]&&this.playerSwitch(),this.info=i.Info.game(this.$route.params.id);const t=this.$route.params.id+"Game",e=new i.Games[t];Object(i.initHighlight)(e);const s=new i.TimedProxy(e);this.game=m.a.game=s,this.theme=Object(u.a)(i.Games[t]),this.initTimer(),this.showRules&&!this.sessionRobotMatch&&this.$store.state.rules&&(this.showRules=!1,setTimeout(()=>{this.rulesText=Object(d.a)(e.constructor,"rules"),this.rules=!!this.rulesText},200))},initRobot(t){return!Object(n.b)(t)&&new class{constructor(t,e){this.id=0,this.promises={},this.worker=new h,this.worker.onmessage=this.message.bind(this),this.worker.postMessage({player:t,game:e})}message(t){const e=JSON.parse(t.data);this.promises[e.id].resolve(e),delete this.promises[e.id]}select(t){return this.post({game:Object(i.stringify)(t).join(", ")}).then(e=>(e.move=t.stringToMove(e.move),e))}post(t){this.id++;const e=new l.a((t,e)=>{this.promises[this.id]={resolve:t,reject:e}});return this.worker.postMessage(r()({},t,{id:this.id})),e}terminate(){this.worker.terminate(),delete this.worker}}(t,this.$route.params.id)},destroyRobots(){this.robotPlayer[1]&&(this.robotPlayer[1].terminate(),this.working=!1),this.robotPlayer[2]&&(this.robotPlayer[2].terminate(),this.working=!1)},initRobots(){this.destroyRobots(),this.robotPlayer={1:this.initRobot(this.$store.state.player[1]),2:this.initRobot(this.$store.state.player[2])}},kickSound(){this.$store.state.sound&&(this.game.winner?Object(g.a)(this.game.winner):1===this.game.player?Object(g.c)():Object(g.d)()),this.$store.state.vibration&&!this.sessionRobotMatch&&Object(_.a)(50,this.$store.state.sound?2*g.e.latency:0)},robot(){const t=this.robotPlayer[this.game.player];this.working||this.game.winner||!t||(this.working=!0,H++,this.runRobot(t,H))},runRobot(t,e){const s=Date.now();t.select(this.game).then(t=>{setTimeout(()=>{e===H&&(this.working=!1,Object(i.undoAction)(this.game),this.game.move(t.move),this.kickSound(),this.update(),this.robot())},Math.max(0,400-Date.now()+s))})},move(t){if(this.rules=!1,this.game.winner||this.working)return;const e=Object(i.selectAction)(this.game,t);!1!==e&&(e?(Object(i.undoAction)(this.game),this.game.move(e),this.kickSound(),this.update()):this.kickSound())},update(){Object(i.undoAction)(this.game),this.game.winner||Object(i.initActions)(this.game,this.game.possible())},undo(){const t=this.sessionHotSeat?Object(i.other)(this.game.player):this.game.player;Object(i.undoFor)(this.game,t),this.update()},reset(){this.fab=!1,this.initGame(),this.onResize(),this.initRobots(),this.update(),this.robot()}}},P=s(93);var L=function(t){s(574)},U=Object(P.a)(G,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}],class:t.theme},[s("v-layout",{staticStyle:{"margin-bottom":"-36px"},attrs:{column:"",wrap:"","align-center":"","align-content-center":""}},[s("div",{staticClass:"mt-1-5",staticStyle:{"text-align":"center"}},[s("g-board",{attrs:{game:t.game,coords:t.$store.state.coords,frame:t.frame,margin:t.margin,move:t.move,vertical:t.vertical,waiting:t.sessionWaiting,interactive:"",centered:""}})],1)]),t._v(" "),t.game.moves.length&&t.game.score?s("v-footer",{staticClass:"pb-2",attrs:{app:"",fixed:"",height:"auto",color:"transparent"}},[s("v-flex",{staticClass:"title text-xs-right",staticStyle:{width:"60px"}},[t._v(t._s(t.game.score[1]))]),t._v(" "),s("g-player-divider",{staticClass:"mx-3 d-block"}),t._v(" "),s("v-flex",{staticClass:"title text-xs-left",staticStyle:{width:"60px"}},[t._v(t._s(t.game.score[2]))])],1):t._e(),t._v(" "),s("v-speed-dial",{staticStyle:{"z-index":"9"},attrs:{fixed:"",right:"",bottom:"",direction:"top",transition:"slide-y-reverse-transition"},model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[s("v-fab-transition",{attrs:{slot:"activator"},slot:"activator"},[t.game.moves.length?s("v-btn",{attrs:{color:t.$store.state.dark?"grey darken-4":"grey darken-3",dark:"",fab:"",hover:""},model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[s("v-icon",{staticClass:"white--text"},[t._v("gamepad")]),t._v(" "),s("v-icon",{staticClass:"white--text"},[t._v("close")])],1):t._e()],1),t._v(" "),t.game.moves.length?s("v-btn",{attrs:{fab:"",dark:"",small:"",color:"grey darken-3"},on:{click:function(e){e.stopPropagation(),t.undo()}}},[s("v-icon",{staticClass:"white--text"},[t._v("undo")])],1):t._e(),t._v(" "),t.game.moves.length?s("v-btn",{attrs:{fab:"",dark:"",small:"",color:"grey darken-3"},on:{click:function(e){e.stopPropagation(),t.reset()}}},[s("v-icon",{staticClass:"white--text"},[t._v("refresh")])],1):t._e()],1),t._v(" "),t.rules?s("g-game-info-dialog",{attrs:{game:t.game,info:t.info}}):t._e(),t._v(" "),t.showVerdict?s("g-game-verdict-dialog",{attrs:{reset:t.reset,"game-once":t.game,theme:t.theme}}):t._e(),t._v(" "),t.passConfirm?s("g-game-pass-dialog",{attrs:{theme:t.theme,game:t.game,"session-other":t.sessionOther}}):t._e()],1)},[],!1,L,"data-v-57c8c535",null);e.default=U.exports}}]);