(self.webpackJsonp=self.webpackJsonp||[]).push([[7,4],{140:function(e,n,a){"use strict";a.r(n);var o=a(61),t=a.n(o),i=a(369);function r(e,n){console.log("%c"+e,"background-color: "+(n?"lightsalmon":"lightgreen"))}var s=a(361);a.d(n,"states",function(){return u}),a.d(n,"app",function(){return d}),a.d(n,"db",function(){return g}),a.d(n,"state",function(){return h}),a.d(n,"user",function(){return m}),a.d(n,"userRef",function(){return f}),a.d(n,"newGamesRef",function(){return v}),a.d(n,"gamesRef",function(){return y}),a.d(n,"finishedGamesRef",function(){return p}),a.d(n,"usersRef",function(){return k}),a.d(n,"reconnect",function(){return C}),a.d(n,"signInAnonym",function(){return G}),a.d(n,"signInGoogle",function(){return D}),a.d(n,"signInGitHub",function(){return L}),a.d(n,"signInTwitter",function(){return P}),a.d(n,"logOut",function(){return B}),a.d(n,"updateUser",function(){return T});var l=a(383);a(382),a(381);var u={INITIALIZED:0,LOADING:1,DISCONNECTED:2,SIGNING:3,LOGIN:4,USER:5};t()(u).forEach(function(e){u[u[e]]=e});var c=!1,d=l.initializeApp({apiKey:"AIzaSyDBNvdGxCcet7VMwJ3Lc8CqafzbzCczss4",authDomain:"gridy-games.firebaseapp.com",databaseURL:"https://gridy-games.firebaseio.com",projectId:"gridy-games",storageBucket:"gridy-games.appspot.com",messagingSenderId:"324536496454"}),g=d.database(),h={value:u.LOADING,offset:null},m=l.auth().currentUser,f=null,v=g.ref("newGames"),y=g.ref("games"),p=g.ref("finishedGames"),k=g.ref("users").orderByChild("online").equalTo(!0),S=l.database().ref(".info/connected"),b=void 0,M=void 0,A=void 0;function C(){I(),g.goOnline(),w(),h.value=u.USER}function I(){S&&(S.off("value"),S.on("value",function(e){!0===e.val()?(r("Connection setting user online:true"),M.set(!0)):(r("Connection setting user online:false"),M.set(!1))}))}function w(){b.remove(),b.push(!0).on("value",function(e){e.val()||(r("Connection replaced",!0),S&&S.off("value"),h.value=u.DISCONNECTED,g.goOffline())})}function G(){I(),g.goOnline(),h.value=u.SIGNING,l.auth().setPersistence(l.auth.Auth.Persistence.LOCAL).then(function(){l.auth().signInAnonymously()})}function D(){I(),g.goOnline(),h.value=u.SIGNING,l.auth().setPersistence(l.auth.Auth.Persistence.LOCAL).then(function(){var e=new l.auth.GoogleAuthProvider;l.auth().signInWithPopup(e)})}function L(){I(),g.goOnline(),h.value=u.SIGNING,l.auth().setPersistence(l.auth.Auth.Persistence.LOCAL).then(function(){var e=new l.auth.GithubAuthProvider;l.auth().signInWithPopup(e)})}function P(){I(),g.goOnline(),h.value=u.SIGNING,l.auth().setPersistence(l.auth.Auth.Persistence.LOCAL).then(function(){var e=new l.auth.TwitterAuthProvider;l.auth().signInWithPopup(e)})}function B(){r("Log out"),r("Log out setting user online:false"),c=!0,M.set(!1).then(function(){l.auth().signOut().then(function(){m=null,f=null,h.value=u.INITIALIZED,g.goOffline()})})}function T(e){e.last=l.database.ServerValue.TIMESTAMP,f.update(e)}l.database().ref(".info/serverTimeOffset").on("value",function(e){h.offset=e.val(),r("Server offset: "+h.offset)}),l.auth().onAuthStateChanged(function(e){h.value=u.INITIALIZED,M&&M.off("value");S&&S.off("value");A&&A.cancel();e?(r("Setting user"),m=e,f=g.ref("users/"+m.uid),h.value=u.LOGIN,f.once("value").then(function(e){e.child("name").exists()?f.update({last:l.database.ServerValue.TIMESTAMP,online:!0,guest:!!m.isAnonymous||null,version:"0.41.219"}):f.update({last:l.database.ServerValue.TIMESTAMP,name:Object(s.a)(),avatar:Object(i.c)(),online:!0,guest:!!m.isAnonymous||null,version:"0.41.219"}),h.value=u.USER,b=f.child("connection"),w()}),M=f.child("online"),(A=M.onDisconnect()).set(!1),I(),M.on("value",function(e){c?c=!1:e.val()||S.once("value",function(e){!0===e.val()&&(c=!0,r("Setting user online:true"),M.set(!0))})})):(r("Resetting user"),m=null,f=null)})},361:function(e,n,a){"use strict";a.d(n,"a",function(){return t});var o=a(364);function t(){return Object(o.random)()+" "+(e="A".charCodeAt(0),n="Z".charCodeAt(0),String.fromCharCode(Math.floor(Math.random()*(n-e+1))+e))+(Math.floor(9*Math.random())+1);var e,n}},363:function(e){e.exports=["Abyss","Acolytes","Aegis","Agent","Aginar","Ahab","Ajak","Ajaxis","Akemi","Alain","Albion","Alice","Amethyst","Amiko","Amun","Angel","Anole","Anthem","Aquaman","Aqueduct","Arcade","Arclight","Ares","Argent","Armor","Armory","Arsenal","Arsenic","Artemis","Artiee","Aspen","Asterix","Asylum","Atlas","Atom","Atomic","Avalon","Azazel","Azrael","Aztec","Babaing","Banshee","Barb","Bastion","Batman","Battle","Beak","Beast","Bebop","Becatron","Bedlam","Beef","Beetle","Bengal","Binary","Bishop","Bizarro","Black","Blackbat","Blackout","Blade","Blastaar","Blink","Blizzard","Blob","Blok","Bloke","Blonde","Bloodaxe","Bloom","Blossom","Blue","Blur","Bonnie","Boom","Bounty","Brainiac","Brandy","Bronze","Brood","Bruce","Bubbles","Bucky","Buff","Buffy","Bullseye","Burnout","Cable","Calamity","Calendar","Caliban","Callisto","Calypso","Cammi","Cammy","Captain","Cardiac","Cargill","Carnage","Catseye","Celsius","Cerebro","Cerise","Cesspool","Chance","Chase","Chastity","Chat","Cheetah","Cherry","Choice","Cimarron","Cinnamon","Circuit","Cloak","Cobweb","Colleen","Colossus","Colt","Comedian","Copycat","Corsair","Cosmo","Crazy","Crimson","Crule","Crystal","Cuckoo","Cuthbert","Cybersix","Cyblade","Cyborg","Cyclops","Daken","Damian","Darkhawk","Darkstar","Dart","Darwin","Dawn","Dawnstar","Dead","Deadpool","Death","Deathcry","Deathlok","Debrii","Deep","Devi","Deviants","Devos","Diablo","Diamond","Dick","Doctor","Doll","Dollar","Dolphin","Domino","Doomsday","Doop","Doorman","Dormammu","Dorothy","Dove","Drax","Dream","Druig","Dumb","Dusk","Dust","Echo","Electro","Elixir","Empath","Epoch","Eternals","Eternity","Exiles","Exodus","Ezekiel","Faith","Falcon","Fallen","Fantomah","Fantomex","Fathom","Fenris","Feral","Fire","Firebird","Firefly","Firelord","Firestar","Flash","Flatman","Flint","Forearm","Forge","Freak","Free","Freefall","Frenzy","Fury","Galactus","Gambit","Ganymede","Gargoyle","Gateway","Genesis","Gertrude","Ghost","Gideon","Glorian","Glory","Gloss","Goliath","Gorgon","Grace","Graphics","Gravity","Green","Gressill","Groot","Guardian","Guile","Gwen","Gypsy","HYDRA","Hairball","Halo","Hank","Hardball","Harpoon","Haven","Havok","Hawk","Hawkeye","Hawkman","Hellboy","Hellcat","Hellion","Helspont","Hepzibah","Hercules","Hiroim","Hitman","Holy","Hooded","Horridus","Hulk","Hulkling","Humbug","Husk","Hussar","Hyperion","Iceman","Ichigo","Ikaris","Impulse","Indigo","Insect","Iron","Ironclad","Jackal","Jackpot","Jade","Jake","Jann","Jean","Jericho","Jesse","Jigsaw","Jinx","Jolt","Jonah","Jonni","Joseph","Joystick","Jubilee","Jungle","Justice","Kabuki","Kamandi","Kang","Kaoru","Karnak","Kasumi","Kelly","Khan","Kimberly","Kinetix","Kingpin","Kitty","Klaw","Knockout","Kole","Komodo","Korath","Korg","Korvac","Kraven","Kree","Kristin","Kronos","Kumori","Kyle","Kylun","Lady","Ladyhawk","Lagoon","Lake","Landau","Lanolin","Laurel","Leech","Leeloo","Legion","Lenore","Leonardo","Lettuce","Liberty","Lilith","Lime","Little","Lizard","Lobo","Lockheed","Lockjaw","Logan","Loki","Longshot","Luckman","Luminals","Lynn","Madame","Maddog","Madrox","Maestro","Maggott","Magik","Maginty","Magneto","Magus","Maiden","Makkari","Malice","Mandarin","Mandrill","Mandroid","Manitou","Mantis","Marrow","Martian","Marvel","Marvex","Mary","Masque","Maverick","Maximum","Maximus","Megatron","Meggan","Meltdown","Menace","Mentallo","Mentor","Mephisto","Mercury","Merry","Mesmero","Microbe","Micromax","Midnight","Miek","Mighty","Mimic","Mindworm","Mint","Mirage","Misfit","Miss","Misty","Miyako","Mojo","Molly","Momoko","Mongoose","Mongu","Moonstar","Morbius","Mordo","Morg","Morlocks","Morlun","Morph","Moth","Muskrat","Mysterio","Mystique","Namor","Naoko","Negative","Nehzno","Nemesis","Neon","Network","Nextwave","Nico","Nicolaos","Night","Nightcat","Nikki","Nimrod","Niobe","Nitro","Nomad","Nuke","Odin","Ogun","Onyx","Oracle","Orion","Orphan","Overlord","Owlman","Paibok","Paladin","Pandemic","PantyMan","Patch","Patriot","Payback","Penance","Penguin","Phalanx","Phantom","Phoenix","Photon","Pilgrim","Pink","Pixie","Plastic","Plazm","Poison","Polaris","Post","Preak","Pride","Prism","Prodigy","Proteus","PsyNapse","Psylocke","Psynch","Puck","Pudding","Pyro","Quasar","Queen","Rage","Rainbow","Rampage","Randall","Random","Raphael","Raptor","Rapture","Raven","Ravenous","Redwing","Reptil","Rescue","Revanche","Reverse","Rhino","Rictor","Riptide","Risque","Robin","Rogue","Romulus","Ronan","Ronin","Rose","Rouge","Roxy","Rumble","Runaways","Russian","Sage","Sailor","Salo","Samus","Sandman","Saracen","Saturn","Sauron","Savant","Scorpion","Scourge","Scream","Sentinel","Sentry","Sersi","Shadow","Shakti","Shaman","Shamrock","Shape","Shard","Shazam","Shikari","Shining","Shotgun","Shriek","Siege","Silk","Sinann","Siren","Siryn","Skaar","Skids","Skin","Skrulls","Slayback","Slyde","Snowbird","Solo","Songbird","Spartan","Sparx","Spawn","Spectrum","Speed","Speedy","Sphinx","Spiral","Spirit","Spitfire","Spot","Spyke","Squirrel","Stacy","Starbolt","Stardust","Starfire","Starfox","Starhawk","Stature","Steel","Stepford","Stick","Stingray","Storm","Stryfe","Sumo","Sunfire","Sunspot","Superman","Surge","Swarm","Sway","Swift","Switch","Synch","Talisman","Talkback","Talon","Talos","Tank","Tarot","Tattoo","Tempest","Tempo","Terrax","Terror","Terry","Thanos","Thing","Thor","Tick","Timeslip","Toad","Tomas","Topaz","Toro","Toxin","Traci","Trini","Triton","Tsunami","Turbo","Tusk","Tyrannus","Tyrant","Ulik","Ultimo","Ultron","Umar","Unicorn","Unus","Valis","Valkyrie","Vampiro","Vapor","Vargas","Vector","Velocity","Venom","Venus","Vermin","Vertigo","Violator","Virtuous","Vision","Vixen","Vogue","Void","Voodoo","Vulcan","Vulture","Wallop","Wallow","Warbird","Warbound","Warhawk","Warlock","Warpath","Warstar","Wasp","Watchmen","Wendigo","Wendy","Whiplash","Wiccan","Wild","Wildcat","Wildside","Willow","Wind","Winged","Wolfpack","Wong","Word","Wraith","Xavin","Xorn","Yellow","Zakuro","Zaran","Zarek","Zealot","Zeigeist","Zemo","Zodiak","Zombie","Zuras","Zzzax"]},364:function(e,n,a){var o=a(384),t=a(363);n.all=t,n.random=o(t)},532:function(e,n,a){(e.exports=a(1)(!1)).push([e.i,".login-buttons[data-v-2edff86a] .btn__content{justify-content:left;text-transform:none}.login-buttons>*>[data-v-2edff86a]{min-width:200px}",""])},533:function(e,n,a){var o=a(532);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a(138).default)("2edf20c2",o,!0,{})},619:function(e,n,a){"use strict";a.r(n);var o=a(140),t={components:{VProgressCircular:function(){return Promise.resolve().then(function(){var e=a(283);return"object"==typeof e&&e&&e.__esModule?e:Object.assign({},"object"==typeof e&&e,{default:e})})}},data:function(){return{state:o.state,loading:!1}},watch:{"state.value":{immediate:!0,handler:function(e){console.log("Login state value:",o.states[e]),e===o.states.USER?this.$router.replace("online"):e>=o.states.LOADING?this.loading=!0:this.loading=!1}}},methods:{signInAnonym:o.signInAnonym,signInGoogle:o.signInGoogle,signInTwitter:o.signInTwitter,signInGitHub:o.signInGitHub}},i=a(92);var r=function(e){a(533)},s=Object(i.a)(t,function(){var e=this,n=e.$createElement,a=e._self._c||n;return a("div",{staticClass:"text-xs-center pa-2"},[e.loading?a("v-progress-circular",{staticClass:"mt-1",attrs:{color:"light-blue",indeterminate:""}}):a("div",{staticClass:"login-buttons mt-1"},[a("div",[a("v-btn",{attrs:{light:"",color:"white"},on:{click:function(n){e.signInGoogle()}}},[a("v-icon",{staticClass:"mr-3"},[e._v("google")]),e._v(" Log in with Google")],1)],1),e._v(" "),a("div",[a("v-btn",{attrs:{light:"",color:"white"},on:{click:function(n){e.signInTwitter()}}},[a("v-icon",{staticClass:"mr-3",staticStyle:{fill:"#1da1f2"}},[e._v("twitter_circle")]),e._v(" Log in with Twitter")],1)],1),e._v(" "),a("div",[a("v-btn",{attrs:{dark:"",color:"grey darken-3"},on:{click:function(n){e.signInGitHub()}}},[a("v-icon",{staticClass:"mr-3"},[e._v("github_circle")]),e._v("Log in with GitHub")],1)],1),e._v(" "),a("div",[a("v-btn",{attrs:{dark:"",color:"grey darken-3"},on:{click:function(n){e.signInAnonym()}}},[a("v-icon",{staticClass:"mr-3"},[e._v("visibility")]),e._v("Guest login")],1)],1)])],1)},[],!1,r,"data-v-2edff86a",null);n.default=s.exports}}]);