(self.webpackJsonp=self.webpackJsonp||[]).push([[6,4],{140:function(e,a,t){"use strict";t.r(a);var n=t(61),o=t.n(n),i=t(369);function r(e,a){console.log("%c"+e,"background-color: "+(a?"lightsalmon":"lightgreen"))}var s=t(361);t.d(a,"states",function(){return u}),t.d(a,"app",function(){return d}),t.d(a,"db",function(){return h}),t.d(a,"state",function(){return f}),t.d(a,"user",function(){return p}),t.d(a,"userRef",function(){return m}),t.d(a,"newGamesRef",function(){return v}),t.d(a,"gamesRef",function(){return g}),t.d(a,"finishedGamesRef",function(){return y}),t.d(a,"usersRef",function(){return k}),t.d(a,"reconnect",function(){return M}),t.d(a,"signInAnonym",function(){return _}),t.d(a,"signInGoogle",function(){return D}),t.d(a,"signInGitHub",function(){return I}),t.d(a,"signInTwitter",function(){return L}),t.d(a,"logOut",function(){return B}),t.d(a,"updateUser",function(){return P});var l=t(383);t(382),t(381);var u={INITIALIZED:0,LOADING:1,DISCONNECTED:2,SIGNING:3,LOGIN:4,USER:5};o()(u).forEach(function(e){u[u[e]]=e});var c=!1,d=l.initializeApp({apiKey:"AIzaSyDBNvdGxCcet7VMwJ3Lc8CqafzbzCczss4",authDomain:"gridy-games.firebaseapp.com",databaseURL:"https://gridy-games.firebaseio.com",projectId:"gridy-games",storageBucket:"gridy-games.appspot.com",messagingSenderId:"324536496454"}),h=d.database(),f={value:u.LOADING,offset:null},p=l.auth().currentUser,m=null,v=h.ref("newGames"),g=h.ref("games"),y=h.ref("finishedGames"),k=h.ref("users").orderByChild("online").equalTo(!0),S=l.database().ref(".info/connected"),b=void 0,w=void 0,C=void 0;function M(){x(),h.goOnline(),A(),f.value=u.USER}function x(){S&&(S.off("value"),S.on("value",function(e){!0===e.val()?(r("Connection setting user online:true"),w.set(!0)):(r("Connection setting user online:false"),w.set(!1))}))}function A(){b.remove(),b.push(!0).on("value",function(e){e.val()||(r("Connection replaced",!0),S&&S.off("value"),f.value=u.DISCONNECTED,h.goOffline())})}function _(){x(),h.goOnline(),f.value=u.SIGNING,l.auth().setPersistence(l.auth.Auth.Persistence.LOCAL).then(function(){l.auth().signInAnonymously()})}function D(){x(),h.goOnline(),f.value=u.SIGNING,l.auth().setPersistence(l.auth.Auth.Persistence.LOCAL).then(function(){var e=new l.auth.GoogleAuthProvider;l.auth().signInWithPopup(e)})}function I(){x(),h.goOnline(),f.value=u.SIGNING,l.auth().setPersistence(l.auth.Auth.Persistence.LOCAL).then(function(){var e=new l.auth.GithubAuthProvider;l.auth().signInWithPopup(e)})}function L(){x(),h.goOnline(),f.value=u.SIGNING,l.auth().setPersistence(l.auth.Auth.Persistence.LOCAL).then(function(){var e=new l.auth.TwitterAuthProvider;l.auth().signInWithPopup(e)})}function B(){r("Log out"),r("Log out setting user online:false"),c=!0,w.set(!1).then(function(){l.auth().signOut().then(function(){p=null,m=null,f.value=u.INITIALIZED,h.goOffline()})})}function P(e){e.last=l.database.ServerValue.TIMESTAMP,m.update(e)}l.database().ref(".info/serverTimeOffset").on("value",function(e){f.offset=e.val(),r("Server offset: "+f.offset)}),l.auth().onAuthStateChanged(function(e){f.value=u.INITIALIZED,w&&w.off("value");S&&S.off("value");C&&C.cancel();e?(r("Setting user"),p=e,m=h.ref("users/"+p.uid),f.value=u.LOGIN,m.once("value").then(function(e){e.child("name").exists()?m.update({last:l.database.ServerValue.TIMESTAMP,online:!0,guest:!!p.isAnonymous||null,version:"0.41.219"}):m.update({last:l.database.ServerValue.TIMESTAMP,name:Object(s.a)(),avatar:Object(i.c)(),online:!0,guest:!!p.isAnonymous||null,version:"0.41.219"}),f.value=u.USER,b=m.child("connection"),A()}),w=m.child("online"),(C=w.onDisconnect()).set(!1),x(),w.on("value",function(e){c?c=!1:e.val()||S.once("value",function(e){!0===e.val()&&(c=!0,r("Setting user online:true"),w.set(!0))})})):(r("Resetting user"),p=null,m=null)})},361:function(e,a,t){"use strict";t.d(a,"a",function(){return o});var n=t(364);function o(){return Object(n.random)()+" "+(e="A".charCodeAt(0),a="Z".charCodeAt(0),String.fromCharCode(Math.floor(Math.random()*(a-e+1))+e))+(Math.floor(9*Math.random())+1);var e,a}},363:function(e){e.exports=["Abyss","Acolytes","Aegis","Agent","Aginar","Ahab","Ajak","Ajaxis","Akemi","Alain","Albion","Alice","Amethyst","Amiko","Amun","Angel","Anole","Anthem","Aquaman","Aqueduct","Arcade","Arclight","Ares","Argent","Armor","Armory","Arsenal","Arsenic","Artemis","Artiee","Aspen","Asterix","Asylum","Atlas","Atom","Atomic","Avalon","Azazel","Azrael","Aztec","Babaing","Banshee","Barb","Bastion","Batman","Battle","Beak","Beast","Bebop","Becatron","Bedlam","Beef","Beetle","Bengal","Binary","Bishop","Bizarro","Black","Blackbat","Blackout","Blade","Blastaar","Blink","Blizzard","Blob","Blok","Bloke","Blonde","Bloodaxe","Bloom","Blossom","Blue","Blur","Bonnie","Boom","Bounty","Brainiac","Brandy","Bronze","Brood","Bruce","Bubbles","Bucky","Buff","Buffy","Bullseye","Burnout","Cable","Calamity","Calendar","Caliban","Callisto","Calypso","Cammi","Cammy","Captain","Cardiac","Cargill","Carnage","Catseye","Celsius","Cerebro","Cerise","Cesspool","Chance","Chase","Chastity","Chat","Cheetah","Cherry","Choice","Cimarron","Cinnamon","Circuit","Cloak","Cobweb","Colleen","Colossus","Colt","Comedian","Copycat","Corsair","Cosmo","Crazy","Crimson","Crule","Crystal","Cuckoo","Cuthbert","Cybersix","Cyblade","Cyborg","Cyclops","Daken","Damian","Darkhawk","Darkstar","Dart","Darwin","Dawn","Dawnstar","Dead","Deadpool","Death","Deathcry","Deathlok","Debrii","Deep","Devi","Deviants","Devos","Diablo","Diamond","Dick","Doctor","Doll","Dollar","Dolphin","Domino","Doomsday","Doop","Doorman","Dormammu","Dorothy","Dove","Drax","Dream","Druig","Dumb","Dusk","Dust","Echo","Electro","Elixir","Empath","Epoch","Eternals","Eternity","Exiles","Exodus","Ezekiel","Faith","Falcon","Fallen","Fantomah","Fantomex","Fathom","Fenris","Feral","Fire","Firebird","Firefly","Firelord","Firestar","Flash","Flatman","Flint","Forearm","Forge","Freak","Free","Freefall","Frenzy","Fury","Galactus","Gambit","Ganymede","Gargoyle","Gateway","Genesis","Gertrude","Ghost","Gideon","Glorian","Glory","Gloss","Goliath","Gorgon","Grace","Graphics","Gravity","Green","Gressill","Groot","Guardian","Guile","Gwen","Gypsy","HYDRA","Hairball","Halo","Hank","Hardball","Harpoon","Haven","Havok","Hawk","Hawkeye","Hawkman","Hellboy","Hellcat","Hellion","Helspont","Hepzibah","Hercules","Hiroim","Hitman","Holy","Hooded","Horridus","Hulk","Hulkling","Humbug","Husk","Hussar","Hyperion","Iceman","Ichigo","Ikaris","Impulse","Indigo","Insect","Iron","Ironclad","Jackal","Jackpot","Jade","Jake","Jann","Jean","Jericho","Jesse","Jigsaw","Jinx","Jolt","Jonah","Jonni","Joseph","Joystick","Jubilee","Jungle","Justice","Kabuki","Kamandi","Kang","Kaoru","Karnak","Kasumi","Kelly","Khan","Kimberly","Kinetix","Kingpin","Kitty","Klaw","Knockout","Kole","Komodo","Korath","Korg","Korvac","Kraven","Kree","Kristin","Kronos","Kumori","Kyle","Kylun","Lady","Ladyhawk","Lagoon","Lake","Landau","Lanolin","Laurel","Leech","Leeloo","Legion","Lenore","Leonardo","Lettuce","Liberty","Lilith","Lime","Little","Lizard","Lobo","Lockheed","Lockjaw","Logan","Loki","Longshot","Luckman","Luminals","Lynn","Madame","Maddog","Madrox","Maestro","Maggott","Magik","Maginty","Magneto","Magus","Maiden","Makkari","Malice","Mandarin","Mandrill","Mandroid","Manitou","Mantis","Marrow","Martian","Marvel","Marvex","Mary","Masque","Maverick","Maximum","Maximus","Megatron","Meggan","Meltdown","Menace","Mentallo","Mentor","Mephisto","Mercury","Merry","Mesmero","Microbe","Micromax","Midnight","Miek","Mighty","Mimic","Mindworm","Mint","Mirage","Misfit","Miss","Misty","Miyako","Mojo","Molly","Momoko","Mongoose","Mongu","Moonstar","Morbius","Mordo","Morg","Morlocks","Morlun","Morph","Moth","Muskrat","Mysterio","Mystique","Namor","Naoko","Negative","Nehzno","Nemesis","Neon","Network","Nextwave","Nico","Nicolaos","Night","Nightcat","Nikki","Nimrod","Niobe","Nitro","Nomad","Nuke","Odin","Ogun","Onyx","Oracle","Orion","Orphan","Overlord","Owlman","Paibok","Paladin","Pandemic","PantyMan","Patch","Patriot","Payback","Penance","Penguin","Phalanx","Phantom","Phoenix","Photon","Pilgrim","Pink","Pixie","Plastic","Plazm","Poison","Polaris","Post","Preak","Pride","Prism","Prodigy","Proteus","PsyNapse","Psylocke","Psynch","Puck","Pudding","Pyro","Quasar","Queen","Rage","Rainbow","Rampage","Randall","Random","Raphael","Raptor","Rapture","Raven","Ravenous","Redwing","Reptil","Rescue","Revanche","Reverse","Rhino","Rictor","Riptide","Risque","Robin","Rogue","Romulus","Ronan","Ronin","Rose","Rouge","Roxy","Rumble","Runaways","Russian","Sage","Sailor","Salo","Samus","Sandman","Saracen","Saturn","Sauron","Savant","Scorpion","Scourge","Scream","Sentinel","Sentry","Sersi","Shadow","Shakti","Shaman","Shamrock","Shape","Shard","Shazam","Shikari","Shining","Shotgun","Shriek","Siege","Silk","Sinann","Siren","Siryn","Skaar","Skids","Skin","Skrulls","Slayback","Slyde","Snowbird","Solo","Songbird","Spartan","Sparx","Spawn","Spectrum","Speed","Speedy","Sphinx","Spiral","Spirit","Spitfire","Spot","Spyke","Squirrel","Stacy","Starbolt","Stardust","Starfire","Starfox","Starhawk","Stature","Steel","Stepford","Stick","Stingray","Storm","Stryfe","Sumo","Sunfire","Sunspot","Superman","Surge","Swarm","Sway","Swift","Switch","Synch","Talisman","Talkback","Talon","Talos","Tank","Tarot","Tattoo","Tempest","Tempo","Terrax","Terror","Terry","Thanos","Thing","Thor","Tick","Timeslip","Toad","Tomas","Topaz","Toro","Toxin","Traci","Trini","Triton","Tsunami","Turbo","Tusk","Tyrannus","Tyrant","Ulik","Ultimo","Ultron","Umar","Unicorn","Unus","Valis","Valkyrie","Vampiro","Vapor","Vargas","Vector","Velocity","Venom","Venus","Vermin","Vertigo","Violator","Virtuous","Vision","Vixen","Vogue","Void","Voodoo","Vulcan","Vulture","Wallop","Wallow","Warbird","Warbound","Warhawk","Warlock","Warpath","Warstar","Wasp","Watchmen","Wendigo","Wendy","Whiplash","Wiccan","Wild","Wildcat","Wildside","Willow","Wind","Winged","Wolfpack","Wong","Word","Wraith","Xavin","Xorn","Yellow","Zakuro","Zaran","Zarek","Zealot","Zeigeist","Zemo","Zodiak","Zombie","Zuras","Zzzax"]},364:function(e,a,t){var n=t(384),o=t(363);a.all=o,a.random=n(o)},476:function(e,a,t){(e.exports=t(1)(!1)).push([e.i,"[data-v-8280db8a] .card__media__content .icon{width:100%;display:block}[data-v-8280db8a] .card__media__content .icon svg{width:100%;display:block;height:144px}.app-grid[data-v-8280db8a]{display:-ms-grid;display:grid;grid-gap:8px;-ms-grid-columns:(1fr)[12];grid-template-columns:repeat(12,1fr)}.app-grid>[data-v-8280db8a]:first-child{grid-column:1/3;grid-row:1/3}@media (max-width:1904px){.app-grid[data-v-8280db8a]{-ms-grid-columns:(1fr)[8];grid-template-columns:repeat(8,1fr)}}@media (max-width:1264px){.app-grid[data-v-8280db8a]{-ms-grid-columns:(1fr)[5];grid-template-columns:repeat(5,1fr)}}@media (max-width:960px){.app-grid[data-v-8280db8a]{-ms-grid-columns:(1fr)[4];grid-template-columns:repeat(4,1fr)}}@media (max-width:600px){.app-grid[data-v-8280db8a]{-ms-grid-columns:(1fr)[2];grid-template-columns:repeat(2,1fr)}}",""])},477:function(e,a,t){var n=t(476);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,t(138).default)("5f7185b7",n,!0,{})},627:function(e,a,t){"use strict";t.r(a);var n=t(140),o=t(2),i=t(33),r=t.n(i),s=t(32),l=t.n(s),u=t(475),c=t.n(u);var d=t(474),h=t(144),f={components:{GProfileEdit:function(){return t.e(32).then(t.bind(null,615))},VTextField:function(){return t.e(18).then(function(){var e=t(632);return"object"==typeof e&&e&&e.__esModule?e:Object.assign({},"object"==typeof e&&e,{default:e})})},VSwitch:function(){return t.e(20).then(function(){var e=t(629);return"object"==typeof e&&e&&e.__esModule?e:Object.assign({},"object"==typeof e&&e,{default:e})})},VDialog:function(){return t.e(17).then(function(){var e=t(630);return"object"==typeof e&&e&&e.__esModule?e:Object.assign({},"object"==typeof e&&e,{default:e})})},GAvatar:function(){return t.e(23).then(t.bind(null,610))}},data:function(){return{user:null,state:n.state,Info:o.Info,acceptInvites:!1,showShare:!1,showEdit:!1,showSnack:!1,snackMessage:"",counter:0}},mounted:function(){var e=this;this.timer=setInterval(function(){e.counter++},1e3)},beforeDestroy:function(){Object(h.clearInterval)(this.timer)},firebase:{users:n.usersRef.limitToLast(25),games:n.gamesRef.limitToLast(25)},computed:{profileLink:function(){var e=this.$router.resolve(this.profileRoute);return location.origin+location.pathname+e.href},profileRoute:function(){return{name:"player",params:{id:this.user[".key"]}}}},watch:{"state.value":{immediate:!0,handler:function(e){console.log("Online state value:",n.states[e]),e===n.states.USER?(console.log("Online binding user"),this.$bindAsObject("user",n.userRef)):e!==n.states.DISCONNECTED&&(console.log("Online redirect to login"),this.$router.replace("login"))}}},methods:{logOut:n.logOut,format:d.format,share:function(){navigator.share?navigator.share({url:this.profileLink}):this.showShare=!this.showShare},openShare:function(){this.$router.push(this.profileRoute)},copyLink:function(){var e,a,t=this;(e=this.profileLink,new l.a(function(t,n){var o=document.createElement("button"),i=new c.a(o,{text:function(){return e},action:function(){return"copy"},container:"object"===(void 0===a?"undefined":r()(a))?a:document.body});i.on("success",function(e){i.destroy(),t(e)}),i.on("error",function(e){i.destroy(),n(e)}),o.click()})).then(function(){t.snackMessage="Copied to clipboard",t.showSnack=!0}).catch(function(){t.snackMessage="Copy to clipboard failed",t.showSnack=!0})},edited:function(e){Object(n.updateUser)(e)}}},p=t(92);var m=function(e){t(477)},v=Object(p.a)(f,function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.user&&e.user[".key"]?t("div",{staticClass:"pa-3"},[t("div",{staticStyle:{display:"none"}},[e._v(e._s(e.counter))]),e._v(" "),t("div",{staticClass:"app-grid"},[t("v-card",[t("v-layout",{staticClass:"ma-0"},[t("div",{staticClass:"title pa-3",staticStyle:{"text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"}},[e._v("\n          "+e._s(e.user.name)+"\n        ")]),e._v(" "),t("v-spacer"),e._v(" "),t("v-btn",{attrs:{icon:"",flat:""},on:{click:function(a){e.showEdit=!0}}},[t("v-icon",[e._v("mode_edit")])],1),e._v(" "),t("v-btn",{attrs:{icon:"",flat:""},on:{click:function(a){e.share()}}},[t("v-icon",[e._v("share")])],1)],1),e._v(" "),t("div",{staticClass:"text-xs-center pb-3"},[t("g-avatar",{staticStyle:{width:"calc(100% - 74px)"},attrs:{value:e.user.avatar,width:"48"}})],1),e._v(" "),t("div",{staticStyle:{position:"absolute",bottom:"8px",left:"4px"}},[e.user.guest?t("v-icon",{staticClass:"pl-2",style:{opacity:.5}},[e._v(e._s(e.user.online?"visibility":"visibility_off"))]):t("v-icon",{staticClass:"pl-3",style:{opacity:.5}},[e._v(e._s(e.user.online?"cloud_queue":"cloud_off"))]),e._v(" "),t("span",{staticClass:"pl-2 grey--text",staticStyle:{position:"relative",bottom:"-2px"}},[e._v(e._s(e.user.last?e.format(new Date(e.user.last)):""))])],1)],1),e._v(" "),e._l(e.users,function(a){return e.user[".key"]!==a[".key"]?t("v-card",{key:a[".key"]},[t("v-card-title",[t("div",{staticClass:"subheading",staticStyle:{"text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"}},[e._v(e._s(a.name||e.user[".key"]))])]),e._v(" "),t("div",{staticClass:"text-xs-center pb-3"},[t("g-avatar",{staticStyle:{width:"calc(100% - 58px)"},attrs:{value:a.avatar,width:"96"}})],1),e._v(" "),t("div",{staticStyle:{height:"8px"}}),e._v(" "),t("div",{staticStyle:{position:"absolute",bottom:"8px",left:"0","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden",width:"100%"}},[a.guest?t("v-icon",{staticClass:"pl-2",style:{opacity:.5}},[e._v(e._s(a.online?"visibility":"visibility_off"))]):t("v-icon",{staticClass:"pl-3",style:{opacity:.5}},[e._v(e._s(a.online?"cloud_queue":"cloud_off"))]),e._v(" "),t("span",{staticClass:"pl-2 grey--text",staticStyle:{position:"relative",bottom:"-2px"}},[e._v(e._s(a.last?e.format(new Date(a.last)):""))])],1)],1):e._e()})],2),e._v(" "),t("v-dialog",{attrs:{value:e.showShare,"max-width":"360px",persistent:""}},[t("v-card",[t("v-card-title",[t("span",{staticClass:"title pa-2"},[e._v("Share your profile")])]),e._v(" "),t("v-card-text",{staticClass:"py-0 px-4"},[t("v-text-field",{staticClass:"grey darken-2",attrs:{value:e.profileLink,"append-icon-cb":e.copyLink,"append-icon":"content_copy","hide-details":"",readonly:"","single-line":"",solo:""}})],1),e._v(" "),t("v-card-actions",[t("v-spacer"),e._v(" "),t("v-btn",{staticStyle:{"min-width":"0"},attrs:{flat:""},on:{click:function(a){e.showShare=!e.showShare}}},[e._v("Close")])],1)],1)],1),e._v(" "),t("v-snackbar",{attrs:{timeout:2e3,color:"grey darken-3",top:""},model:{value:e.showSnack,callback:function(a){e.showSnack=a},expression:"showSnack"}},[t("v-flex",{on:{click:function(a){e.showSnack=!1}}},[e._v(e._s(e.snackMessage))])],1),e._v(" "),e.showEdit?t("g-profile-edit",{attrs:{avatar:e.user.avatar,name:e.user.name},on:{edit:e.edited},model:{value:e.showEdit,callback:function(a){e.showEdit=a},expression:"showEdit"}}):e._e()],1):e._e()},[],!1,m,"data-v-8280db8a",null);a.default=v.exports}}]);